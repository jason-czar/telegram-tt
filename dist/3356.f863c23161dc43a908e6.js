(()=>{var e,t,n={23116:(e,t,n)=>{"use strict";var s={};n.r(s),n.d(s,{Type:()=>sa,clear:()=>ra,fetch:()=>ia,isCacheApiSupported:()=>na,remove:()=>oa,save:()=>aa});var i={};n.r(i),n.d(i,{abortChatRequests:()=>Ea,abortRequestGroup:()=>xa,acceptBotUrlAuth:()=>io,acceptCall:()=>ko,acceptLinkUrlAuth:()=>oo,acceptPhoneCall:()=>Zf,activateStealthMode:()=>gp,addChatMembers:()=>vr,allowBotSendMessages:()=>co,answerCallbackButton:()=>ja,applyBoost:()=>kp,applyGiftCode:()=>Gp,blockUser:()=>wu,broadcastLocalDbUpdateFull:()=>Te,changeSessionSettings:()=>ed,changeSessionTtl:()=>td,checkChatUsername:()=>Wc,checkChatlistInvite:()=>Or,checkGiftCode:()=>Hp,checkPassword:()=>tf,checkUsername:()=>uu,clearPassword:()=>nf,clearRecentReactions:()=>Af,clearRecentStickers:()=>Mc,clickSponsoredMessage:()=>zd,closePoll:()=>Rd,confirmCall:()=>Eo,confirmPhoneCall:()=>Yf,createChalistInvite:()=>Lr,createChannel:()=>zo,createGroupCall:()=>vo,createGroupChat:()=>Zo,createPhoneCallState:()=>Wf,createTopic:()=>xr,deactivateAllUsernames:()=>$c,decodePhoneCallData:()=>Kf,deleteChannel:()=>Yo,deleteChat:()=>$o,deleteChatFolder:()=>ar,deleteChatMember:()=>Cr,deleteChatUser:()=>Jo,deleteChatlistInvite:()=>zr,deleteContact:()=>pc,deleteExportedChatInvite:()=>Xc,deleteHistory:()=>wd,deleteMessages:()=>Ad,deleteProfilePhotos:()=>mu,deleteRevokedExportedChatInvites:()=>eu,deleteSavedHistory:()=>Id,deleteScheduledMessages:()=>yd,deleteStory:()=>op,deleteTopic:()=>Gr,destroy:()=>Ca,destroyPhoneCallState:()=>Jf,discardCall:()=>Bo,discardGroupCall:()=>go,disconnect:()=>Pa,downloadMedia:()=>Da,editChatFolder:()=>ir,editChatPhoto:()=>Qo,editChatlistInvite:()=>Wr,editExportedChatInvite:()=>Zc,editGroupCallParticipant:()=>Ao,editGroupCallTitle:()=>yo,editMessage:()=>pd,editStoryPrivacy:()=>fp,editTopic:()=>_r,encodePhoneCallData:()=>$f,exportChatInvite:()=>Qc,exportGroupCallInvite:()=>wo,faveSticker:()=>Cc,fetchAllStories:()=>Xf,fetchAnimatedEmojiEffects:()=>Dc,fetchAnimatedEmojis:()=>Tc,fetchAppConfig:()=>qu,fetchAuthorizations:()=>Su,fetchBlockedUsers:()=>yu,fetchBoostsList:()=>xp,fetchBoostsStatus:()=>Ep,fetchBotApp:()=>Ya,fetchBotCanSendMessage:()=>ro,fetchChannelRecommendations:()=>Yr,fetchChannelStatistics:()=>Uf,fetchChat:()=>Oo,fetchChatFolders:()=>nr,fetchChatInviteImporters:()=>tu,fetchChatSettings:()=>Fo,fetchChatlistInvites:()=>Jr,fetchChats:()=>No,fetchCommonChats:()=>ac,fetchConfig:()=>ju,fetchContactList:()=>dc,fetchContentSettings:()=>_u,fetchCountryList:()=>zu,fetchCurrentUser:()=>Na,fetchCustomEmoji:()=>Bc,fetchCustomEmojiSets:()=>yc,fetchDefaultStatusEmojis:()=>xc,fetchDefaultTopicIcons:()=>Ec,fetchDiscussionMessage:()=>Md,fetchEmojiKeywords:()=>jc,fetchExportedChatInvites:()=>Yc,fetchExtendedMedia:()=>Ed,fetchFavoriteStickers:()=>Sc,fetchFeaturedEmojiStickers:()=>vc,fetchFeaturedStickers:()=>bc,fetchFullChat:()=>Go,fetchFullUser:()=>ic,fetchGenericEmojiEffects:()=>Rc,fetchGiveawayInfo:()=>Np,fetchGlobalPrivacySettings:()=>Wu,fetchGroupCallParticipants:()=>Io,fetchGroupStatistics:()=>Bf,fetchGroupsForDiscussion:()=>wr,fetchInlineBot:()=>La,fetchInlineBotResults:()=>za,fetchLangPack:()=>ku,fetchLangStrings:()=>Eu,fetchLanguages:()=>Ru,fetchLeaveChatlistSuggestions:()=>jr,fetchMembers:()=>yr,fetchMessage:()=>dd,fetchMessagePublicForwards:()=>Df,fetchMessageReactions:()=>pf,fetchMessageReactionsList:()=>lf,fetchMessageStatistics:()=>Tf,fetchMessageViews:()=>Pd,fetchMessages:()=>rd,fetchMyBoosts:()=>Rp,fetchNearestCountry:()=>oc,fetchNotificationExceptions:()=>Uu,fetchNotificationSettings:()=>Bu,fetchPeerColors:()=>Vu,fetchPeerPinnedStories:()=>tp,fetchPeerStories:()=>ep,fetchPeerStoriesByIds:()=>sp,fetchPinnedMessages:()=>_d,fetchPremiumGifts:()=>kc,fetchPremiumPromo:()=>Tp,fetchPrivacySettings:()=>xu,fetchProfilePhotos:()=>lc,fetchRecentEmojiStatuses:()=>Vc,fetchRecentReactions:()=>gf,fetchRecentStickers:()=>Ic,fetchRecommendedChatFolders:()=>sr,fetchSavedChats:()=>Ho,fetchSavedGifs:()=>Hc,fetchScheduledHistory:()=>Hd,fetchSeenBy:()=>Od,fetchSendAs:()=>qd,fetchSponsoredMessages:()=>Vd,fetchStatisticsAsyncGraph:()=>Rf,fetchStickerSets:()=>wc,fetchStickers:()=>Uc,fetchStickersForEmoji:()=>qc,fetchStoriesArchive:()=>np,fetchStoriesMaxIds:()=>lp,fetchStoryLink:()=>cp,fetchStoryPublicForwards:()=>Ef,fetchStoryStatistics:()=>kf,fetchStoryViewList:()=>dp,fetchTemporaryPaymentPassword:()=>Dp,fetchTopInlineBots:()=>Va,fetchTopReactions:()=>mf,fetchTopUsers:()=>rc,fetchTopicById:()=>Hr,fetchTopics:()=>Nr,fetchUnreadMentions:()=>$d,fetchUnreadReactions:()=>Kd,fetchUsers:()=>cc,fetchWallpapers:()=>gu,fetchWebAuthorizations:()=>Cu,fetchWebPagePreview:()=>Td,findFirstMessageIdAfterDate:()=>Nd,forwardMessages:()=>xd,getAvailableReactions:()=>uf,getChatByPhoneNumber:()=>dr,getChatByUsername:()=>cr,getDhConfig:()=>Uo,getGroupCall:()=>mo,getPasswordInfo:()=>Xu,getPaymentForm:()=>Up,getReceipt:()=>Bp,hideAllChatJoinRequests:()=>su,hideChatJoinRequest:()=>nu,hideChatReportPanel:()=>iu,importChatInvite:()=>Tr,importContact:()=>uc,installStickerSet:()=>Fc,invokeWebViewCustomMethod:()=>uo,joinChannel:()=>Wo,joinChatlistInvite:()=>qr,joinGroupCall:()=>bo,joinGroupCallPresentation:()=>Co,leaveChannel:()=>Ko,leaveChatlist:()=>Vr,leaveGroupCall:()=>So,leaveGroupCallPresentation:()=>Mo,loadAttachBot:()=>to,loadAttachBots:()=>eo,loadPollOptionResults:()=>kd,markMessageListRead:()=>vd,markMessagesRead:()=>Cd,markStoryRead:()=>ap,migrateChat:()=>Sr,openChatByInvite:()=>br,pinMessage:()=>md,prolongWebView:()=>Qa,provideAuthCode:()=>Ai,provideAuthPassword:()=>yi,provideAuthPhoneNumber:()=>gi,provideAuthRegistration:()=>wi,provideRecoveryEmailCode:()=>of,readAllMentions:()=>Wd,readAllReactions:()=>Jd,receivedCall:()=>Ro,registerDevice:()=>Nu,removeRecentSticker:()=>Pc,reorderUsernames:()=>Ku,repairFileReference:()=>Ha,reportMessages:()=>Sd,reportPeer:()=>Qr,reportProfilePhoto:()=>Xr,reportSpam:()=>hc,reportStory:()=>up,requestAppWebView:()=>Za,requestBotUrlAuth:()=>so,requestCall:()=>To,requestChannelDifference:()=>Oa,requestChatUpdate:()=>qo,requestLinkUrlAuth:()=>ao,requestPhoneCall:()=>Qf,requestSimpleWebView:()=>Ka,requestWebView:()=>$a,rescheduleMessage:()=>ld,restartAuth:()=>Ii,restartAuthWithQr:()=>Si,saveCloseFriends:()=>gc,saveDefaultSendAs:()=>jd,saveDraft:()=>jo,saveGif:()=>Gc,searchChats:()=>_o,searchGifs:()=>Oc,searchMessagesGlobal:()=>Bd,searchMessagesLocal:()=>Ud,searchStickers:()=>Nc,sendEmojiInteraction:()=>cf,sendInlineBotResult:()=>Wa,sendMessage:()=>ud,sendMessageAction:()=>bd,sendPaymentForm:()=>Mp,sendPollVote:()=>Dd,sendReaction:()=>ff,sendScheduledMessages:()=>Gd,sendSignalingData:()=>xo,sendStoryReaction:()=>mp,sendWatchingEmojiInteraction:()=>df,sendWebViewData:()=>Xa,setAllowHttpTransport:()=>Fa,setBotInfo:()=>fo,setCallRating:()=>Do,setChatEnabledReactions:()=>Dr,setChatUsername:()=>Jc,setDefaultReaction:()=>hf,setDiscussionGroup:()=>Ir,setForceHttpTransport:()=>Ga,setPrivacySettings:()=>Gu,setShouldDebugExportedSenders:()=>_a,setViewForumAsMessages:()=>Kr,sortChatFolders:()=>or,startBot:()=>Ja,terminateAllAuthorizations:()=>vu,terminateAllWebAuthorizations:()=>Mu,terminateAuthorization:()=>bu,terminateWebAuthorization:()=>Pu,toggleAttachBot:()=>no,toggleChatArchived:()=>tr,toggleChatPinned:()=>Xo,toggleDialogUnread:()=>rr,toggleForum:()=>Er,toggleGroupCallStartSubscription:()=>Po,toggleIsProtected:()=>Rr,toggleJoinRequest:()=>Mr,toggleJoinToSend:()=>Pr,toggleParticipantsHidden:()=>kr,togglePeerTranslations:()=>$r,togglePinnedTopic:()=>Fr,togglePreHistoryHidden:()=>fr,toggleSavedDialogPinned:()=>er,toggleSignatures:()=>Ar,toggleStoriesHidden:()=>pp,toggleStoryPinned:()=>rp,toggleUsername:()=>$u,transcribeAudio:()=>Yd,translateText:()=>Zd,unblockUser:()=>Iu,uninstallStickerSet:()=>_c,unpinAllMessages:()=>gd,unregisterDevice:()=>Hu,updateChatAbout:()=>gr,updateChatAdmin:()=>hr,updateChatDefaultBannedRights:()=>pr,updateChatMemberBannedRights:()=>lr,updateChatMutedState:()=>Vo,updateChatTitle:()=>mr,updateContact:()=>fc,updateContactSignUpNotification:()=>Tu,updateContentSettings:()=>Ou,updateEmojiStatus:()=>mc,updateGlobalPrivacySettings:()=>Ju,updateIsOnline:()=>Fu,updateNotificationSettings:()=>Du,updatePassword:()=>sf,updatePrivateLink:()=>Kc,updateProfile:()=>cu,updateProfilePhoto:()=>pu,updateRecoveryEmail:()=>af,updateTopicMutedState:()=>Lo,updateUsername:()=>fu,uploadContactProfilePhoto:()=>hu,uploadProfilePhoto:()=>lu,uploadWallpaper:()=>Au,validateRequestedInfo:()=>Pp,viewSponsoredMessage:()=>Ld,viewStory:()=>ip});const a="A",o=!1,r="true",d=!1,c="https://telegram-a-host",u=!1,f="tt-media",p="tt-media-avatars",l=524288,h=16,m=16,g=("undefined"!=typeof window&&window.innerHeight,20),A=200,y=50,w=100,I=40,S=100,b=100,v=100,C=100,P=50,M=100,U=50,B=100,T=100,D=100,R=20,k=3e5,E=2**31-1,x=Math.round(450),N=new Set(["newMessage","newScheduledMessage","deleteMessages","deleteScheduledMessages","deleteHistory","updateThreadInfos"]),H=20,G=20,F="status-default-icon",_="video/webm",O="image/gif",q=new Set(["image/png","image/jpeg",O]),j=new Set(["video/mp4","video/quicktime"]),V=new Set(["audio/mp3","audio/ogg","audio/wav","audio/mpeg","audio/flac","audio/aac","audio/m4a","audio/mp4","audio/x-m4a"]),L=(new Set([...q,...j]),new Set(["t.me","web.t.me","a.t.me","k.t.me","z.t.me"]),"weba"),z=(new Set(["AU","BD","CA","CO","EG","HN","IE","IN","JO","MX","MY","NI","NZ","PH","PK","SA","SV","US"]),"777000"),W=14,J="gif",$=0,K=1,Y="-100777",Z="android",Q=1,X=86400,ee=86400,te={uploadMaxFileparts:[4e3,8e3],stickersFaved:[5,10],savedGifs:[200,400],dialogFiltersChats:[100,200],dialogFilters:[10,20],dialogFolderPinned:[5,10],captionLength:[1024,2048],channels:[500,1e3],channelsPublic:[10,20],aboutLength:[70,140],chatlistInvites:[3,100],chatlistJoined:[2,20],recommendedChannels:[10,100],savedDialogsPinned:[5,100]},ne=["log","error","warn","info","debug"];function se(e,t,n=!0){let s,i,a;return(...o)=>{i=!0,a=o,s||(n&&(i=!1,e(...a)),s=self.setInterval((()=>{if(!i)return self.clearInterval(s),void(s=void 0);i=!1,e(...a)}),t))}}function ie(e){return function(e,t){let n,s=!1;return(...i)=>{n=i,s||(s=!0,e((()=>{s=!1,t(...n)})))}}(re,e)}ne.reduce(((e,t)=>(e[t]=console[t],e)),{});const ae=e=>new Promise((t=>{setTimeout((()=>t()),e)}));let oe;function re(e){oe?oe.push(e):(oe=[e],Promise.resolve().then((()=>{const e=oe;oe=void 0,e.forEach((e=>e()))})))}var de=n(13522);function ce(e){return e.hasOwnProperty("userId")}function ue(e){return e.hasOwnProperty("chatId")}function fe(e,t){return"user"===t?e.toString():"channel"===t?`-100${e}`:`-${e}`}function pe(e){return ce(e)?fe(e.userId,"user"):ue(e)?fe(e.chatId,"chat"):fe(e.channelId,"channel")}function le(e){const{color:t,backgroundEmojiId:n}=e;return{color:t,backgroundEmojiId:n?.toString()}}function he(e){return e instanceof de.Api.EmojiStatus?{documentId:e.documentId.toString()}:e instanceof de.Api.EmojiStatusUntil?{documentId:e.documentId.toString(),until:e.until}:void 0}var me=n(24736),ge=n.n(me),Ae=n(57404);function ye(e,t=!1,n="image/jpeg"){return`${t?"":`data:${n};base64,`}${btoa(String.fromCharCode(...e))}`}function we(e){const{flags:t,CONSTRUCTOR_ID:n,SUBCLASS_OF_ID:s,className:i,classType:a,getBytes:o,...r}=e;return r}var Ie=n(48764).lW;const Se="BroadcastChannel"in self,be=Se?new BroadcastChannel("tt-global"):void 0;let ve=[];const Ce=se((()=>{be.postMessage({type:"localDbUpdate",batchedUpdates:ve}),ve=[]}),100);function Pe(e){if(e instanceof Uint8Array)return Ie.from(e);if("object"==typeof e&&1===Object.keys(e).length&&"value"===Object.keys(e)[0])return ge()(e.value);if(Array.isArray(e))return e.map(Pe);if("object"!=typeof e||!("CONSTRUCTOR_ID"in e))return e;const t=e.className.split(".").reduce(((e,t)=>e[t]),Ae.constructors),n=we(e);return new t(Object.keys(n).reduce(((e,t)=>(e[t]=Pe(n[t]),e)),{}))}function Me(e){return["localMessages","chats","users","messages","documents","stickerSets","photos","webDocuments","stories","commonBoxState","channelPtsById"].reduce(((t,n)=>{const s=e?.[n]??{},i=Object.keys(s).reduce(((e,t)=>{if("commonBoxState"===n||"channelPtsById"===n){const n=s;return e[t]=n[t],e}return e[t]=Pe(s[t]),e}),{});var a;return t[n]=Se?(a=n,new Proxy(i,{get:(e,t,n)=>Reflect.get(e,t,n),set:(e,t,n)=>(ve.push({name:a,prop:t,value:n}),Ce(),Reflect.set(e,t,n))})):i,t}),{})}const Ue=Me(),Be=Ue;function Te(){be&&be.postMessage({type:"localDbUpdateFull",localDb:Object.keys(Ue).reduce(((e,t)=>(e[t]={...Ue[t]},e)),{})})}var De=n(48764).lW;const Re="#111111DD",ke="#E4D00A",Ee={INVOKE:"#49DBF5",BEACON:"#F549DB",RESPONSE:"#6887F7",CONNECTING:"#E4D00A",CONNECTED:"#26D907","CONNECTING ERROR":"#D1191C","INVOKE ERROR":"#D1191C",UPDATE:"#0DD151","UNEXPECTED UPDATE":"#9C9C9C","UNEXPECTED RESPONSE":"#D1191C"};function xe(e){if(e instanceof de.Api.Message||e instanceof de.Api.MessageService)return pe(e.peerId)}function Ne(e){return e instanceof de.Api.DialogFilter||e instanceof de.Api.DialogFilterChatlist}function He(e){const t=`${xe(e)}-${e.id}`;let n=e;e instanceof de.Api.Message&&e.media instanceof de.Api.MessageMediaInvoice&&e.media.extendedMedia instanceof de.Api.MessageExtendedMedia&&(n=new de.Api.Message({...e,media:e.media.extendedMedia.media})),Be.messages[t]=n,n instanceof de.Api.Message&&(n.media&&Ge(n.media),n.replyTo instanceof de.Api.MessageReplyHeader&&n.replyTo.replyMedia&&Ge(n.replyTo.replyMedia)),n instanceof de.Api.MessageService&&"photo"in n.action&&_e(n.action.photo)}function Ge(e){e instanceof de.Api.MessageMediaDocument&&e.document instanceof de.Api.Document&&(Be.documents[String(e.document.id)]=e.document),e instanceof de.Api.MessageMediaWebPage&&e.webpage instanceof de.Api.WebPage&&e.webpage.document instanceof de.Api.Document&&(Be.documents[String(e.webpage.document.id)]=e.webpage.document),e instanceof de.Api.MessageMediaGame&&(e.game.document instanceof de.Api.Document&&(Be.documents[String(e.game.document.id)]=e.game.document),_e(e.game.photo)),e instanceof de.Api.MessageMediaInvoice&&e.photo&&(Be.webDocuments[String(e.photo.url)]=e.photo)}function Fe(e,t){if(!(e instanceof de.Api.StoryItem))return;const n={id:e.id,peerId:t};if(e.media instanceof de.Api.MessageMediaPhoto){const t=e.media.photo;t.storyData=n,_e(t)}if(e.media instanceof de.Api.MessageMediaDocument){if(e.media.document instanceof de.Api.Document){const t=e.media.document;t.storyData=n,Be.documents[String(e.media.document.id)]=t}if(e.media.altDocument instanceof de.Api.Document){const t=e.media.altDocument;t.storyData=n,Be.documents[String(e.media.altDocument.id)]=t}}}function _e(e){e instanceof de.Api.Photo&&(Be.photos[String(e.id)]=e)}function Oe(e){const t=fe(e.id,"user"),n=Be.users[t];n&&!n.min&&e.min||(Be.users[t]=e)}function qe(e){e.forEach((e=>{e instanceof de.Api.User?Oe(e):(e instanceof de.Api.Chat||e instanceof de.Api.Channel)&&function(e){const t=fe(e.id,e instanceof de.Api.Chat?"chat":"channel"),n=Be.chats[t],s=n&&"min"in n&&n.min,i="min"in e&&e.min;n&&!s&&i||(Be.chats[t]=e)}(e)}))}function je(e){return String.fromCharCode(...e)}function Ve(e){return De.from(e,"binary")}function Le(e,...t){("UNEXPECTED RESPONSE"===e?console.error:"INVOKE ERROR"===e||"UNEXPECTED UPDATE"===e?console.warn:console.log)(`%cGramJS%c${e}`,`color: ${ke}; background: ${Re}; padding: 0.25rem; border-radius: 0.25rem;`,`color: ${Ee[e]}; background: ${Re}; padding: 0.25rem; border-radius: 0.25rem; margin-left: 0.25rem;`,...t)}function ze(e,t){return e.reduce(((e,n)=>(e[n[t]]=n,e)),{})}function We(e,t){return e.reduce(((e,n)=>{const[s,i]=t(n);return e[s]=i,e}),{})}function Je(e,t){return t.reduce(((t,n)=>(t[n]=e[n],t)),{})}function $e(e,t){return t.reduce(((t,n)=>(e[n]&&(t[n]=e[n]),t)),{})}function Ke(e,t){const n=new Set(t.map(String));return Je(e,Object.keys(e).filter((e=>!n.has(e))))}function Ye(e){return Object.keys(e).reduce(((t,n)=>{const s=n;return void 0!==e[s]&&(t[s]=e[s]),t}),{})}function Ze(e){return e.filter(Boolean)}function Qe(e,t){const n=[];for(let s=0;s<e.length;s+=t)n.push(e.slice(s,s+t));return n}let Xe=0;function et(){return Xe}function tt(){return Math.floor(Date.now()/1e3)+Xe}var nt=n(48960),st=n(59187);const it='<?xml version="1.0" encoding="utf-8"?><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 {{width}} {{height}}" xml:space="preserve"><path fill-opacity="0.1" d="{{path}}" /></svg>',at="AACAAAAHAAALMAAAQASTAVAAAZaacaaaahaaalmaaaqastava.az0123456789-,";const ot={w:100,h:100};function rt(e,t){if(!e||!e.length)return;const n=e.find((e=>e instanceof de.Api.PhotoStrippedSize));if(!n)return;const s=e.filter((e=>e instanceof de.Api.PhotoSize)),{w:i,h:a}=s.length?s[s.length-1]:ot,{bytes:o}=n;return{dataUri:ye(t&&"image/jpeg"!==t?o:(0,nt.strippedPhotoToJpg)(o),void 0,t),width:i,height:a}}function dt(e,t){const{w:n,h:s}=t;return{dataUri:`data:image/svg+xml;utf8,${i=e.bytes,a=n,o=s,it.replace("{{path}}",function(e){let t="M";const n=e.length;for(let s=0;s<n;s++){const n=e[s];n>=192?t+=at[n-128-64]:(n>=128?t+=",":n>=64&&(t+="-"),t+=String(63&n))}return t+="z",t}(i)).replace("{{width}}",String(a)).replace("{{height}}",String(o))}`,width:n,height:s};var i,a,o}function ct(e,t){const n=e.sizes.filter((e=>e instanceof de.Api.PhotoSize||e instanceof de.Api.PhotoSizeProgressive)).map(ft);return{id:String(e.id),thumbnail:rt(e.sizes),sizes:n,isSpoiler:t,...e.videoSizes&&{videoSizes:Ze(e.videoSizes.map(ut)),isVideo:!0}}}function ut(e){if(!(e instanceof de.Api.VideoSize))return;const{videoStartTs:t,size:n,h:s,w:i,type:a}=e;return{videoStartTs:t,size:n,height:s,width:i,type:a}}function ft(e){const{w:t,h:n,type:s}=e;return{width:t,height:n,type:s}}function pt(e){if(!(e.usernames||"username"in e&&e.username))return;const t=[];return"username"in e&&e.username&&t.push({username:e.username,isActive:!0,isEditable:!0}),e.usernames&&e.usernames.forEach((({username:e,active:n,editable:s})=>{t.push({username:e,...n&&{isActive:!0},...s&&{isEditable:!0}})})),t}function lt(e){let t,n,s,i,a,o;const r=Be.chats;return e.forEach((e=>{e instanceof de.Api.PrivacyValueAllowAll?t||(t="everybody"):e instanceof de.Api.PrivacyValueAllowContacts?t||(t="contacts"):e instanceof de.Api.PrivacyValueAllowCloseFriends?t||(t="closeFriends"):e instanceof de.Api.PrivacyValueDisallowContacts?t||(t="nonContacts"):e instanceof de.Api.PrivacyValueDisallowAll?t||(t="nobody"):e instanceof de.Api.PrivacyValueAllowUsers?s=e.users.map((e=>fe(e,"user"))):e instanceof de.Api.PrivacyValueDisallowUsers?a=e.users.map((e=>fe(e,"user"))):e instanceof de.Api.PrivacyValueAllowChatParticipants?i=e.chats.map((e=>{const t=fe(e,"chat"),n=fe(e,"channel");return r[t]?t:n})):e instanceof de.Api.PrivacyValueDisallowChatParticipants&&(o=e.chats.map((e=>{const t=fe(e,"chat"),n=fe(e,"channel");return r[t]?t:n})))})),t||(t="nobody",n=!0),{visibility:t,isUnspecified:n,allowUserIds:s||[],allowChatIds:i||[],blockUserIds:a||[],blockChatIds:o||[]}}function ht(e){const{className:t,offset:n,length:s}=e;return e instanceof de.Api.MessageEntityMentionName?{type:st.Vv.MentionName,offset:n,length:s,userId:fe(e.userId,"user")}:e instanceof de.Api.MessageEntityTextUrl?{type:st.Vv.TextUrl,offset:n,length:s,url:e.url}:e instanceof de.Api.MessageEntityPre?{type:st.Vv.Pre,offset:n,length:s,language:e.language}:e instanceof de.Api.MessageEntityCustomEmoji?{type:st.Vv.CustomEmoji,offset:n,length:s,documentId:e.documentId.toString()}:{type:t,offset:n,length:s}}const mt="application/x-tgsticker",gt="video/webm";function At(e,t){if(e instanceof de.Api.DocumentEmpty)return;const{mimeType:n,videoThumbs:s}=e,i=e.attributes.find((e=>e instanceof de.Api.DocumentAttributeSticker)),a=e.attributes.find((e=>e instanceof de.Api.DocumentAttributeCustomEmoji)),o=(n===mt||n===gt)&&e.attributes.find((e=>e instanceof de.Api.DocumentAttributeFilename));if(!i&&!a&&!o)return;const r=n===mt,d=n===gt,c=Boolean(a),u=c&&a.textColor,f=e.attributes.find((e=>e instanceof de.Api.DocumentAttributeImageSize)),p=e.attributes.find((e=>e instanceof de.Api.DocumentAttributeVideo)),l=f||p,h=i||a,m=(w=h?.stickerset,w instanceof de.Api.InputStickerSetID?{id:String(w.id),accessHash:String(w.accessHash)}:w instanceof de.Api.InputStickerSetShortName?{shortName:w.shortName}:{isMissing:!0}),g=h?.alt,A=Boolean(a?.free??!0),y=e.thumbs&&e.thumbs.find((e=>e instanceof de.Api.PhotoCachedSize));var w;if(!(n!==gt||self.isWebmSupported||y||e.thumbs&&e.thumbs.find((e=>e instanceof de.Api.PhotoSize))))return;const I=e.thumbs&&e.thumbs.find((e=>e instanceof de.Api.PhotoPathSize)),S=y?function(e){const{w:t,h:n,bytes:s}=e;return{dataUri:ye(s,void 0,"image/webp"),width:t,height:n}}(y):I&&l?dt(I,l):void 0,{w:b,h:v}=y||l||{},C=!t&&s&&Ze(s?.filter((e=>e instanceof de.Api.VideoSize))).some((({type:e})=>"f"===e));return{id:String(e.id),stickerSetInfo:m,emoji:g,isCustomEmoji:c,isLottie:r,isVideo:d,width:b,height:v,thumbnail:S,hasEffect:C,isFree:A,shouldUseTextColor:u}}function yt(e){const{archived:t,animated:n,installedDate:s,videos:i,id:a,accessHash:o,title:r,thumbs:d,count:c,shortName:u,emojis:f,thumbDocumentId:p}=e;return{isArchived:t,isLottie:n,isVideos:i,isEmoji:f,installedDate:s,id:String(a),accessHash:String(o),title:r,hasThumbnail:Boolean(d?.length||p),thumbCustomEmojiId:p?.toString(),count:c,shortName:u}}function wt(e){const t=yt(e.set);if(e instanceof de.Api.StickerSetNoCovered)return t;const n=St(e instanceof de.Api.StickerSetCovered?[e.cover]:e instanceof de.Api.StickerSetMultiCovered?e.covers:e.documents);return e instanceof de.Api.StickerSetFullCovered?{...t,stickers:n,packs:It(e.packs)}:{...t,covers:n}}function It(e){return e.reduce(((e,{emoticon:t,documents:n})=>(e[t]=n.map((e=>At(Be.documents[String(e)]))).filter(Boolean),e)),{})}function St(e){return e.map((e=>{if(e instanceof de.Api.Document){const t=At(e);if(t)return Be.documents[String(e.id)]=e,t}})).filter(Boolean)}function bt(e){let t={};e.media&&(t={...Ct(e.media)});const n=e.media instanceof de.Api.MessageMediaUnsupported;return!e.message||n||t.sticker||t.poll||t.contact||t.video?.isRound||(t={...t,text:vt(e.message,e.entities)}),t}function vt(e,t){return{text:e,...t&&{entities:t.map(ht)}}}function Ct(e){const t="ttlSeconds"in e?e.ttlSeconds:void 0,n=function(e){return e instanceof de.Api.MessageMediaDocument&&(!e.document&&e.voice)}(e);if(n)return{isExpiredVoice:n};const s=function(e){if(!(e instanceof de.Api.MessageMediaDocument&&e.document&&e.document instanceof de.Api.Document))return;const t=e.document.attributes.find((e=>e instanceof de.Api.DocumentAttributeAudio));if(!t||!t.voice)return;const{duration:n,waveform:s}=t;return{id:String(e.document.id),duration:n,waveform:s?Array.from(s):void 0}}(e);if(s)return{voice:s,ttlSeconds:t};if(void 0!==t)return;if("extendedMedia"in e&&e.extendedMedia instanceof de.Api.MessageExtendedMedia)return Ct(e.extendedMedia.media);const i=function(e){if(e instanceof de.Api.MessageMediaDocument&&e.document&&e.document instanceof de.Api.Document)return At(e.document,e.nopremium)}(e);if(i)return{sticker:i};const a=function(e){if(e instanceof de.Api.MessageMediaPhoto&&e.photo&&e.photo instanceof de.Api.Photo)return ct(e.photo,e.spoiler)}(e);if(a)return{photo:a};const o=function(e){if(e instanceof de.Api.MessageMediaDocument&&e.document instanceof de.Api.Document&&e.document.mimeType.startsWith("video"))return Pt(e.document,e.spoiler)}(e),r=function(e){if(e instanceof de.Api.MessageMediaDocument&&e.altDocument instanceof de.Api.Document&&e.altDocument.mimeType.startsWith("video"))return Pt(e.altDocument,e.spoiler)}(e);if(o)return{video:o,altVideo:r};const d=function(e){if(!(e instanceof de.Api.MessageMediaDocument&&e.document&&e.document instanceof de.Api.Document))return;const t=e.document.attributes.find((e=>e instanceof de.Api.DocumentAttributeAudio));if(!t||t.voice)return;const n=e.document.thumbs&&e.document.thumbs.filter((e=>e instanceof de.Api.PhotoSize)).map((e=>ft(e)));return{id:String(e.document.id),fileName:Rt(e.document,"audio"),thumbnailSizes:n,size:e.document.size.toJSNumber(),...Je(e.document,["mimeType"]),...Je(t,["duration","performer","title"])}}(e);if(d)return{audio:d};const c=function(e){if(e instanceof de.Api.MessageMediaDocument&&e.document)return Mt(e.document)}(e);if(c)return{document:c};const u=function(e){if(!(e instanceof de.Api.MessageMediaContact))return;const{firstName:t,lastName:n,phoneNumber:s,userId:i}=e;return{firstName:t,lastName:n,phoneNumber:s,userId:fe(i,"user")}}(e);if(u)return{contact:u};const f=function(e){if(e instanceof de.Api.MessageMediaPoll)return Bt(e.poll,e.results)}(e);if(f)return{poll:f};const p=Dt(e);if(p)return{webPage:p};const l=function(e){if(e instanceof de.Api.MessageMediaInvoice)return function(e){const{description:t,title:n,photo:s,test:i,totalAmount:a,currency:o,receiptMsgId:r,extendedMedia:d}=e,c=d instanceof de.Api.MessageExtendedMediaPreview?kt(d):void 0;return{title:n,text:t,photo:Et(s),receiptMsgId:r,amount:Number(a),currency:o,isTest:i,extendedMedia:c}}(e)}(e);if(l)return{invoice:l};const h=function(e){return e instanceof de.Api.MessageMediaGeo?function(e){const t=Ut(e.geo);return t&&{type:"geo",geo:t}}(e):e instanceof de.Api.MessageMediaVenue?function(e){const{geo:t,title:n,provider:s,address:i,venueId:a,venueType:o}=e,r=Ut(t);return r&&{type:"venue",geo:r,title:n,provider:s,address:i,venueId:a,venueType:o}}(e):e instanceof de.Api.MessageMediaGeoLive?function(e){const{geo:t,period:n,heading:s}=e,i=Ut(t);return i&&{type:"geoLive",geo:i,period:n,heading:s}}(e):void 0}(e);if(h)return{location:h};const m=function(e){if(e instanceof de.Api.MessageMediaGame)return function(e){const{id:t,accessHash:n,shortName:s,title:i,description:a,photo:o,document:r}=e.game,d=o instanceof de.Api.Photo?ct(o):void 0,c=r instanceof de.Api.Document?Mt(r):void 0;return{id:t.toString(),accessHash:n.toString(),shortName:s,title:i,description:a,photo:d,document:c}}(e)}(e);if(m)return{game:m};const g=function(e){if(!(e instanceof de.Api.MessageMediaStory))return;const t=pe(e.peer);return{id:e.id,peerId:t,...e.viaMention&&{isMention:!0}}}(e);if(g)return{storyData:g};const A=function(e){if(e instanceof de.Api.MessageMediaGiveaway)return function(e){const{channels:t,months:n,quantity:s,untilDate:i,countriesIso2:a,onlyNewSubscribers:o,prizeDescription:r}=e,d=t.map((e=>fe(e,"channel")));return{channelIds:d,months:n,quantity:s,untilDate:i,countries:a,isOnlyForNewSubscribers:o,prizeDescription:r}}(e)}(e);if(A)return{giveaway:A};const y=function(e){if(e instanceof de.Api.MessageMediaGiveawayResults)return function(e){const{months:t,untilDate:n,onlyNewSubscribers:s,launchMsgId:i,unclaimedCount:a,winners:o,winnersCount:r,additionalPeersCount:d,prizeDescription:c,refunded:u,channelId:f}=e,p=o.map((e=>fe(e,"user")));return{months:t,untilDate:n,isOnlyForNewSubscribers:s,launchMessageId:i,channelId:fe(f,"channel"),unclaimedCount:a,additionalPeersCount:d,isRefunded:u,prizeDescription:c,winnerIds:p,winnersCount:r}}(e)}(e);return y?{giveawayResults:y}:void 0}function Pt(e,t){if(e instanceof de.Api.DocumentEmpty)return;const{id:n,mimeType:s,thumbs:i,size:a,attributes:o}=e;if(s===_&&!self.isWebmSupported)return;const r=o.find((e=>e instanceof de.Api.DocumentAttributeVideo));if(!r)return;const d=o.find((e=>e instanceof de.Api.DocumentAttributeAnimated)),{duration:c,w:u,h:f,supportsStreaming:p=!1,roundMessage:l=!1,nosound:h}=r;return{id:String(n),mimeType:s,duration:c,fileName:Rt(e,"video"),width:u,height:f,supportsStreaming:p,isRound:l,isGif:Boolean(d),thumbnail:rt(i),size:a.toJSNumber(),isSpoiler:t,...h&&{noSound:!0}}}function Mt(e){if(!(e instanceof de.Api.Document))return;const{id:t,size:n,mimeType:s,date:i,thumbs:a,attributes:o}=e,r=a&&a.find((e=>e instanceof de.Api.PhotoSize));let d,c,u=a&&rt(a);if(!u&&a&&r){const e=a.find((e=>e instanceof de.Api.PhotoPathSize));e&&(u=dt(e,r))}if(r)if(c={width:r.w,height:r.h},q.has(s)){d="photo";const e=o.find((e=>e instanceof de.Api.DocumentAttributeImageSize));if(e){const{w:t,h:n}=e;c={width:t,height:n}}}else if(j.has(s)){d="video";const e=o.find((e=>e instanceof de.Api.DocumentAttributeVideo));if(e){const{w:t,h:n}=e;c={width:t,height:n}}}return{id:String(t),size:n.toJSNumber(),mimeType:s,timestamp:i,fileName:Rt(e),thumbnail:u,mediaType:d,mediaSize:c}}function Ut(e){if(e instanceof de.Api.GeoPointEmpty)return;const{long:t,lat:n,accuracyRadius:s,accessHash:i}=e;return{long:t,lat:n,accessHash:i.toString(),accuracyRadius:s}}function Bt(e,t){const{id:n,answers:s}=e,i=s.map((e=>({text:e.text,option:je(e.option)})));return{id:String(n),summary:{isPublic:e.publicVoters,...Je(e,["closed","multipleChoice","quiz","question","closePeriod","closeDate"]),answers:i},results:Tt(t)}}function Tt(e){const{results:t,totalVoters:n,recentVoters:s,solution:i,solutionEntities:a,min:o}=e,r=t?.map((({option:e,chosen:t,correct:n,voters:s})=>({isChosen:t,isCorrect:n,option:je(e),votersCount:s})));return{isMin:o,totalVoters:n,recentVoterIds:s?.map((e=>pe(e))),results:r,solution:i,...a&&{solutionEntities:a.map(ht)}}}function Dt(e){if(!(e instanceof de.Api.MessageMediaWebPage&&e.webpage instanceof de.Api.WebPage))return;const{id:t,photo:n,document:s,attributes:i}=e.webpage;let a,o;s instanceof de.Api.Document&&s.mimeType.startsWith("video/")&&(a=Pt(s));const r=i?.find((e=>e instanceof de.Api.WebPageAttributeStory));if(r){const e=pe(r.peer);o={id:r.id,peerId:e},r.story instanceof de.Api.StoryItem&&Fe(r.story,e)}return{id:Number(t),...Je(e.webpage,["url","displayUrl","type","siteName","title","description","duration"]),photo:n instanceof de.Api.Photo?ct(n):void 0,document:!a&&s?Mt(s):void 0,video:a,story:o}}function Rt(e,t="file"){const{mimeType:n,attributes:s}=e,i=s.find((e=>e instanceof de.Api.DocumentAttributeFilename));if(i)return i.fileName;const a=n.split("/")[1];return`${t}${String(e.id)}.${a}`}function kt(e){const{w:t,h:n,thumb:s,videoDuration:i}=e;return{width:t,height:n,duration:i,thumbnail:s?rt([s]):void 0}}function Et(e){if(!e)return;const{url:t,size:n,mimeType:s}=e,i=e instanceof de.Api.WebDocument?e.accessHash.toString():void 0,a=e.attributes.find((e=>e instanceof de.Api.DocumentAttributeImageSize));return{url:t,accessHash:i,size:n,mimeType:s,dimensions:a&&{width:a.w,height:a.h}}}function xt(e){return{id:e.botId.toString(),shouldRequestWriteAccess:e.requestWriteAccess,shortName:e.shortName,isForAttachMenu:e.showInAttachMenu,isForSideMenu:e.showInSideMenu,attachMenuPeerTypes:e.peerTypes?.map(Nt),icons:e.icons.map(Ht).filter(Boolean),isInactive:e.inactive,isDisclaimerNeeded:e.sideMenuDisclaimerNeeded}}function Nt(e){return e instanceof de.Api.AttachMenuPeerTypeBotPM?"bots":e instanceof de.Api.AttachMenuPeerTypePM?"users":e instanceof de.Api.AttachMenuPeerTypeChat?"chats":e instanceof de.Api.AttachMenuPeerTypeBroadcast?"channels":e instanceof de.Api.AttachMenuPeerTypeSameBotPM?"self":void 0}function Ht(e){if(!(e.icon instanceof de.Api.Document))return;const t=Mt(e.icon);return t?(Be.documents[String(e.icon.id)]=e.icon,{name:e.name,document:t}):void 0}function Gt(e,t){const{description:n,descriptionPhoto:s,descriptionDocument:i,userId:a,commands:o,menuButton:r}=e,d=a&&fe(a,"user"),c=s instanceof de.Api.Photo?ct(s):void 0,u=i instanceof de.Api.Document?Pt(i):void 0,f=o?.map((e=>function(e,t){return{botId:e,...we(t)}}(d||t,e)));return{botId:d||t,description:n,gif:u,photo:c,menuButton:Ft(r),commands:f?.length?f:void 0}}function Ft(e){return e instanceof de.Api.BotMenuButton?{type:"webApp",text:e.text,url:e.url}:{type:"commands"}}function _t(e){if(e instanceof de.Api.BotAppNotModified)return;const{id:t,accessHash:n,title:s,description:i,shortName:a,photo:o,document:r}=e,d=o instanceof de.Api.Photo?ct(o):void 0,c=r instanceof de.Api.Document?Mt(r):void 0;return{id:t.toString(),accessHash:n.toString(),title:s,description:i,shortName:a,photo:d,document:c}}function Ot(e){const{self:t,min:n,about:s,date:i,versioned:a,canSelfUnmute:o,justJoined:r,left:d,muted:c,mutedByYou:u,source:f,volume:p,volumeByAdmin:l,videoJoined:h,peer:m,video:g,presentation:A,raiseHandRating:y}=e;return{isSelf:t,isMin:n,canSelfUnmute:o,isLeft:d,isMuted:c,isMutedByMe:u,hasJustJoined:r,isVolumeByAdmin:l,isVersioned:a,isVideoJoined:h,about:s,source:f,raiseHandRating:y?.toString(),volume:p,date:new Date(i),isUser:ce(m),id:pe(m),video:g?qt(g):void 0,presentation:A?qt(A):void 0}}function qt(e){const{audioSource:t,endpoint:n,paused:s,sourceGroups:i}=e;return{audioSource:t,endpoint:n,isPaused:s,sourceGroups:i.map(jt)}}function jt(e){return{semantics:e.semantics,sources:e.sources}}function Vt(e){const{id:t,accessHash:n}=e;if(e instanceof de.Api.GroupCallDiscarded)return{connectionState:"discarded",id:t.toString(),accessHash:n.toString(),participantsCount:0,version:0,participants:{}};const{version:s,participantsCount:i,streamDcId:a,scheduleDate:o,canChangeJoinMuted:r,joinMuted:d,canStartVideo:c,scheduleStartSubscribed:u}=e;return{connectionState:"disconnected",isLoaded:!0,id:t.toString(),accessHash:n.toString(),version:s,participantsCount:i,streamDcId:a,scheduleDate:o,canChangeJoinMuted:r,joinMuted:d,canStartVideo:c,scheduleStartSubscribed:u,participants:{}}}function Lt(e){const{id:t}=e;let n={id:t.toString()};if(e instanceof de.Api.PhoneCallAccepted||e instanceof de.Api.PhoneCallWaiting||e instanceof de.Api.PhoneCall||e instanceof de.Api.PhoneCallRequested){const{accessHash:t,adminId:s,date:i,video:a,participantId:o,protocol:r}=e;n={...n,accessHash:t.toString(),adminId:s.toString(),participantId:o.toString(),date:i,isVideo:a,protocol:Jt(r)}}if(e instanceof de.Api.PhoneCall){const{p2pAllowed:t,gAOrB:s,keyFingerprint:i,connections:a,startDate:o}=e;n={...n,state:"active",gAOrB:Array.from(s),keyFingerprint:i.toString(),startDate:o,isP2pAllowed:Boolean(t),connections:a.map(Wt).filter(Boolean)}}return e instanceof de.Api.PhoneCallDiscarded&&(n={...n,state:"discarded",duration:e.duration,reason:zt(e.reason),needRating:e.needRating,needDebug:e.needDebug}),e instanceof de.Api.PhoneCallWaiting&&(n={...n,state:"waiting",receiveDate:e.receiveDate}),e instanceof de.Api.PhoneCallAccepted&&(n={...n,state:"accepted",gB:Array.from(e.gB)}),e instanceof de.Api.PhoneCallRequested&&(n={...n,state:"requested",gAHash:Array.from(e.gAHash)}),n}function zt(e){return e instanceof de.Api.PhoneCallDiscardReasonMissed?"missed":e instanceof de.Api.PhoneCallDiscardReasonBusy?"busy":e instanceof de.Api.PhoneCallDiscardReasonHangup?"hangup":"disconnect"}function Wt(e){if(e instanceof de.Api.PhoneConnectionWebrtc){const{username:t,password:n,turn:s,stun:i,ip:a,ipv6:o,port:r}=e;return{username:t,password:n,isTurn:s,isStun:i,ip:a,ipv6:o,port:r}}}function Jt(e){const{libraryVersions:t,minLayer:n,maxLayer:s,udpP2p:i,udpReflector:a}=e;return{libraryVersions:t,minLayer:n,maxLayer:s,isUdpP2p:i,isUdpReflector:a}}function $t(){return new de.Api.PhoneCallProtocol({libraryVersions:["4.0.0"],minLayer:92,maxLayer:92,udpReflector:!0,udpP2p:!0})}function Kt(e){const{recentReactions:t,results:n,canSeeList:s}=e;return{canSeeList:s,results:n.map(Zt).filter(Boolean).sort(Yt),recentReactions:t?.map(Qt).filter(Boolean)}}function Yt(e,t){return t.count-e.count||(void 0!==e.chosenOrder&&void 0!==t.chosenOrder?e.chosenOrder-t.chosenOrder:void 0!==e.chosenOrder?1:void 0!==t.chosenOrder?-1:0)}function Zt(e){const{chosenOrder:t,count:n,reaction:s}=e,i=Xt(s);if(i)return{chosenOrder:t,count:n,reaction:i}}function Qt(e){const{peerId:t,reaction:n,big:s,unread:i,date:a,my:o}=e,r=Xt(n);if(r)return{peerId:pe(t),reaction:r,addedDate:a,isUnread:i,isBig:s,isOwn:o}}function Xt(e){return e instanceof de.Api.ReactionEmoji?{emoticon:e.emoticon}:e instanceof de.Api.ReactionCustomEmoji?{documentId:e.documentId.toString()}:void 0}function en(e){const{selectAnimation:t,staticIcon:n,reaction:s,title:i,appearAnimation:a,inactive:o,aroundAnimation:r,centerIcon:d,effectAnimation:c,activateAnimation:u,premium:f}=e;return{selectAnimation:Mt(t),appearAnimation:Mt(a),activateAnimation:Mt(u),effectAnimation:Mt(c),staticIcon:Mt(n),aroundAnimation:r?Mt(r):void 0,centerIcon:d?Mt(d):void 0,reaction:{emoticon:s},title:i,isInactive:o,isPremium:f}}function tn(e,t=!1){const n=Boolean("min"in e&&e.min),s="accessHash"in e?String(e.accessHash):void 0,i="photo"in e&&e.photo&&"hasVideo"in e.photo&&e.photo.hasVideo,a="photo"in e&&e.photo?pn(e.photo):void 0,o=Boolean("signatures"in e&&e.signatures),r=Boolean("hasLink"in e&&e.hasLink),d=Boolean("scam"in e&&e.scam),c=Boolean("fake"in e&&e.fake),u=Boolean("joinToSend"in e&&e.joinToSend),f=Boolean("joinRequest"in e&&e.joinRequest),p=pt(e),l=Boolean("forum"in e&&e.forum),h=Boolean("storiesHidden"in e&&e.storiesHidden),m="storiesMaxId"in e?e.storiesMaxId:void 0,g=Boolean("storiesUnavailable"in e&&e.storiesUnavailable),A="color"in e&&e.color?le(e.color):void 0,y="emojiStatus"in e&&e.emojiStatus?he(e.emojiStatus):void 0;return Ye({isMin:n,hasPrivateLink:r,isSignaturesShown:o,usernames:p,accessHash:s,hasVideoAvatar:i,avatarHash:a,..."verified"in e&&{isVerified:e.verified},..."callActive"in e&&{isCallActive:e.callActive},..."callNotEmpty"in e&&{isCallNotEmpty:e.callNotEmpty},..."date"in e&&{creationDate:e.date},..."participantsCount"in e&&void 0!==e.participantsCount&&{membersCount:e.participantsCount},..."noforwards"in e&&{isProtected:Boolean(e.noforwards)},isSupport:t||void 0,...sn(e),..."creator"in e&&{isCreator:e.creator},...an(e),...on(e),fakeType:d?"scam":c?"fake":void 0,color:A,isJoinToSend:u,isJoinRequest:f,isForum:l,areStoriesHidden:h,maxStoryId:m,hasStories:Boolean(m)&&!g,emojiStatus:y})}function nn(e,t){const{peer:n,folderId:s,unreadMark:i,unreadCount:a,unreadMentionsCount:o,unreadReactionsCount:r,notifySettings:{silent:d,muteUntil:c},readOutboxMaxId:u,readInboxMaxId:f,draft:p,viewForumAsMessages:l}=e,h=d||"number"==typeof c&&tt()<c;return{id:pe(n),...s&&{folderId:s},type:dn(t),title:un(n,t),lastReadOutboxMessageId:u,lastReadInboxMessageId:f,unreadCount:a,unreadMentionsCount:o,unreadReactionsCount:r,isMuted:h,muteUntil:c,...i&&{hasUnreadMark:!0},...p instanceof de.Api.DraftMessage&&{draftDate:p.date},...l&&{isForumAsMessages:!0},...tn(t)}}function sn(e){return e instanceof de.Api.Chat||e instanceof de.Api.Channel?{adminRights:e.adminRights?we(e.adminRights):void 0,currentUserBannedRights:"bannedRights"in e&&e.bannedRights?we(e.bannedRights):void 0,defaultBannedRights:e.defaultBannedRights?we(e.defaultBannedRights):void 0}:{}}function an(e){if(e instanceof de.Api.ChatForbidden)return{isForbidden:!0};if(e instanceof de.Api.ChannelForbidden)return{isRestricted:!0};const t={};if("restricted"in e){const n=e.restricted?function(e){if(!e)return;const t=e.find((({platform:e})=>"all"===e));return t?Je(t,["reason","text"]):void 0}(e.restrictionReason):void 0;n&&Object.assign(t,{isRestricted:!0,restrictionReason:n})}return e instanceof de.Api.Chat&&Object.assign(t,{isNotJoined:e.left}),e instanceof de.Api.Channel&&Object.assign(t,{isNotJoined:e.left}),t}function on(e){return!("migratedTo"in e)||!e.migratedTo||e.migratedTo instanceof de.Api.InputChannelEmpty?{}:{migratedTo:{chatId:pe(e.migratedTo),...e.migratedTo instanceof de.Api.InputChannel&&{accessHash:String(e.migratedTo.accessHash)}}}}function rn(e,t=!1){if(!(e instanceof de.Api.ChatEmpty||e instanceof de.Api.UserEmpty))return{id:fe(e.id,e instanceof de.Api.User?"user":e instanceof de.Api.Chat||e instanceof de.Api.ChatForbidden?"chat":"channel"),type:dn(e),title:e instanceof de.Api.User?fn(e):e.title,...tn(e,t)}}function dn(e){return e instanceof de.Api.User||e instanceof de.Api.UserEmpty?"chatTypePrivate":e instanceof de.Api.Chat||e instanceof de.Api.ChatForbidden||e instanceof de.Api.ChatEmpty?"chatTypeBasicGroup":e.megagroup?"chatTypeSuperGroup":"chatTypeChannel"}function cn(e){return ce(e)?`user${e.userId}`:ue(e)?`chat${e.chatId}`:`chat${e.channelId}`}function un(e,t){return ce(e)?fn(t):t.title}function fn(e){return e.firstName?`${e.firstName}${e.lastName?` ${e.lastName}`:""}`:e.lastName||""}function pn(e){if("photoId"in e)return String(e.photoId)}function ln(e){return{userId:e instanceof de.Api.ChannelParticipantBanned||e instanceof de.Api.ChannelParticipantLeft?pe(e.peer):fe(e.userId,"user"),inviterId:"inviterId"in e&&e.inviterId?fe(e.inviterId,"user"):void 0,joinedDate:"date"in e?e.date:void 0,kickedByUserId:"kickedBy"in e&&e.kickedBy?fe(e.kickedBy,"user"):void 0,promotedByUserId:"promotedBy"in e&&e.promotedBy?fe(e.promotedBy,"user"):void 0,bannedRights:"bannedRights"in e?we(e.bannedRights):void 0,adminRights:"adminRights"in e?we(e.adminRights):void 0,customTitle:"rank"in e?e.rank:void 0,...(e instanceof de.Api.ChannelParticipantAdmin||e instanceof de.Api.ChatParticipantAdmin)&&{isAdmin:!0},...(e instanceof de.Api.ChannelParticipantCreator||e instanceof de.Api.ChatParticipantCreator)&&{isOwner:!0}}}function hn(e){return e instanceof de.Api.ChatParticipants||e instanceof de.Api.channels.ChannelParticipants?e.participants.map(ln).filter(Boolean):void 0}function mn(e){let t,n="";if(!(e.action instanceof de.Api.SendMessageCancelAction)){if(e.action instanceof de.Api.SendMessageTypingAction)n="lng_user_typing";else if(e.action instanceof de.Api.SendMessageRecordVideoAction)n="lng_send_action_record_video";else if(e.action instanceof de.Api.SendMessageUploadVideoAction)n="lng_send_action_upload_video";else if(e.action instanceof de.Api.SendMessageRecordAudioAction)n="lng_send_action_record_audio";else if(e.action instanceof de.Api.SendMessageUploadAudioAction)n="lng_send_action_upload_audio";else if(e.action instanceof de.Api.SendMessageUploadPhotoAction)n="lng_send_action_upload_photo";else if(e.action instanceof de.Api.SendMessageUploadDocumentAction)n="lng_send_action_upload_file";else if(e.action instanceof de.Api.SendMessageGeoLocationAction)n="selecting a location to share";else if(e.action instanceof de.Api.SendMessageChooseContactAction)n="selecting a contact to share";else if(e.action instanceof de.Api.SendMessageGamePlayAction)n="lng_playing_game";else if(e.action instanceof de.Api.SendMessageRecordRoundAction)n="lng_send_action_record_round";else if(e.action instanceof de.Api.SendMessageUploadRoundAction)n="lng_send_action_upload_round";else if(e.action instanceof de.Api.SendMessageChooseStickerAction)n="lng_send_action_choose_sticker";else{if(e.action instanceof de.Api.SpeakingInGroupCallAction)return;if(e.action instanceof de.Api.SendMessageEmojiInteractionSeen)n="lng_user_action_watching_animations",t=e.action.emoticon;else if(e.action instanceof de.Api.SendMessageEmojiInteraction)return}return{action:n,...t&&{emoji:t},...!(e instanceof de.Api.UpdateUserTyping)&&{userId:pe(e.fromId)},timestamp:Date.now()+1e3*et()}}}function gn(e){return e instanceof de.Api.DialogFilterChatlist?{...$e(e,["id","title","emoticon"]),excludedChatIds:[],includedChatIds:e.includePeers.map(pe).filter(Boolean),pinnedChatIds:e.pinnedPeers.map(pe).filter(Boolean),hasMyInvites:e.hasMyInvites,isChatList:!0}:{...$e(e,["id","title","emoticon","contacts","nonContacts","groups","bots","excludeMuted","excludeRead","excludeArchived"]),channels:e.broadcasts,pinnedChatIds:e.pinnedPeers.map(pe).filter(Boolean),includedChatIds:e.includePeers.map(pe).filter(Boolean),excludedChatIds:e.excludePeers.map(pe).filter(Boolean)}}function An({filter:e,description:t}){if(e instanceof de.Api.DialogFilter||e instanceof de.Api.DialogFilterChatlist)return{...gn(e),description:t}}function yn(e){return e.reduce(((e,t)=>{const n=fe(t.userId,"user");return t.commands&&(e=e.concat(t.commands.map((e=>({botId:n,...we(e)}))))),e}),[])}function wn(e){const{revoked:t,date:n,expireDate:s,link:i,permanent:a,startDate:o,usage:r,usageLimit:d,requested:c,requestNeeded:u,title:f,adminId:p}=e;return{isRevoked:t,date:n,expireDate:s,link:i,isPermanent:a,startDate:o,usage:r,usageLimit:d,isRequestNeeded:u,requested:c,title:f,adminId:fe(p,"user")}}function In({autoarchived:e,reportSpam:t,addContact:n,blockContact:s}){return{isAutoArchived:Boolean(e),canReportSpam:Boolean(t),canAddContact:Boolean(n),canBlockContact:Boolean(s)}}function Sn(e){return e instanceof de.Api.ChatReactionsAll?{type:"all",areCustomAllowed:e.allowCustom}:e instanceof de.Api.ChatReactionsSome?{type:"some",allowed:e.reactions.map(Xt).filter(Boolean)}:void 0}function bn(e){return{id:pe(e.peer),isPremium:e.premiumRequired}}function vn(e){if(e instanceof de.Api.ForumTopicDeleted)return;const{id:t,my:n,closed:s,pinned:i,hidden:a,short:o,date:r,title:d,iconColor:c,iconEmojiId:u,topMessage:f,unreadCount:p,unreadMentionsCount:l,unreadReactionsCount:h,fromId:m,notifySettings:{silent:g,muteUntil:A}}=e;return{id:t,isClosed:s,isPinned:i,isHidden:a,isOwner:n,isMin:o,date:r,title:d,iconColor:c,iconEmojiId:u?.toString(),lastMessageId:f,unreadCount:p,unreadMentionsCount:l,unreadReactionsCount:h,fromId:pe(m),isMuted:g||("number"==typeof A?tt()<A:void 0),muteUntil:A}}function Cn(e){if(!(e instanceof de.Api.ExportedChatlistInvite))return;const{title:t,url:n,peers:s}=e;return{title:t,url:n,peerIds:s.map(pe).filter(Boolean)}}var Pn=n(78058);function Mn(e,t){let n=0;const s=new Array(t),i=e.length/t,a=e[0],o=e[e.length-1];for(let r=0;r<t;r++){const t=Math.floor(r*i),d=((e[t-1]??a)+(e[t]??a)+(e[t+1]??o))/3;s[r]=d,n<d&&(n=d)}return{data:s,peak:n}}var Un=n(89618),Bn=n.n(Un);const Tn=11;function Dn(e){return e.startsWith("-")?((t=e).length>=W?t.startsWith("-100"):(t.length!==Tn||!t.startsWith("-4"))&&t.length>=Tn)?"channel":"chat":"user";var t}function Rn(e){const t=Dn(e);return"user"===t?new de.Api.PeerUser({userId:Qn(e,"user")}):"channel"===t?new de.Api.PeerChannel({channelId:Qn(e,"channel")}):new de.Api.PeerChat({chatId:Qn(e,"chat")})}function kn(e,t){const n=Dn(e);return"user"===n?new de.Api.InputPeerUser({userId:Qn(e,"user"),accessHash:ge()(t)}):"channel"===n?new de.Api.InputPeerChannel({channelId:Qn(e,"channel"),accessHash:ge()(t)}):new de.Api.InputPeerChat({chatId:Qn(e,"chat")})}function En(e){const t=Dn(e);let n;if("user"===t){if(n=Be.users[e]?.accessHash,!n)return}else if("channel"===t&&(n=Be.chats[e]?.accessHash,!n))return;return kn(e,String(n))}function xn(e,t){const n=Dn(e);return"user"===n?new de.Api.InputUser({userId:Qn(e,"user"),accessHash:ge()(t)}):"channel"===n?new de.Api.InputChannel({channelId:Qn(e,"channel"),accessHash:ge()(t)}):Qn(e,"chat")}function Nn(e,t){return new de.Api.InputStickerSetID({id:ge()(e),accessHash:ge()(t)})}function Hn(e){const t=Be.documents[e.id];if(t)return new de.Api.InputDocument(Je(t,["id","accessHash","fileReference"]))}function Gn(e){const t=Hn(e);if(t)return new de.Api.InputMediaDocument({id:t})}function Fn(e,t=!1){return new de.Api.InputMediaPoll({poll:new de.Api.Poll({id:ge()(e.id),publicVoters:e.summary.isPublic,question:e.summary.question,answers:e.summary.answers.map((({text:e,option:t})=>new de.Api.PollAnswer({text:e,option:Ve(t)}))),quiz:e.summary.quiz,multipleChoice:e.summary.multipleChoice,closeDate:e.summary.closeDate,closePeriod:e.summary.closePeriod,closed:!!t||e.summary.closed}),correctAnswers:e.results.results?.filter((e=>e.isCorrect)).map((e=>Ve(e.option))),solution:e.results.solution,solutionEntities:e.results.solutionEntities?.map(jn)})}function _n(){return(0,Un.readBigIntFromBuffer)((0,Un.generateRandomBytes)(8),!0,!0)}function On(){return(0,Un.readBigIntFromBuffer)((0,Un.generateRandomBytes)(4),!0,!0).toJSNumber()}function qn(e,t,n){return new de.Api.Message({id:e,peerId:Rn(t),fromId:Rn(t),media:n.media})}function jn(e){const{type:t,offset:n,length:s}=e,i="userId"in e?Be.users[e.userId]:void 0;switch(t){case st.Vv.Bold:return new de.Api.MessageEntityBold({offset:n,length:s});case st.Vv.Italic:return new de.Api.MessageEntityItalic({offset:n,length:s});case st.Vv.Underline:return new de.Api.MessageEntityUnderline({offset:n,length:s});case st.Vv.Strike:return new de.Api.MessageEntityStrike({offset:n,length:s});case st.Vv.Code:return new de.Api.MessageEntityCode({offset:n,length:s});case st.Vv.Pre:return new de.Api.MessageEntityPre({offset:n,length:s,language:e.language||""});case st.Vv.Blockquote:return new de.Api.MessageEntityBlockquote({offset:n,length:s});case st.Vv.TextUrl:return new de.Api.MessageEntityTextUrl({offset:n,length:s,url:e.url});case st.Vv.Url:return new de.Api.MessageEntityUrl({offset:n,length:s});case st.Vv.Hashtag:return new de.Api.MessageEntityHashtag({offset:n,length:s});case st.Vv.MentionName:return new de.Api.InputMessageEntityMentionName({offset:n,length:s,userId:new de.Api.InputUser({userId:ge()(i.id),accessHash:i.accessHash})});case st.Vv.Spoiler:return new de.Api.MessageEntitySpoiler({offset:n,length:s});case st.Vv.CustomEmoji:return new de.Api.MessageEntityCustomEmoji({offset:n,length:s,documentId:ge()(e.documentId)});default:return new de.Api.MessageEntityUnknown({offset:n,length:s})}}function Vn(e){const{media:t}=e;return!!t&&(t instanceof de.Api.MessageMediaPhoto||t instanceof de.Api.MessageMediaDocument||t instanceof de.Api.MessageMediaWebPage&&t.webpage instanceof de.Api.WebPage&&(t.webpage.photo instanceof de.Api.Photo||t.webpage.document instanceof de.Api.Document&&t.webpage.document.mimeType.startsWith("video"))||t instanceof de.Api.MessageMediaGame&&(t.game.document instanceof de.Api.Document||t.game.photo instanceof de.Api.Photo)||t instanceof de.Api.MessageMediaInvoice&&(t.photo||t.extendedMedia))}function Ln(e){const t=Be.photos[e?.id];if(t)return new de.Api.InputPhoto(Je(t,["id","accessHash","fileReference"]))}function zn({phone:e,firstName:t,lastName:n}){return new de.Api.InputPhoneContact({clientId:ge()(1),phone:e,firstName:t,lastName:n})}function Wn(e,t=0){return new de.Api.ChatBannedRights({...e,untilDate:t})}function Jn(e){return new de.Api.ChatAdminRights(e)}function $n(e){const{shippingAddress:t}=e;return new de.Api.PaymentRequestedInfo({...e,shippingAddress:t?new de.Api.PostAddress(t):void 0})}function Kn(e){switch(e){case"phoneNumber":return new de.Api.InputPrivacyKeyPhoneNumber;case"addByPhone":return new de.Api.InputPrivacyKeyAddedByPhone;case"lastSeen":return new de.Api.InputPrivacyKeyStatusTimestamp;case"profilePhoto":return new de.Api.InputPrivacyKeyProfilePhoto;case"forwards":return new de.Api.InputPrivacyKeyForwards;case"chatInvite":return new de.Api.InputPrivacyKeyChatInvite;case"phoneCall":return new de.Api.InputPrivacyKeyPhoneCall;case"phoneP2P":return new de.Api.InputPrivacyKeyPhoneP2P;case"voiceMessages":return new de.Api.InputPrivacyKeyVoiceMessages;case"bio":return new de.Api.InputPrivacyKeyAbout}}function Yn(e){switch(e){case"spam":return new de.Api.InputReportReasonSpam;case"violence":return new de.Api.InputReportReasonViolence;case"childAbuse":return new de.Api.InputReportReasonChildAbuse;case"pornography":return new de.Api.InputReportReasonPornography;case"copyright":return new de.Api.InputReportReasonCopyright;case"fake":return new de.Api.InputReportReasonFake;case"geoIrrelevant":return new de.Api.InputReportReasonGeoIrrelevant;case"illegalDrugs":return new de.Api.InputReportReasonIllegalDrugs;case"personalDetails":return new de.Api.InputReportReasonPersonalDetails;case"other":return new de.Api.InputReportReasonOther}}function Zn(e){return new de.Api.DataJSON({data:JSON.stringify(e)})}function Qn(e,t){return"user"===t?ge()(e):"channel"===t&&e.length===W?ge()(e.slice(4)):ge()(e.slice(1))}function Xn(e){return new de.Api.InputGroupCall({id:ge()(e.id),accessHash:ge()(e.accessHash)})}function es({id:e,accessHash:t}){return new de.Api.InputPhoneCall({id:ge()(e),accessHash:ge()(t)})}function ts(e){return"slug"in e?new de.Api.InputInvoiceSlug({slug:e.slug}):new de.Api.InputInvoiceMessage({peer:kn(e.chat.id,e.chat.accessHash),msgId:e.messageId})}function ns(e){return e&&"emoticon"in e?new de.Api.ReactionEmoji({emoticon:e.emoticon}):e&&"documentId"in e?new de.Api.ReactionCustomEmoji({documentId:ge()(e.documentId)}):new de.Api.ReactionEmpty}function ss(e,t){return e.id===F?new de.Api.EmojiStatusEmpty:t?new de.Api.EmojiStatusUntil({documentId:ge()(e.id),until:t}):new de.Api.EmojiStatus({documentId:ge()(e.id)})}function is(e){return new de.Api.TextWithEntities({text:e.text,entities:e.entities?.map(jn)||[]})}function as(e){return new de.Api.InputBotAppID({id:ge()(e.id),accessHash:ge()(e.accessHash)})}function os(e){if("story"===e.type)return new de.Api.InputReplyToStory({userId:En(e.userId),storyId:e.storyId});if("message"===e.type){const{replyToMsgId:t,replyToTopId:n,replyToPeerId:s,quoteText:i}=e;return new de.Api.InputReplyToMessage({replyToMsgId:t,topMsgId:n,replyToPeerId:s?En(s):void 0,quoteText:i?.text,quoteEntities:i?.entities?.map(jn)})}}function rs(e){const t=[];if(e.allowedUsers?.length&&t.push(new de.Api.InputPrivacyValueAllowUsers({users:e.allowedUsers.map((({id:e,accessHash:t})=>xn(e,t)))})),e.allowedChats?.length&&t.push(new de.Api.InputPrivacyValueAllowChatParticipants({chats:e.allowedChats.map((({id:e,type:t})=>Qn(e,"chatTypeBasicGroup"===t?"chat":"channel")))})),e.blockedUsers?.length&&t.push(new de.Api.InputPrivacyValueDisallowUsers({users:e.blockedUsers.map((({id:e,accessHash:t})=>xn(e,t)))})),e.blockedChats?.length&&t.push(new de.Api.InputPrivacyValueDisallowChatParticipants({chats:e.blockedChats.map((({id:e,type:t})=>Qn(e,"chatTypeBasicGroup"===t?"chat":"channel")))})),!e.isUnspecified)switch(e.visibility){case"everybody":t.push(new de.Api.InputPrivacyValueAllowAll);break;case"contacts":t.push(new de.Api.InputPrivacyValueAllowContacts);break;case"nonContacts":t.push(new de.Api.InputPrivacyValueDisallowContacts);break;case"nobody":t.push(new de.Api.InputPrivacyValueDisallowAll)}return t}const ds=1e6,cs="temp",us=63,fs=10;let ps,ls=0;function hs(e=0){return e+ ++ls/ds}function ms(e){const{fromId:t,message:n,entities:s,startParam:i,channelPost:a,chatInvite:o,chatInviteHash:r,randomId:d,recommended:c,sponsorInfo:u,additionalInfo:f,showPeerPhoto:p,webpage:l,buttonText:h,app:m}=e,g=t?pe(t):void 0,A=o?o instanceof de.Api.ChatInvite?o.title:o.chat instanceof de.Api.ChatEmpty?void 0:o.chat.title:void 0;return{randomId:je(d),isBot:!!t&&ce(t),text:vt(n,s),expiresAt:Math.round(Date.now()/1e3)+k,isRecommended:Boolean(c),...l&&{webPage:Cs(l)},...p&&{isAvatarShown:!0},...g&&{chatId:g},...r&&{chatInviteHash:r},...o&&{chatInviteTitle:A},...i&&{startParam:i},...a&&{channelPostId:a},...u&&{sponsorInfo:u},...f&&{additionalInfo:f},...h&&{buttonText:h},...m&&{botApp:_t(m)}}}function gs(e){const t=xe(e);if(t&&(e instanceof de.Api.Message||e instanceof de.Api.MessageService))return As(t,e)}function As(e,t){const n=t.fromId?pe(t.fromId):void 0,s=t.peerId?pe(t.peerId):void 0,i=!n&&e===ps,a=t.out&&!t.post||i&&!t.fwdFrom,o=bt(t),r=t.action&&function(e,t,n,s,i){if(e instanceof de.Api.MessageActionEmpty)return;let a,o,r,d,c,u;const f=[];let p,l,h,m,g,A,y,w,I,S="other";const b="users"in e?e.users&&e.users.map((e=>fe(e,"user"))):"userId"in e&&[fe(e.userId,"user")]||[];let v;if(e instanceof de.Api.MessageActionChatCreate)u="Notification.CreatedChatWithTitle",f.push("%action_origin%",e.title),S="chatCreate";else if(e instanceof de.Api.MessageActionChatEditTitle)s?(u="Channel.MessageTitleUpdated",f.push(e.title)):(u="Notification.ChangedGroupName",f.push("%action_origin%",e.title));else if(e instanceof de.Api.MessageActionChatEditPhoto)s?u="Channel.MessagePhotoUpdated":(u="Notification.ChangedGroupPhoto",f.push("%action_origin%"));else if(e instanceof de.Api.MessageActionChatDeletePhoto)u=s?"Channel.MessagePhotoRemoved":"Group.MessagePhotoRemoved";else if(e instanceof de.Api.MessageActionChatAddUser)!t||b.includes(t)?(u="Notification.JoinedChat",f.push("%target_user%")):(u="Notification.Invited",f.push("%action_origin%","%target_user%"));else if(e instanceof de.Api.MessageActionChatDeleteUser)!t||b.includes(t)?(u="Notification.LeftChat",f.push("%target_user%")):(u="Notification.Kicked",f.push("%action_origin%","%target_user%"));else if(e instanceof de.Api.MessageActionChatJoinedByLink)u="Notification.JoinedGroupByLink",f.push("%action_origin%");else if(e instanceof de.Api.MessageActionChannelCreate)u="Notification.CreatedChannel";else if(e instanceof de.Api.MessageActionChatMigrateTo)v=pe(e),u="Migrated to %target_chat%",f.push("%target_chat%");else if(e instanceof de.Api.MessageActionChannelMigrateFrom)v=pe(e),u="Migrated from %target_chat%",f.push("%target_chat%");else if(e instanceof de.Api.MessageActionPinMessage)u="Chat.Service.Group.UpdatedPinnedMessage1",f.push("%action_origin%","%message%");else if(e instanceof de.Api.MessageActionHistoryClear)u="HistoryCleared",S="historyClear";else if(e instanceof de.Api.MessageActionPhoneCall){const t=Boolean(e.duration);if(u=[t?"ChatList.Service":"Chat",e.video?"VideoCall":"Call",i?t?"outgoing":"Outgoing":t?"incoming":"Incoming"].join("."),t){const t=Math.max(Math.round(e.duration/60),1);f.push(`${t} min${t>1?"s":""}`)}a={isOutgoing:i,isVideo:e.video,duration:e.duration,reason:zt(e.reason)}}else if(e instanceof de.Api.MessageActionInviteToGroupCall)u="Notification.VoiceChatInvitation",o={id:e.call.id.toString(),accessHash:e.call.accessHash.toString()},f.push("%action_origin%","%target_user%");else if(e instanceof de.Api.MessageActionContactSignUp)u="Notification.Joined",f.push("%action_origin%"),S="contactSignUp";else if(e instanceof de.Api.MessageActionPaymentSent)r=Number(e.totalAmount),d=e.currency,u="PaymentSuccessfullyPaid",n&&b.push(n),f.push("%payment_amount%","%target_user%","%product%");else if(e instanceof de.Api.MessageActionGroupCall)if(e.duration){const t=Math.max(Math.round(e.duration/60),1);u="Notification.VoiceChatEnded",f.push(`${t} min${t>1?"s":""}`)}else u="Notification.VoiceChatStartedChannel",o={id:e.call.id.toString(),accessHash:e.call.accessHash.toString()};else if(e instanceof de.Api.MessageActionBotAllowed)e.domain?(u="ActionBotAllowed",f.push(e.domain)):u=e.fromRequest?"lng_action_webapp_bot_allowed":"ActionAttachMenuBotAllowed";else if(e instanceof de.Api.MessageActionCustomAction)u=e.message;else if(e instanceof de.Api.MessageActionChatJoinedByRequest)u="ChatService.UserJoinedGroupByRequest",f.push("%action_origin%");else if(e instanceof de.Api.MessageActionGameScore)u=t===ps?"ActionYouScoredInGame":"ActionUserScoredInGame",f.push("%score%"),l=e.score;else if(e instanceof de.Api.MessageActionWebViewDataSent)u="Notification.WebAppSentData",f.push(e.text);else if(e instanceof de.Api.MessageActionGiftPremium){if(u=i?"ActionGiftOutbound":"ActionGiftInbound",i?f.push("%gift_payment_amount%"):f.push("%action_origin%","%gift_payment_amount%"),n&&b.push(n),d=e.currency,e.cryptoCurrency){const t=e.cryptoAmount.divide(1e7).toJSNumber()/100;c={currency:e.cryptoCurrency,amount:t.toFixed(2)}}r=e.amount.toJSNumber(),h=e.months}else if(e instanceof de.Api.MessageActionTopicCreate)u="TopicWasCreatedAction",S="topicCreate",f.push(e.title);else if(e instanceof de.Api.MessageActionTopicEdit)void 0!==e.closed?(u=e.closed?"TopicWasClosedAction":"TopicWasReopenedAction",f.push("%action_origin%","%action_topic%")):void 0!==e.hidden?u=e.hidden?"TopicHidden2":"TopicShown":e.title?(u="TopicRenamedTo",f.push("%action_origin%",e.title)):e.iconEmojiId?(u="TopicWasIconChangedToAction",f.push("%action_origin%","%action_topic_icon%"),m=e.iconEmojiId.toString()):u="ChatList.UnsupportedMessage",g=!0;else if(e instanceof de.Api.MessageActionSuggestProfilePhoto){const s=e.photo instanceof de.Api.Photo&&e.photo.videoSizes?.length;u=t===ps?s?"ActionSuggestVideoFromYouDescription":"ActionSuggestPhotoFromYouDescription":s?"ActionSuggestVideoToYouDescription":"ActionSuggestPhotoToYouDescription",S="suggestProfilePhoto",f.push("%target_user%"),n&&b.push(n)}else e instanceof de.Api.MessageActionGiveawayLaunch?(u="BoostingGiveawayJustStarted",f.push("%action_origin%")):e instanceof de.Api.MessageActionGiftCode?(u="BoostingReceivedGiftNoName",A=e.slug,h=e.months,y=Boolean(e.viaGiveaway),w=Boolean(e.unclaimed),e.boostPeer&&(v=pe(e.boostPeer))):e instanceof de.Api.MessageActionGiveawayResults?e.winnersCount?e.unclaimedCount?u="lng_action_giveaway_results_some":(u="BoostingGiveawayServiceWinnersSelected",f.push("%amount%"),r=e.winnersCount,I=e.winnersCount):u="lng_action_giveaway_results_none":u="ChatList.UnsupportedMessage";return"photo"in e&&e.photo instanceof de.Api.Photo&&(_e(e.photo),p=ct(e.photo)),{text:u,type:S,targetUserIds:b,targetChatId:v,photo:p,amount:r,currency:d,giftCryptoInfo:c,isGiveaway:y,slug:A,translationValues:f,call:o,phoneCall:a,score:l,months:h,topicEmojiIconId:m,isTopicAction:g,isUnclaimed:w,pluralValue:I}}(t.action,n,s,Boolean(t.post),a);r&&(o.action=r);const d=t.date>tt()+fs,c=t.media instanceof de.Api.MessageMediaInvoice&&Boolean(t.media.extendedMedia),u=Boolean(t.editDate)&&!t.editHide,{inlineButtons:f,keyboardButtons:p,keyboardPlaceholder:l,isKeyboardSingleUse:h,isKeyboardSelective:m}=function(e,t){const{replyMarkup:n,media:s}=e;if(!(n instanceof de.Api.ReplyKeyboardMarkup||n instanceof de.Api.ReplyInlineMarkup))return;const i=n.rows.map((({buttons:e})=>e.map((e=>{const{text:n}=e;if(e instanceof de.Api.KeyboardButton)return{type:"command",text:n};if(e instanceof de.Api.KeyboardButtonUrl)return e.url.includes("?startgroup=")?{type:"unsupported",text:n}:{type:"url",text:n,url:e.url};if(e instanceof de.Api.KeyboardButtonCallback)return e.requiresPassword?{type:"unsupported",text:n}:{type:"callback",text:n,data:je(e.data)};if(e instanceof de.Api.KeyboardButtonRequestPoll)return{type:"requestPoll",text:n,isQuiz:e.quiz};if(e instanceof de.Api.KeyboardButtonRequestPhone)return{type:"requestPhone",text:n};if(e instanceof de.Api.KeyboardButtonBuy){if(s instanceof de.Api.MessageMediaInvoice&&s.receiptMsgId)return{type:"receipt",text:"PaymentReceipt",receiptMessageId:s.receiptMsgId};if(t)return;return{type:"buy",text:n}}return e instanceof de.Api.KeyboardButtonGame?{type:"game",text:n}:e instanceof de.Api.KeyboardButtonSwitchInline?{type:"switchBotInline",text:n,query:e.query,isSamePeer:e.samePeer}:e instanceof de.Api.KeyboardButtonUserProfile?{type:"userProfile",text:n,userId:e.userId.toString()}:e instanceof de.Api.KeyboardButtonSimpleWebView?{type:"simpleWebView",text:n,url:e.url}:e instanceof de.Api.KeyboardButtonWebView?{type:"webView",text:n,url:e.url}:e instanceof de.Api.KeyboardButtonUrlAuth?{type:"urlAuth",text:n,url:e.url,buttonId:e.buttonId}:{type:"unsupported",text:n}})).filter(Boolean)));return i.every((e=>!e.length))?void 0:{[n instanceof de.Api.ReplyKeyboardMarkup?"keyboardButtons":"inlineButtons"]:i,...n instanceof de.Api.ReplyKeyboardMarkup&&{keyboardPlaceholder:n.placeholder,isKeyboardSingleUse:n.singleUse,isKeyboardSelective:n.selective}}}(t,c)||{},g=t.fwdFrom&&ws(t.fwdFrom,i),{mediaUnread:A,postAuthor:y}=t,w=t.groupedId&&String(t.groupedId),I=Boolean(w)&&!(o.document||o.audio||o.sticker),S=t.replyMarkup instanceof de.Api.ReplyKeyboardHide,b=t.replyMarkup instanceof de.Api.ReplyKeyboardHide&&t.replyMarkup.selective,v=t.noforwards||c,C=!t.noforwards,P=(0,Pn.k)(o,w),M=t.replies?.comments,U=t.savedPeerId&&pe(t.savedPeerId);return Ye({id:t.id,chatId:e,isOutgoing:a,content:o,date:t.date,senderId:n||t.out&&t.post&&ps||e,viewsCount:t.views,forwardsCount:t.forwards,isScheduled:d,isFromScheduled:t.fromScheduled,isSilent:t.silent,isPinned:t.pinned,reactions:t.reactions&&Kt(t.reactions),emojiOnlyCount:P,...t.replyTo&&{replyInfo:Is(t.replyTo)},forwardInfo:g,isEdited:u,editDate:t.editDate,isMediaUnread:A,hasUnreadMention:t.mentioned&&A,isMentioned:t.mentioned,...w&&{groupedId:w,isInAlbum:I},inlineButtons:f,...p&&{keyboardButtons:p,keyboardPlaceholder:l,isKeyboardSingleUse:h,isKeyboardSelective:m},...S&&{shouldHideKeyboardButtons:S,isHideKeyboardSelective:b},...t.viaBotId&&{viaBotId:fe(t.viaBotId,"user")},postAuthorTitle:y,isProtected:v,isForwardingAllowed:C,hasComments:M,savedPeerId:U})}function ys(e){if(e instanceof de.Api.DraftMessageEmpty)return;const{message:t,entities:n,replyTo:s,date:i}=e,a=s instanceof de.Api.InputReplyToMessage?{type:"message",replyToMsgId:s.replyToMsgId,replyToTopId:s.topMsgId,replyToPeerId:s.replyToPeerId&&pe(s.replyToPeerId),quoteText:s.quoteText?vt(s.quoteText,s.quoteEntities):void 0}:void 0;return{text:t?vt(t,n):void 0,replyInfo:a,date:i}}function ws(e,t=!1){const n=e.savedFromPeer&&pe(e.savedFromPeer),s=e.fromId&&pe(e.fromId);return{date:e.date,savedDate:e.savedDate,isImported:e.imported,isChannelPost:Boolean(e.channelPost),channelPostId:e.channelPost,isLinkedChannelPost:Boolean(e.channelPost&&n&&!t),savedFromPeerId:n,fromId:s,fromChatId:s||n,fromMessageId:e.savedFromMsgId||e.channelPost,hiddenUserName:e.fromName,postAuthorTitle:e.postAuthor}}function Is(e){if(e instanceof de.Api.MessageReplyStoryHeader)return{type:"story",userId:e.userId.toString(),storyId:e.storyId};if(e instanceof de.Api.MessageReplyHeader){const{replyFrom:t,replyToMsgId:n,replyToTopId:s,replyMedia:i,replyToPeerId:a,forumTopic:o,quote:r,quoteText:d,quoteEntities:c}=e;return{type:"message",replyToMsgId:n,replyToTopId:s,isForumTopic:o,replyFrom:t&&ws(t),replyToPeerId:a&&pe(a),replyMedia:i&&Ct(i),isQuote:r,quoteText:d?vt(d,c):void 0}}}function Ss(e,t){return{poll:{id:String(t),summary:Je(e.summary,["question","answers"]),results:{}}}}function bs(e){const t=xe(e);if(t&&e instanceof de.Api.Message&&e.replies)return vs(e.replies,e.id,t)}function vs(e,t,n){const{channelId:s,replies:i,maxId:a,readMaxId:o,recentRepliers:r,comments:d}=e,c=s?fe(s,"channel"):void 0;if(c===Y)return;const u={messagesCount:i,...a&&{lastMessageId:a},...o&&{lastReadMessageId:o},...r&&{recentReplierIds:r.map(pe)}};return d?{...u,isCommentsInfo:!0,chatId:c,originChannelId:n,originMessageId:t}:{...u,isCommentsInfo:!1,chatId:n,threadId:t}}function Cs(e){let t;return e.photo instanceof de.Api.Photo&&(_e(e.photo),t=ct(e.photo)),{...Je(e,["url","siteName"]),photo:t}}function Ps(e){const{fullUser:{about:t,commonChatsCount:n,pinnedMsgId:s,botInfo:i,blocked:a,profilePhoto:o,voiceMessagesForbidden:r,premiumGifts:d,fallbackPhoto:c,personalPhoto:u,translationsDisabled:f,storiesPinnedAvailable:p},users:l}=e,h=fe(l[0].id,"user");return{bio:t,commonChatsCount:n,pinnedMessageId:s,isBlocked:Boolean(a),noVoiceMessages:r,hasPinnedStories:Boolean(p),isTranslationDisabled:f,profilePhoto:o instanceof de.Api.Photo?ct(o):void 0,fallbackPhoto:c instanceof de.Api.Photo?ct(c):void 0,personalPhoto:u instanceof de.Api.Photo?ct(u):void 0,...d&&{premiumGifts:d.map((e=>function(e){const{months:t,currency:n,amount:s,botUrl:i}=e;return{months:t,currency:n,amount:s.toJSNumber(),botUrl:i}}(e)))},...i&&{botInfo:Gt(i,h)}}}function Ms(e){if(!(e instanceof de.Api.User))return;const{id:t,firstName:n,lastName:s,fake:i,scam:a,support:o,closeFriend:r,storiesUnavailable:d,storiesMaxId:c}=e,u=e.photo instanceof de.Api.UserProfilePhoto?Boolean(e.photo.hasVideo):void 0,f=e.photo instanceof de.Api.UserProfilePhoto?String(e.photo.photoId):void 0,p=(m=e).bot?"userTypeBot":m.deleted?"userTypeDeleted":"userTypeRegular",l=pt(e),h=e.emojiStatus?he(e.emojiStatus):void 0;var m;return{id:fe(t,"user"),isMin:Boolean(e.min),fakeType:a?"scam":i?"fake":void 0,...e.self&&{isSelf:!0},isPremium:Boolean(e.premium),...e.verified&&{isVerified:!0},...r&&{isCloseFriend:!0},...o&&{isSupport:!0},...(e.contact||e.mutualContact)&&{isContact:!0},type:p,firstName:n,lastName:s,canEditBot:Boolean(e.botCanEdit),..."userTypeBot"===p&&{canBeInvitedToGroup:!e.botNochats},...l&&{usernames:l},phoneNumber:e.phone||"",noStatus:!e.status,...e.accessHash&&{accessHash:String(e.accessHash)},...f&&{avatarHash:f},emojiStatus:h,hasVideoAvatar:u,areStoriesHidden:Boolean(e.storiesHidden),maxStoryId:c,hasStories:Boolean(c)&&!d,...e.bot&&e.botInlinePlaceholder&&{botPlaceholder:e.botInlinePlaceholder},...e.bot&&e.botAttachMenu&&{isAttachBot:e.botAttachMenu},color:e.color&&le(e.color)}}function Us(e){return!e||e instanceof de.Api.UserStatusEmpty?{type:"userStatusEmpty"}:e instanceof de.Api.UserStatusOnline?{type:"userStatusOnline",expires:e.expires}:e instanceof de.Api.UserStatusOffline?{type:"userStatusOffline",wasOnline:e.wasOnline}:e instanceof de.Api.UserStatusRecently?{type:"userStatusRecently"}:e instanceof de.Api.UserStatusLastWeek?{type:"userStatusLastWeek"}:{type:"userStatusLastMonth"}}function Bs(e){const t={},n={};return e.forEach((e=>{const s=Ms(e);if(!s)return;const i=n[s.id];i&&!i.isMin||(n[s.id]=s),"status"in e&&(t[s.id]=Us(e.status))})),{users:Object.values(n),userStatusesById:t}}function Ts(e){if(e instanceof de.Api.WallPaperNoFile)return;const{slug:t}=e,n=Mt(e.document);return n?{slug:t,document:n}:void 0}function Ds(e){return{isCurrent:Boolean(e.current),isOfficialApp:Boolean(e.officialApp),isPasswordPending:Boolean(e.passwordPending),hash:String(e.hash),areCallsEnabled:!e.callRequestsDisabled,areSecretChatsEnabled:!e.encryptedRequestsDisabled,isUnconfirmed:e.unconfirmed,...Je(e,["deviceModel","platform","systemVersion","appName","appVersion","dateCreated","dateActive","ip","country","region"])}}function Rs(e){return{hash:String(e.hash),botId:fe(e.botId,"user"),...Je(e,["platform","browser","dateCreated","dateActive","ip","region","domain"])}}function ks(e,t){const{silent:n,muteUntil:s,showPreviews:i,otherSound:a}=e,o=Boolean(a&&!(a instanceof de.Api.NotificationSoundNone));return{chatId:pe(t),isMuted:n||"number"==typeof s&&tt()<s,...!o&&{isSilent:!0},...void 0!==i&&{shouldShowPreviews:Boolean(i)},muteUntil:s}}function Es(e,t){const{hidden:n,iso2:s,defaultName:i,name:a}=e,{countryCode:o,prefixes:r,patterns:d}=t||{};return{isHidden:n,iso2:s,defaultName:i,name:a,countryCode:o,prefixes:r,patterns:d}}function xs(e){if(!(e instanceof de.Api.JsonNull))return e instanceof de.Api.JsonString||e instanceof de.Api.JsonBool||e instanceof de.Api.JsonNumber?e.value:e instanceof de.Api.JsonArray?e.value.map(xs):e.value.reduce(((e,t)=>(e[t.key]=xs(t.value),e)),{})}function Ns(e){if(e instanceof de.Api.UrlAuthResultRequest){const{bot:t,domain:n,requestWriteAccess:s}=e,i=Ms(t);if(!i)return;return Oe(t),{type:"request",domain:n,shouldRequestWriteAccess:s,bot:i}}return e instanceof de.Api.UrlAuthResultAccepted?{type:"accepted",url:e.url}:e instanceof de.Api.UrlAuthResultDefault?{type:"default"}:void 0}function Hs(e){return e.strings.reduce(((e,t)=>(e[t.key]=Gs(t),e)),{})}function Gs(e){return e instanceof de.Api.LangPackString?e.value:e instanceof de.Api.LangPackStringPluralized?Ke(we(e),["key"]):void 0}function Fs(e){if(e instanceof de.Api.help.PeerColorSet)return e.colors.map((e=>`#${e.toString(16).padStart(6,"0")}`))}function _s(e,t){if(t instanceof de.Api.StoryItemDeleted)return{id:t.id,peerId:e,isDeleted:!0};if(t instanceof de.Api.StoryItemSkipped){const{id:n,date:s,expireDate:i,closeFriends:a}=t;return{id:n,peerId:e,...a&&{isForCloseFriends:!0},date:s,expireDate:i}}const{edited:n,pinned:s,expireDate:i,id:a,date:o,caption:r,entities:d,media:c,privacy:u,views:f,public:p,noforwards:l,closeFriends:h,contacts:m,selectedContacts:g,mediaAreas:A,sentReaction:y,out:w,fwdFrom:I}=t,S={...Ct(c)};return r&&(S.text=vt(r,d)),{id:a,peerId:e,date:o,expireDate:i,content:S,...p&&{isPublic:p},...n&&{isEdited:!0},...s&&{isPinned:!0},...m&&{isForContacts:!0},...g&&{isForSelectedContacts:!0},...h&&{isForCloseFriends:!0},...l&&{noForwards:!0},...f&&{views:Os(f)},...w&&{isOut:!0},...u&&{visibility:lt(u)},...A&&{mediaAreas:A.map(Ls).filter(Boolean)},...y&&{sentReaction:Xt(y)},...I&&{forwardInfo:zs(I)}}}function Os(e){return{viewsCount:e.viewsCount,forwardsCount:e.forwardsCount,reactionsCount:e.reactionsCount,...e?.reactions&&{reactions:e.reactions.map(Zt).filter(Boolean)},...e?.recentViewers&&{recentViewerIds:e.recentViewers.map((e=>fe(e,"user")))}}}function qs(e){const{blockedMyStoriesFrom:t,blocked:n}=e;if(e instanceof de.Api.StoryView)return Ye({type:"user",peerId:fe(e.userId,"user"),date:e.date,reaction:e.reaction&&Xt(e.reaction),areStoriesBlocked:n||t,isUserBlocked:n});if(e instanceof de.Api.StoryViewPublicForward){const s=gs(e.message);if(!s)return;return{type:"forward",peerId:s.chatId,messageId:s.id,message:s,date:s.date,areStoriesBlocked:n||t,isUserBlocked:n}}if(e instanceof de.Api.StoryViewPublicRepost){const s=pe(e.peerId),i=_s(s,e.story);if(!("content"in i))return;return{type:"repost",peerId:s,storyId:e.story.id,date:i.date,story:i,areStoriesBlocked:n||t,isUserBlocked:n}}}function js(e){return{activeUntil:e.activeUntilDate,cooldownUntil:e.cooldownUntilDate}}function Vs(e){const{x:t,y:n,w:s,h:i,rotation:a}=e;return{x:t,y:n,width:s,height:i,rotation:a}}function Ls(e){if(e instanceof de.Api.MediaAreaVenue){const{geo:t,title:n,coordinates:s}=e,i=Ut(t);if(!i)return;return{type:"venue",coordinates:Vs(s),geo:i,title:n}}if(e instanceof de.Api.MediaAreaGeoPoint){const{geo:t,coordinates:n}=e,s=Ut(t);if(!s)return;return{type:"geoPoint",coordinates:Vs(n),geo:s}}if(e instanceof de.Api.MediaAreaSuggestedReaction){const{coordinates:t,reaction:n,dark:s,flipped:i}=e,a=Xt(n);if(!a)return;return{type:"suggestedReaction",coordinates:Vs(t),reaction:a,...s&&{isDark:!0},...i&&{isFlipped:!0}}}if(e instanceof de.Api.MediaAreaChannelPost){const{coordinates:t,channelId:n,msgId:s}=e;return{type:"channelPost",coordinates:Vs(t),channelId:fe(n,"channel"),messageId:s}}}function zs(e){const{from:t,fromName:n,storyId:s,modified:i}=e;return{storyId:s,fromPeerId:t&&pe(t),fromName:n,isModified:i}}const Ws=new Map,Js=[],$s=(e,t)=>{const n=e.topicId?`${e.chatId}-${e.topicId}`:e.chatId;if(Ws.has(n)&&(clearTimeout(Ws.get(n)),Ws.delete(n)),e.muteUntil===E||e.muteUntil<=tt())return;if(Js.push(e),Js.sort(((e,t)=>t.muteUntil-e.muteUntil)),!Js.pop())return;const s=setTimeout((()=>{if(t(),Js.length){const e=Js.pop();e&&$s(e,t)}}),1e3*(e.muteUntil-tt()));Ws.set(n,s)};function Ks(e,t=0,n){$s({chatId:e,muteUntil:t},(()=>n({"@type":"updateNotifyExceptions",chatId:e,isMuted:!1})))}class Ys{constructor(e,t){this.pts=e,this.ptsCount=t}}class Zs{constructor(e,t,n){this.channelId=e,this.pts=t,this.ptsCount=n}}const Qs=1e3;let Xs;const ei=new Set;function ti(e){e.filter((e=>e instanceof de.Api.User)).map(Ms).forEach((e=>{e&&Xs({"@type":"updateUser",id:e.id,user:e})})),e.filter((e=>e instanceof de.Api.Chat||e instanceof de.Api.ChatForbidden||e instanceof de.Api.Channel||e instanceof de.Api.ChannelForbidden)).map((e=>rn(e))).forEach((e=>{e&&Xs({"@type":"updateChat",id:e.id,chat:e})}))}function ni(e){const t=Ze(e).map(bs).filter(Boolean);t.length&&Xs({"@type":"updateThreadInfos",threadInfoUpdates:t})}function si(e){Xs(e)}function ii(e){if(e instanceof de.connection.UpdateServerTimeOffset)i=e.timeOffset,Xe=i,Xs({"@type":"updateServerTimeOffset",serverTimeOffset:e.timeOffset});else if(e instanceof de.connection.UpdateConnectionState){let t;switch(e.state){case de.connection.UpdateConnectionState.disconnected:t="connectionStateConnecting";break;case de.connection.UpdateConnectionState.broken:t="connectionStateBroken";break;case de.connection.UpdateConnectionState.connected:default:t="connectionStateReady"}Xs({"@type":"updateConnectionState",connectionState:t})}else if(e instanceof de.Api.UpdateNewMessage||e instanceof de.Api.UpdateNewScheduledMessage||e instanceof de.Api.UpdateNewChannelMessage||e instanceof de.Api.UpdateShortChatMessage||e instanceof de.Api.UpdateShortMessage){let t,n;const i=e._entities;if(i&&(qe(i),ti(i)),e instanceof de.Api.UpdateShortChatMessage)t=As(fe((s=e).chatId,"chat"),{...s,fromId:Rn(fe(s.fromId,"user"))});else if(e instanceof de.Api.UpdateShortMessage)t=function(e){return As(fe(e.userId,"user"),{...e,fromId:Rn(e.out?ps:fe(e.userId,"user"))})}(e);else{if(e.message instanceof de.Api.MessageEmpty)return void(d&&console.error("Unexpected update:",e.className,e));(e.message instanceof de.Api.Message&&Vn(e.message)||e.message instanceof de.Api.MessageService&&e.message.action instanceof de.Api.MessageActionSuggestProfilePhoto)&&He(e.message),t=gs(e.message),ni([e.message]),n="replyMarkup"in e.message&&e.message?.replyMarkup instanceof de.Api.ReplyKeyboardForceReply&&(!e.message.replyMarkup.selective||t.isMentioned)}if(e instanceof de.Api.UpdateNewScheduledMessage)Xs({"@type":ei.has(t.id)?"updateScheduledMessage":"newScheduledMessage",id:t.id,chatId:t.chatId,message:t});else{const e=ei.has(t.id)&&!t.viaBotId&&!t.content.action;Xs({"@type":e?"updateMessage":"newMessage",id:t.id,chatId:t.chatId,message:t,shouldForceReply:n})}if(e.message instanceof de.Api.MessageService){const{action:n}=e.message;if(n instanceof de.Api.MessageActionPaymentSent)Xs({"@type":"updatePaymentStateCompleted",slug:n.invoiceSlug});else if(n instanceof de.Api.MessageActionChatEditTitle)Xs({"@type":"updateChat",id:t.chatId,chat:{title:n.title}});else if(n instanceof de.Api.MessageActionChatEditPhoto){const s=function(e){if(e instanceof de.Api.PhotoEmpty)return new de.Api.ChatPhotoEmpty;const{dcId:t,id:n}=e;return new de.Api.ChatPhoto({dcId:t,photoId:n})}(n.photo),i=pn(s),a=xe(e.message);Be.chats[a]&&(Be.chats[a].photo=s),_e(n.photo),i&&Xs({"@type":"updateChat",id:t.chatId,chat:{avatarHash:i},...n.photo instanceof de.Api.Photo&&{newProfilePhoto:ct(n.photo)}})}else if(n instanceof de.Api.MessageActionChatDeletePhoto){const n=xe(e.message);Be.chats[n]&&(Be.chats[n].photo=new de.Api.ChatPhotoEmpty),Xs({"@type":"updateChat",id:t.chatId,chat:{avatarHash:void 0}})}else if(n instanceof de.Api.MessageActionChatDeleteUser)e._entities&&e._entities.some((e=>e instanceof de.Api.User&&Boolean(e.self)&&e.id===n.userId))&&Xs({"@type":"updateChat",id:t.chatId,chat:{isForbidden:!0,isNotJoined:!0}});else if(n instanceof de.Api.MessageActionChatAddUser)e._entities&&e._entities.some((e=>e instanceof de.Api.User&&Boolean(e.self)&&n.users.includes(e.id)))&&Xs({"@type":"updateChatJoin",id:t.chatId});else if(n instanceof de.Api.MessageActionGroupCall)!n.duration&&n.call&&Xs({"@type":"updateGroupCallChatId",chatId:t.chatId,call:{id:n.call.id.toString(),accessHash:n.call.accessHash.toString()}});else if(n instanceof de.Api.MessageActionTopicEdit){const t=e.message.replyTo instanceof de.Api.MessageReplyHeader?e.message.replyTo:void 0,{replyToMsgId:n,replyToTopId:s,forumTopic:i}=t||{},a=i&&(s||n)||Q;Xs({"@type":"updateTopic",chatId:pe(e.message.peerId),topicId:a})}else n instanceof de.Api.MessageActionTopicCreate&&Xs({"@type":"updateTopics",chatId:pe(e.message.peerId)})}}else if(e instanceof de.Api.UpdateEditMessage||e instanceof de.Api.UpdateEditChannelMessage){if(e.message instanceof de.Api.MessageEmpty)return void(d&&console.error("Unexpected update:",e.className,e));e.message instanceof de.Api.Message&&Vn(e.message)&&He(e.message);const t=Ke(gs(e.message),["isOutgoing"]);ni([e.message]),Xs({"@type":"updateMessage",id:t.id,chatId:t.chatId,message:t})}else if(e instanceof de.Api.UpdateMessageReactions)Xs({"@type":"updateMessageReactions",id:e.msgId,chatId:pe(e.peer),reactions:Kt(e.reactions)});else if(e instanceof de.Api.UpdateMessageExtendedMedia){let t,n;if(e.extendedMedia instanceof de.Api.MessageExtendedMedia&&(t=Ct(e.extendedMedia.media)),e.extendedMedia instanceof de.Api.MessageExtendedMediaPreview&&(n=kt(e.extendedMedia)),!t&&!n)return;const s=pe(e.peer);!function(e,t,n){const s=Be.messages[`${e}-${t}`];if(s instanceof de.Api.Message&&s.media){if(n instanceof de.Api.MessageExtendedMediaPreview){if(!(s.media instanceof de.Api.MessageMediaInvoice))return;s.media.extendedMedia=n}n instanceof de.Api.MessageExtendedMedia&&(s.media=n.media)}}(s,e.msgId,e.extendedMedia),Xs({"@type":"updateMessageExtendedMedia",id:e.msgId,chatId:s,media:t,preview:n})}else if(e instanceof de.Api.UpdateDeleteMessages)Xs({"@type":"deleteMessages",ids:e.messages});else if(e instanceof de.Api.UpdateDeleteScheduledMessages)Xs({"@type":"deleteScheduledMessages",ids:e.messages,chatId:pe(e.peer)});else if(e instanceof de.Api.UpdateDeleteChannelMessages){const t=fe(e.channelId,"channel"),n=e.messages,s=n.filter((e=>Be.messages[`${t}-${e}`])),i=n.filter((e=>!Be.messages[`${t}-${e}`])),a=n.map((e=>{const n=Be.messages[`${t}-${e}`];return n&&n instanceof de.Api.MessageService&&"photo"in n.action?String(n.action.photo.id):void 0})).filter(Boolean);s.length&&Xs({"@type":"deleteMessages",ids:s,chatId:t}),a.length&&Xs({"@type":"deleteProfilePhotos",ids:a,chatId:t}),i.length&&setTimeout((()=>{Xs({"@type":"deleteMessages",ids:i,chatId:t})}),Qs)}else if(e instanceof de.Api.UpdateServiceNotification)if(e.popup)Xs({"@type":"error",error:{message:e.message}});else{const t=function(e,t){const n=hs(t),s=bt(e);return{id:n,chatId:z,date:e.inboxDate||t,content:s,isOutgoing:!1}}(e,Date.now()/1e3+et());Vn(e)&&He(qn(t.id,t.chatId,e)),Xs({"@type":"updateServiceNotification",message:t})}else if(e instanceof de.Api.UpdateMessageID||e instanceof de.Api.UpdateShortSentMessage)ei.add(e.id);else if(e instanceof de.Api.UpdateReadMessagesContents)Xs({"@type":"updateCommonBoxMessages",ids:e.messages,messageUpdate:{hasUnreadMention:!1,isMediaUnread:!1}});else if(e instanceof de.Api.UpdateChannelReadMessagesContents)Xs({"@type":"updateChannelMessages",channelId:fe(e.channelId,"channel"),ids:e.messages,messageUpdate:{hasUnreadMention:!1,isMediaUnread:!1}});else if(e instanceof de.Api.UpdateMessagePoll){const{pollId:t,poll:n,results:s}=e;if(n){const e=Bt(n,s);Xs({"@type":"updateMessagePoll",pollId:String(t),pollUpdate:e})}else{const e=Tt(s);Xs({"@type":"updateMessagePoll",pollId:String(t),pollUpdate:{results:e}})}}else if(e instanceof de.Api.UpdateMessagePollVote)Xs({"@type":"updateMessagePollVote",pollId:String(e.pollId),peerId:pe(e.peer),options:e.options.map(je)});else if(e instanceof de.Api.UpdateChannelMessageViews)Xs({"@type":"updateMessage",chatId:fe(e.channelId,"channel"),id:e.id,message:{viewsCount:e.views}});else if(e instanceof de.Api.UpdateReadHistoryInbox)Xs({"@type":"updateChatInbox",id:pe(e.peer),chat:{lastReadInboxMessageId:e.maxId,unreadCount:e.stillUnreadCount}});else if(e instanceof de.Api.UpdateReadHistoryOutbox)Xs({"@type":"updateChat",id:pe(e.peer),chat:{lastReadOutboxMessageId:e.maxId}});else if(e instanceof de.Api.UpdateReadChannelInbox)Xs({"@type":"updateChat",id:fe(e.channelId,"channel"),chat:{lastReadInboxMessageId:e.maxId,unreadCount:e.stillUnreadCount}});else if(e instanceof de.Api.UpdateReadChannelOutbox)Xs({"@type":"updateChat",id:fe(e.channelId,"channel"),chat:{lastReadOutboxMessageId:e.maxId}});else if(e instanceof de.Api.UpdateReadChannelDiscussionInbox)Xs({"@type":"updateThreadInfos",threadInfoUpdates:[{chatId:fe(e.channelId,"channel"),threadId:e.topMsgId,lastReadInboxMessageId:e.readMaxId}]});else if(e instanceof de.Api.UpdateReadChannelDiscussionOutbox)Xs({"@type":"updateChat",id:fe(e.channelId,"channel"),chat:{lastReadOutboxMessageId:e.readMaxId}});else if(e instanceof de.Api.UpdateDialogPinned&&e.peer instanceof de.Api.DialogPeer)Xs({"@type":"updateChatPinned",id:pe(e.peer.peer),isPinned:e.pinned||!1});else if(e instanceof de.Api.UpdatePinnedDialogs){const t=e.order?e.order.filter((e=>e instanceof de.Api.DialogPeer)).map((e=>pe(e.peer))):[];Xs({"@type":"updatePinnedChatIds",ids:t,folderId:e.folderId||void 0})}else if(e instanceof de.Api.UpdateSavedDialogPinned&&e.peer instanceof de.Api.DialogPeer)Xs({"@type":"updateSavedDialogPinned",id:pe(e.peer.peer),isPinned:e.pinned||!1});else if(e instanceof de.Api.UpdatePinnedSavedDialogs){const t=e.order?e.order.filter((e=>e instanceof de.Api.DialogPeer)).map((e=>pe(e.peer))):[];Xs({"@type":"updatePinnedSavedDialogIds",ids:t})}else if(e instanceof de.Api.UpdateFolderPeers)e.folderPeers.forEach((e=>{const{folderId:t,peer:n}=e;Xs({"@type":"updateChatListType",id:pe(n),folderId:t})}));else if(e instanceof de.Api.UpdateDialogFilter){const{id:t,filter:n}=e,s=Ne(n)?gn(n):void 0;Xs({"@type":"updateChatFolder",id:t,folder:s})}else if(e instanceof de.Api.UpdateDialogFilterOrder)Xs({"@type":"updateChatFoldersOrder",orderedIds:e.order});else if(e instanceof de.Api.UpdateChatParticipants){const t=hn(e.participants);Xs({"@type":"updateChatMembers",id:fe(e.participants.chatId,"chat"),replacedMembers:t})}else if(e instanceof de.Api.UpdateChatParticipantAdd){const t=ln(Je(e,["userId","inviterId","date"]));Xs({"@type":"updateChatMembers",id:fe(e.chatId,"chat"),addedMember:t})}else if(e instanceof de.Api.UpdateChatParticipantDelete)Xs({"@type":"updateChatMembers",id:fe(e.chatId,"chat"),deletedMemberId:fe(e.userId,"user")});else if(e instanceof de.Api.UpdatePinnedMessages||e instanceof de.Api.UpdatePinnedChannelMessages){const t=e instanceof de.Api.UpdatePinnedMessages?pe(e.peer):fe(e.channelId,"channel");Xs({"@type":"updatePinnedIds",chatId:t,messageIds:e.messages,isPinned:e.pinned})}else if(e instanceof de.Api.UpdateNotifySettings&&e.peer instanceof de.Api.NotifyPeer){const t=ks(e.notifySettings,e.peer.peer);Ks(t.chatId,t.muteUntil,Xs),Xs({"@type":"updateNotifyExceptions",...t})}else if(e instanceof de.Api.UpdateNotifySettings&&e.peer instanceof de.Api.NotifyForumTopic){const t=function(e,t,n){const{silent:s,muteUntil:i,showPreviews:a,otherSound:o}=e,r=Boolean(o&&!(o instanceof de.Api.NotificationSoundNone));return{chatId:pe(t),topicId:n,isMuted:s||"number"==typeof i&&tt()<i,...!r&&{isSilent:!0},...void 0!==a&&{shouldShowPreviews:Boolean(a)},muteUntil:i}}(e.notifySettings,e.peer.peer,e.peer.topMsgId);!function(e,t,n=0,s){$s({chatId:e,topicId:t,muteUntil:n},(()=>s({"@type":"updateTopicNotifyExceptions",chatId:e,topicId:t,isMuted:!1})))}(t.chatId,t.topicId,t.muteUntil,Xs),Xs({"@type":"updateTopicNotifyExceptions",...t})}else if(e instanceof de.Api.UpdateUserTyping||e instanceof de.Api.UpdateChatUserTyping){const t=e instanceof de.Api.UpdateUserTyping?fe(e.userId,"user"):fe(e.chatId,"chat");e.action instanceof de.Api.SendMessageEmojiInteraction?Xs({"@type":"updateStartEmojiInteraction",id:t,emoji:e.action.emoticon,messageId:e.action.msgId,interaction:(n=JSON.parse(e.action.interaction.data),{timestamps:n.a.map((({t:e})=>e))})}):Xs({"@type":"updateChatTypingStatus",id:t,typingStatus:mn(e)})}else if(e instanceof de.Api.UpdateChannelUserTyping){const t=fe(e.channelId,"channel");Xs({"@type":"updateChatTypingStatus",id:t,threadId:e.topMsgId,typingStatus:mn(e)})}else if(e instanceof de.Api.UpdateChannel){const{_entities:t}=e;if(!t)return;const n=t.find((e=>e instanceof de.Api.Channel||e instanceof de.Api.ChannelForbidden));if(n instanceof de.Api.Channel){const t=rn(n);t&&(Xs({"@type":"updateChat",id:t.id,chat:t}),Xs({"@type":t.isNotJoined?"updateChatLeave":"updateChatJoin",id:fe(e.channelId,"channel")}))}else if(n instanceof de.Api.ChannelForbidden){const t=fe(e.channelId,"channel");Xs({"@type":"updateChat",id:t,chat:{isRestricted:!0}}),Xs({"@type":"updateChatLeave",id:t})}else 0===t.length&&Xs({"@type":"resetMessages",id:fe(e.channelId,"channel")})}else if(e instanceof de.Api.UpdateDialogUnreadMark&&e.peer instanceof de.Api.DialogPeer)Xs({"@type":"updateChat",id:pe(e.peer.peer),chat:{hasUnreadMark:e.unread}});else if(e instanceof de.Api.UpdateChatDefaultBannedRights)Xs({"@type":"updateChat",id:pe(e.peer),chat:{defaultBannedRights:we(e.defaultBannedRights)}});else if(e instanceof de.Api.UpdateUserStatus)Xs({"@type":"updateUserStatus",userId:fe(e.userId,"user"),status:Us(e.status)});else if(e instanceof de.Api.UpdateUser)Xs({"@type":"updateRequestUserUpdate",id:fe(e.userId,"user")});else if(e instanceof de.Api.UpdateUserEmojiStatus){const t=he(e.emojiStatus);Xs({"@type":"updateUserEmojiStatus",userId:fe(e.userId,"user"),emojiStatus:t})}else if(e instanceof de.Api.UpdateUserName){const t=fe(e.userId,"user"),n=Be.users[t],s=n?.mutualContact&&!n.self?Je(e,[]):Je(e,["firstName","lastName"]),i=pt(e);Xs({"@type":"updateUser",id:t,user:{...s,usernames:i}})}else if(e instanceof de.Api.UpdateUserPhone){const{userId:t,phone:n}=e;Xs({"@type":"updateUser",id:fe(t,"user"),user:{phoneNumber:n}})}else if(e instanceof de.Api.UpdatePeerSettings){const{_entities:t,settings:n}=e;if(!t)return;t?.length&&(t.filter((e=>e instanceof de.Api.User&&!e.contact)).forEach((e=>{Xs({"@type":"deleteContact",id:fe(e.id,"user")})})),t.filter((e=>e instanceof de.Api.User&&e.contact)).map(Ms).forEach((e=>{e&&Xs({"@type":"updateUser",id:e.id,user:{...e,...n&&{settings:In(n)}}})})))}else if(e instanceof de.Api.UpdateNotifySettings){const{notifySettings:{showPreviews:t,silent:n,muteUntil:s},peer:{className:i}}=e,a="NotifyUsers"===i?"contact":"NotifyChats"===i?"group":"NotifyBroadcasts"===i?"broadcast":void 0;if(!a)return;Xs({"@type":"updateNotifySettings",peerType:a,isSilent:Boolean(n||"number"==typeof s&&Date.now()+1e3*et()<1e3*s),shouldShowPreviews:Boolean(t)})}else if(e instanceof de.Api.UpdatePeerBlocked)Xs({"@type":"updatePeerBlocked",id:pe(e.peerId),isBlocked:e.blocked,isBlockedFromStories:e.blockedMyStoriesFrom});else if(e instanceof de.Api.UpdatePrivacy){const t=function(e){switch(e.className){case"PrivacyKeyPhoneNumber":return"phoneNumber";case"PrivacyKeyAddedByPhone":return"addByPhone";case"PrivacyKeyStatusTimestamp":return"lastSeen";case"PrivacyKeyProfilePhoto":return"profilePhoto";case"PrivacyKeyPhoneCall":return"phoneCall";case"PrivacyKeyPhoneP2P":return"phoneP2P";case"PrivacyKeyForwards":return"forwards";case"PrivacyKeyVoiceMessages":return"voiceMessages";case"PrivacyKeyChatInvite":return"chatInvite"}}(e.key);t&&Xs({"@type":"updatePrivacy",key:t,rules:lt(e.rules)})}else if(e instanceof de.Api.UpdateDraftMessage)Xs({"@type":"draftMessage",chatId:pe(e.peer),threadId:e.topMsgId,draft:ys(e.draft)});else if(e instanceof de.Api.UpdateContactsReset)Xs({"@type":"updateResetContactList"});else if(e instanceof de.Api.UpdateFavedStickers)Xs({"@type":"updateFavoriteStickers"});else if(e instanceof de.Api.UpdateRecentStickers)Xs({"@type":"updateRecentStickers"});else if(e instanceof de.Api.UpdateRecentReactions)Xs({"@type":"updateRecentReactions"});else if(e instanceof de.Api.UpdateMoveStickerSetToTop)e.masks||Xs({"@type":"updateMoveStickerSetToTop",isCustomEmoji:e.emojis,id:e.stickerset.toString()});else if(e instanceof de.Api.UpdateStickerSets)Xs({"@type":"updateStickerSets"});else if(e instanceof de.Api.UpdateStickerSetsOrder)e.masks||Xs({"@type":"updateStickerSetsOrder",order:e.order.map((e=>e.toString())),isCustomEmoji:e.emojis});else if(e instanceof de.Api.UpdateNewStickerSet){if(e.stickerset instanceof de.Api.messages.StickerSet){const t=yt(e.stickerset.set);Xs({"@type":"updateStickerSet",id:t.id,stickerSet:t})}}else if(e instanceof de.Api.UpdateSavedGifs)Xs({"@type":"updateSavedGifs"});else if(e instanceof de.Api.UpdateGroupCall){const t=e._entities;t&&(qe(t),ti(t)),Xs({"@type":"updateGroupCall",call:Vt(e.call)})}else if(e instanceof de.Api.UpdateGroupCallConnection)Xs({"@type":"updateGroupCallConnection",data:JSON.parse(e.params.data),presentation:Boolean(e.presentation)});else if(e instanceof de.Api.UpdateGroupCallParticipants){const n=e._entities;n&&(qe(n),ti(n)),Xs({"@type":"updateGroupCallParticipants",groupCallId:(t=e.call,t.id.toString()),participants:e.participants.map(Ot)})}else if(e instanceof de.Api.UpdatePendingJoinRequests){const t=e._entities;t&&(qe(t),ti(t)),Xs({"@type":"updatePendingJoinRequests",chatId:pe(e.peer),recentRequesterIds:e.recentRequesters.map((e=>fe(e,"user"))),requestsPending:e.requestsPending})}else if(e instanceof de.Api.UpdatePhoneCall){const t=e._entities;t&&(qe(t),ti(t)),Xs({"@type":"updatePhoneCall",call:Lt(e.phoneCall)})}else if(e instanceof de.Api.UpdatePhoneCallSignalingData)Xs({"@type":"updatePhoneCallSignalingData",callId:e.phoneCallId.toString(),data:Array.from(e.data)});else if(e instanceof de.Api.UpdateWebViewResultSent){const{queryId:t}=e;Xs({"@type":"updateWebViewResultSent",queryId:t.toString()})}else if(e instanceof de.Api.UpdateBotMenuButton){const{botId:t,button:n}=e,s=fe(t,"user");Xs({"@type":"updateBotMenuButton",botId:s,button:Ft(n)})}else if(e instanceof de.Api.UpdateTranscribedAudio){const t=e._entities;t&&(qe(t),ti(t)),Xs({"@type":"updateTranscribedAudio",transcriptionId:e.transcriptionId.toString(),text:e.text,isPending:e.pending})}else if(e instanceof de.Api.UpdateConfig){const t=e._entities;t&&(qe(t),ti(t)),Xs({"@type":"updateConfig"})}else if(e instanceof de.Api.UpdateChannelPinnedTopic)Xs({"@type":"updatePinnedTopic",chatId:fe(e.channelId,"channel"),topicId:e.topicId,isPinned:Boolean(e.pinned)});else if(e instanceof de.Api.UpdateChannelPinnedTopics)Xs({"@type":"updatePinnedTopicsOrder",chatId:fe(e.channelId,"channel"),order:e.order||[]});else if(e instanceof de.Api.UpdateRecentEmojiStatuses)Xs({"@type":"updateRecentEmojiStatuses"});else if(e instanceof de.Api.UpdateStory){const t=e._entities;t&&(qe(t),ti(t));const{story:n}=e,s=pe(e.peer);Fe(n,s),n instanceof de.Api.StoryItemDeleted?Xs({"@type":"deleteStory",peerId:s,storyId:n.id}):Xs({"@type":"updateStory",peerId:s,story:_s(s,n)})}else e instanceof de.Api.UpdateReadStories?Xs({"@type":"updateReadStories",peerId:pe(e.peer),lastReadId:e.maxId}):e instanceof de.Api.UpdateSentStoryReaction?Xs({"@type":"updateSentStoryReaction",peerId:pe(e.peer),storyId:e.storyId,reaction:Xt(e.reaction)}):e instanceof de.Api.UpdateStoriesStealthMode?Xs({"@type":"updateStealthMode",stealthMode:js(e.stealthMode)}):e instanceof de.Api.UpdateAttachMenuBots?Xs({"@type":"updateAttachMenuBots"}):e instanceof de.Api.UpdateNewAuthorization?Xs({"@type":"updateNewAuthorization",hash:e.hash.toString(),date:e.date,device:e.device,location:e.location,isUnconfirmed:e.unconfirmed}):e instanceof de.Api.UpdateChannelViewForumAsMessages?Xs({"@type":"updateViewForumAsMessages",chatId:fe(e.channelId,"channel"),isEnabled:!!e.enabled||void 0}):e instanceof Ys||e instanceof Zs||d&&Le("UNEXPECTED UPDATE","object"==typeof e&&"className"in e?e.className:e);var t,n,s,i}const ai={PHONE_NUMBER_INVALID:"Invalid phone number.",PHONE_CODE_INVALID:"Invalid code.",PASSWORD_HASH_INVALID:"Incorrect password.",PHONE_PASSWORD_FLOOD:"Limit exceeded. Please try again later.",PHONE_NUMBER_BANNED:"This phone number is banned."},oi={};let ri;function di(){ri({"@type":"updateWebAuthTokenFailed"})}function ci(){return ri(mi("authorizationStateWaitPhoneNumber")),new Promise(((e,t)=>{oi.resolve=e,oi.reject=t}))}function ui(e=!1){return ri({...mi("authorizationStateWaitCode"),isCodeViaApp:e}),new Promise(((e,t)=>{oi.resolve=e,oi.reject=t}))}function fi(e,t){return ri({...mi("authorizationStateWaitPassword"),hint:e,noReset:t}),new Promise((e=>{oi.resolve=e}))}function pi(){return ri(mi("authorizationStateWaitRegistration")),new Promise((e=>{oi.resolve=e}))}function li(e){return ri({...mi("authorizationStateWaitQrCode"),qrCode:{token:btoa(String.fromCharCode(...e.token)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),expires:e.expires}}),new Promise(((e,t)=>{oi.reject=t}))}function hi(e){let t;if(e instanceof de.errors.FloodWaitError){const n=Math.ceil(Number(e.seconds)/60/60);t="Too many attempts. Try again in "+(n>1?`${n} hours`:"an hour")}else t=ai[e.message];t||(t="Unexpected Error",d&&console.error(e)),ri({"@type":"updateAuthorizationError",message:t})}function mi(e){return{"@type":"updateAuthorizationState",authorizationState:e}}function gi(e){oi.resolve&&oi.resolve(e)}function Ai(e){oi.resolve&&oi.resolve(e)}function yi(e){oi.resolve&&oi.resolve(e)}function wi(e){const{firstName:t,lastName:n}=e;oi.resolve&&oi.resolve([t,n])}function Ii(){oi.reject&&oi.reject(new Error("RESTART_AUTH"))}function Si(){oi.reject&&oi.reject(new Error("RESTART_AUTH_WITH_QR"))}var bi=n(78742),vi=n.n(bi),Ci=n(89832),Pi=n(18415);class Mi{constructor(e){var t,n,s,i;this.comparator=e,t=this,s=void 0,(n="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n="queue"))?i:String(i))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.queue=[]}add(e){const t=this.binarySearch(e);this.queue.splice(t,0,e)}pop(){return this.queue.shift()}get size(){return this.queue.length}clear(){this.queue=[]}binarySearch(e){let t=0,n=this.queue.length;for(;t<n;){const s=Math.floor((t+n)/2),i=this.comparator(e,this.queue[s]);if(0===i)return s;i>0?t=s+1:n=s}return t}}const Ui="0",Bi=1e3,Ti=500;let Di,Ri,ki=!1;const Ei=new Map,xi=new Mi((function(e,t){return("seqStart"in e?e.seqStart:e.seq)-("seqStart"in t?t.seqStart:t.seq)})),Ni=new Map;function Hi(e){Be.commonBoxState.seq=e.seq,Be.commonBoxState.date=e.date,Be.commonBoxState.pts=e.pts,Be.commonBoxState.qts=e.qts}function Gi(e,t,n){if(e instanceof Pi.UpdateConnectionState)return e.state===Pi.UpdateConnectionState.connected&&ki&&Vi(),void ii(e);if(e instanceof Pi.UpdateServerTimeOffset)ii(e);else if(void 0!==Be.commonBoxState.seq)return e instanceof de.Api.Updates||e instanceof de.Api.UpdatesCombined?(t&&(e._isFromDifference=!0),void function(e,t){xi.add(e),t||Oi()}(e,n)):"pts"in e?e instanceof de.Api.UpdateChannelTooLong?void Wi(Li(e)):(t&&(e._isFromDifference=!0),void function(e,t){const n=Li(e),s=Ni.get(n)||new Mi(Xi);s.add(e),Ni.set(n,s),t||qi(n)}(e,n)):void ii(e)}function Fi(e,t){if(!(Be.chats[e]instanceof de.Api.Channel))return void(d&&console.error(`[UpdateManager] Channel ${e} not found in localDb`));const n=Be.channelPtsById[e];n&&n<t?ji(e):Be.channelPtsById[e]=t}function _i(e){if("seq"in e&&e.seq&&(Be.commonBoxState.seq=e.seq,Be.commonBoxState.date=e.date),"qts"in e&&(Be.commonBoxState.qts=e.qts),"pts"in e){const t=Li(e);t!==Ui?Be.channelPtsById[t]=e.pts:Be.commonBoxState.pts=e.pts}if(e instanceof de.Api.UpdatesCombined||e instanceof de.Api.Updates){const t=e.users.concat(e.chats);e.updates.forEach((e=>{t&&(e._entities=t),Gi(e)}))}else ii(e)}function Oi(){if(!xi.size)return;const e=xi.pop(),t=Be.commonBoxState.seq,n="seqStart"in e?e.seqStart:e.seq;if(0===n||e._isFromDifference&&n>=t+1)_i(e);else if(n===t+1)clearTimeout(Ri),Ri=void 0,_i(e);else if(n>t+1)return xi.add(e),void Vi();Oi()}function qi(e){const t=Ni.get(e);if(!t?.size)return;const n=t.pop(),s=e===Ui?Be.commonBoxState.pts:Be.channelPtsById[e],i=n.pts,a=Qi(n);if(void 0!==s){if(n._isFromDifference&&i>=s+a)_i(n);else if(i===s+a)clearTimeout(Ei.get(e)),Ei.delete(e),_i(n);else if(i>s+a)return t.add(n),void(e===Ui?Vi():ji(e));qi(e)}}function ji(e){if(Ei.has(e))return;const t=setTimeout((async()=>{await Wi(e),Ei.delete(e)}),Ti);Ei.set(e,t)}function Vi(){Ri||(Ri=setTimeout((async()=>{await zi(),Ri=void 0}),Ti))}function Li(e){return"channelId"in e&&"pts"in e?fe(e.channelId,"channel"):e instanceof de.Api.UpdateNewChannelMessage||e instanceof de.Api.UpdateEditChannelMessage?fe(e.message.peerId.channelId,"channel"):Ui}async function zi(){if(!ki)throw new Error("UpdatesManager not initialized");if(!Be.commonBoxState?.date)return void Ji();si({"@type":"updateFetchingDifference",isFetching:!0});const e=await Di(new de.Api.updates.GetDifference({pts:Be.commonBoxState.pts,date:Be.commonBoxState.date,qts:Be.commonBoxState.qts}));if(!e||e instanceof de.Api.updates.DifferenceTooLong)Ji();else{if(e instanceof de.Api.updates.DifferenceEmpty)return Be.commonBoxState.seq=e.seq,Be.commonBoxState.date=e.date,void si({"@type":"updateFetchingDifference",isFetching:!1});Zi(e),Hi(e instanceof de.Api.updates.DifferenceSlice?e.intermediateState:e.state),e instanceof de.Api.updates.DifferenceSlice?zi():si({"@type":"updateFetchingDifference",isFetching:!1})}}async function Wi(e){const t=Be.chats[e];if(!(t&&t instanceof de.Api.Channel&&t.accessHash&&Be.channelPtsById[e]))return void(d&&console.error("[UpdateManager] Channel for difference not found",e,t));const n=await Di(new de.Api.updates.GetChannelDifference({channel:xn(e,t.accessHash.toString()),pts:Be.channelPtsById[e],filter:new de.Api.ChannelMessagesFilterEmpty,limit:Bi}));n?n instanceof de.Api.updates.ChannelDifferenceTooLong?Ji():(Be.channelPtsById[e]=n.pts,n instanceof de.Api.updates.ChannelDifferenceEmpty?qi(e):(Zi(n,e),n.final||Wi(e))):d&&console.warn("[UpdatesManager] Failed to get ChannelDifference",e,t)}function Ji(){$i(),si({"@type":"requestSync"}),Yi()}function $i(){Ni.clear(),xi.clear(),clearTimeout(Ri),Ri=void 0,Ei.forEach((e=>{clearTimeout(e)})),Ei.clear(),Be.commonBoxState={},Object.keys(Be.channelPtsById).forEach((e=>{Be.channelPtsById[e]=0})),ki=!1}function Ki(e,t){const n="chatTypeChannel"===e.type||"chatTypeSuperGroup"===e.type?Qn(e.id,"channel"):void 0;var s,i,a;Gi((s=t.pts,i=t.ptsCount,(a=n)?new Zs(a,s,i):new Ys(s,i)))}async function Yi(){const e=await Di(new de.Api.updates.GetState);e&&(Hi(e),ki=!0)}function Zi(e,t){e.newMessages.forEach((e=>{ii(new de.Api.UpdateNewMessage({message:e,pts:0,ptsCount:0}))})),qe(e.users),qe(e.chats),ti(e.users),ti(e.chats);const n=new Set;e.otherUpdates.forEach((e=>{const t=Li(e);e instanceof de.Api.UpdateChannelTooLong&&n.add(Li(e));const s=!n.has(t);Gi(e,s,!s)})),t?qi(t):Oi()}function Qi(e){return"ptsCount"in e?e.ptsCount:0}function Xi(e,t){const n=e.pts-t.pts;return 0!==n?n:Qi(t)-Qi(e)}const ea=self.caches;let ta;async function na(){return!!ea&&(ta=ta??await ea.has("test").then((()=>!0)).catch((()=>!1)),ta)}let sa=function(e){return e[e.Text=0]="Text",e[e.Blob=1]="Blob",e[e.Json=2]="Json",e[e.ArrayBuffer=3]="ArrayBuffer",e}({});async function ia(e,t,n,s=!1){if(ea)try{const i=r?`${c}/${t.replace(/:/g,"_")}`:new Request(t.replace(/:/g,"_")),a=await ea.open(e),o=await a.match(i);if(!o)return;const d=o.headers.get("Content-Type");switch(n){case sa.Text:return await o.text();case sa.Blob:{if(t.startsWith("avatar")&&d&&d.startsWith("text"))return;const e=await o.blob(),n=!e.type||!s&&e.type.includes("html");let i=e.type||d;return n&&i?(s||(i=i.replace(/html/gi,"")),new Blob([e],{type:i})):e}case sa.Json:return await o.json();case sa.ArrayBuffer:return await o.arrayBuffer();default:return}}catch(e){return void console.warn(e)}}async function aa(e,t,n){if(!ea)return!1;try{const s="string"==typeof n||n instanceof Blob||n instanceof ArrayBuffer?n:JSON.stringify(n),i=r?`${c}/${t.replace(/:/g,"_")}`:new Request(t.replace(/:/g,"_")),a=new Response(s),o=await ea.open(e);return await o.put(i,a),!0}catch(e){return console.warn(e),!1}}async function oa(e,t){try{if(!ea)return;const n=await ea.open(e);return await n.delete(t)}catch(e){return void console.warn(e)}}async function ra(e){try{if(!ea)return;return await ea.delete(e)}catch(e){return void console.warn(e)}}const da=new Set(["msg","sticker","gif","wallpaper","photo","webDocument","document","videoAvatar"]),ca=new Set(["s","m","x","y","w","a","b","c","d"]);async function ua({url:e,mediaFormat:t,start:n,end:i,isHtmlAllowed:a},o,r){const{data:d,mimeType:c,fullSize:m}=await async function(e,t,n,s,i,a){const o=pa(e);if(!o)return;const{entityType:r,entityId:d,sizeType:c,params:u,mediaMatchType:f}=o;if("staticMap"===r){const e=d,n=new URLSearchParams(u),s=n.get("long"),i=n.get("lat"),a=n.get("w"),o=n.get("h"),r=n.get("zoom"),c=n.get("scale"),f=n.get("accuracy_radius");return{mimeType:"image/png",data:await t.downloadStaticMap(e,s,i,a,o,r,c,f)}}let p;switch(r){case"channel":case"chat":p=Be.chats[d];break;case"user":p=Be.users[d];break;case"msg":p=Be.messages[d];break;case"sticker":case"gif":case"wallpaper":case"document":p=Be.documents[d];break;case"videoAvatar":case"photo":p=Be.photos[d];break;case"stickerSet":p=Be.stickerSets[d];break;case"webDocument":p=Be.webDocuments[d]}if(p){if(da.has(r)){const e=await t.downloadMedia(p,{sizeType:c,start:s,end:i,progressCallback:n,workers:h});let o,d;return p instanceof de.Api.MessageService&&p.action instanceof de.Api.MessageActionSuggestProfilePhoto?o="image/jpeg":p instanceof de.Api.Message?(o=function(e,t){if(e&&e.media){if(e.media instanceof de.Api.MessageMediaPhoto)return"image/jpeg";if(e.media instanceof de.Api.MessageMediaGeo||e.media instanceof de.Api.MessageMediaVenue||e.media instanceof de.Api.MessageMediaGeoLive)return"image/png";if(e.media instanceof de.Api.MessageMediaDocument){const n=e.media.document;if(n instanceof de.Api.Document)return t?n.attributes.some((e=>e instanceof de.Api.DocumentAttributeSticker))?"image/webp":"image/jpeg":n.mimeType}return e.media instanceof de.Api.MessageMediaWebPage&&e.media.webpage instanceof de.Api.WebPage&&e.media.webpage.document instanceof de.Api.Document?t?"image/jpeg":e.media.webpage.document.mimeType:void 0}}(p,c),p.media instanceof de.Api.MessageMediaDocument&&p.media.document instanceof de.Api.Document&&(d=p.media.document.size.toJSNumber()),p.media instanceof de.Api.MessageMediaWebPage&&p.media.webpage instanceof de.Api.WebPage&&p.media.webpage.document instanceof de.Api.Document&&(d=p.media.webpage.document.size.toJSNumber())):p instanceof de.Api.Photo?o="videoAvatar"===r?"video/mp4":"image/jpeg":"sticker"===r&&c?o="image/webp":"webDocument"===r?(o=p.mimeType,d=p.size):(o=ca.has(c||"")?"image/jpeg":p.mimeType,d=p.size.toJSNumber()),!a&&o&&(o=o.replace(/html/gi,"")),{mimeType:o,data:e,fullSize:d}}if("stickerSet"===r){const e=await t.downloadStickerSetThumb(p);return{mimeType:fa(e),data:e}}{const e=await t.downloadProfilePhoto(p,"profile"===f);return{mimeType:fa(e),data:e}}}}(e,o,r,n,i,a)||{};if(!d)return;const g=await async function(e,t,n){switch(t){case st.IU.BlobUrl:return new Blob([e],{type:n});case st.IU.Text:return e.toString();case st.IU.Progressive:case st.IU.DownloadUrl:return e.buffer}}(d,t,c);if(!g)return;const A=t!==st.IU.Progressive&&(t!==st.IU.BlobUrl||g.size<=l);return!u&&s&&A&&aa(e.startsWith("avatar")?p:f,e,g),{dataBlob:t===st.IU.Progressive?"":g,arrayBuffer:t===st.IU.Progressive?g:void 0,mimeType:c,fullSize:m}}function fa(e,t="image/jpeg"){if(e.length<4)return t;let n=t;switch(e.subarray(0,4).reduce(((e,t)=>e+t.toString(16)),"")){case"89504e47":n="image/png";break;case"47494638":n="image/gif";break;case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":n="image/jpeg";break;case"52494646":n="image/webp"}return n}function pa(e){const t=e.startsWith("staticMap")?e.match(/(staticMap):([0-9-]+)(\?.+)/):e.startsWith("webDocument")?e.match(/(webDocument):(.+)/):e.match(/(avatar|profile|photo|msg|stickerSet|sticker|wallpaper|gif|document|videoAvatar)([-\d\w./]+)(?::\d+)?(\?size=\w+)?/);if(!t)return;const n=t[1],s=t[2];let i;const a=t[3],o=a?.replace("?size=","")||void 0;return i="avatar"===t[1]||"profile"===t[1]?Dn(s):t[1],{mediaMatchType:n,entityType:i,entityId:s,sizeType:o,params:a}}class la extends AbortController{constructor(...e){var t,n,s,i;super(...e),t=this,n="threads",s=new Map,(n="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n))?i:String(i))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}getThreadSignal(e){let t=this.threads.get(e);return t||(t=new AbortController,this.threads.set(e,t)),t.signal}abortThread(e,t){this.threads.get(e)?.abort(t),this.threads.delete(e)}abort(e){super.abort(e),this.threads.forEach((t=>t.abort(e))),this.threads.clear()}}const ha="Unknown UserAgent",ma="Unknown platform";Ci.Logger.setLevel("warn");const ga={build:e=>e},Aa=new Map,ya=new Map;let wa,Ia,Sa;function ba({isPremium:e}){Ia.setIsPremium(e)}const va=2500;async function Ca(e=!1,t=!1){!e&&Ia.isConnected()&&await Promise.race([Ba(new de.Api.auth.LogOut),ae(va)]),t||(Object.assign(Ue,Me()),$i()),await Ia.destroy()}async function Pa(){await Ia.disconnect()}function Ma(e){wa({"@type":"updateSession",sessionData:e})}function Ua(e){Gi(e),e instanceof de.Api.UpdatesTooLong?async function(){try{await Ba(new de.Api.users.GetFullUser({id:new de.Api.InputUserSelf}),{shouldThrow:!0})}catch(e){"AUTH_KEY_UNREGISTERED"!==e.message&&"SESSION_REVOKED"!==e.message||wa({"@type":"updateConnectionState",connectionState:"connectionStateBroken"})}}():("updates"in e?e.updates:[e]).forEach((e=>{if(!(e instanceof de.Api.UpdateConfig))return;const t=e._entities?.find((e=>e instanceof de.Api.User&&fe(e.id,"user")===Sa));t instanceof de.Api.User&&ba({isPremium:Boolean(t.premium)})}))}async function Ba(e,t={}){const{shouldThrow:n,shouldIgnoreUpdates:s,dcId:i,shouldIgnoreErrors:a,abortControllerChatId:o,abortControllerThreadId:r,shouldRetryOnTimeout:c,abortControllerGroup:u}=t,f=Boolean(t.shouldReturnTrue);let p;if(o){let e=Aa.get(o);e||(e=new la,Aa.set(o,e)),p=r?e.getThreadSignal(r):e.signal}if(u){let e=ya.get(u);e||(e=new AbortController,ya.set(u,e)),p=e.signal}try{d&&Le("INVOKE",e.className);const t=await Ia.invoke(e,i,p,c);return d&&Le("RESPONSE",e.className,t),!s&&function(e){return e instanceof de.Api.UpdatesTooLong||e instanceof de.Api.UpdateShortMessage||e instanceof de.Api.UpdateShortChatMessage||e instanceof de.Api.UpdateShort||e instanceof de.Api.UpdatesCombined||e instanceof de.Api.Updates||e instanceof de.Api.UpdateShortSentMessage}(t)&&Gi(t),f?t&&!0:t}catch(t){if(a)return;if(d&&(Le("INVOKE ERROR",e.className),console.debug("invokeRequest failed with payload",e),console.error(t)),n)throw t;return void function(e,t){const n=e.message.startsWith("A wait of")&&(t instanceof de.Api.messages.SendMessage||t instanceof de.Api.messages.SendMedia||t instanceof de.Api.messages.SendMultiMedia),{message:s}=e;wa({"@type":"error",error:{message:s,isSlowMode:n,hasErrorKey:!0}})}(t,e)}}function Ta(e,t){d&&Le("BEACON",e.className),Ia.invokeBeacon(e,t)}async function Da(e,t){try{return await ua(e,Ia,t)}catch(n){if(n.message.startsWith("FILE_REFERENCE")){if(await Ha({url:e.url}))return ua(e,Ia,t);d&&console.error("Failed to repair file reference",e.url)}throw n}}function Ra(e,t){return Ia.uploadFile({file:e,onProgress:t,workers:m})}function ka(e){return Ia.updateTwoFaSettings(e)}function Ea(e){const{chatId:t,threadId:n}=e,s=Aa.get(t);if(!n)return s?.abort("Chat change"),void Aa.delete(t);s?.abortThread(n,"Thread change")}function xa(e){ya.get(e)?.abort(),ya.delete(e)}async function Na(){const e=await Ba(new de.Api.users.GetFullUser({id:new de.Api.InputUserSelf}));if(!(e&&e.users[0]instanceof de.Api.User))return;const t=e.users[0];t.photo instanceof de.Api.Photo&&(Be.photos[t.photo.id.toString()]=t.photo),Oe(t);const n=Ps(e),s=Ms(t);var i;i=s.id,ps=i,function(e,t){ri({"@type":"updateCurrentUser",currentUser:e,currentUserFullInfo:t})}(s,n),Sa=s.id,ba({isPremium:Boolean(s.isPremium)})}async function Ha({url:e}){const t=pa(e);if(!t)return;const{entityType:n,entityId:s,mediaMatchType:i}=t;if("document"===i||"photo"===i){const e="document"===i?Be.documents[s]:Be.photos[s];if(!e.storyData)return!1;const t=En(e.storyData.peerId);if(!t)return!1;const n=await Ba(new de.Api.stories.GetStoriesByID({peer:t,id:[e.storyData.id]}));return!!n&&(qe(n.users),n.stories.forEach((t=>Fe(t,e.storyData.peerId))),!0)}if("msg"===n){const e=Be.messages[s],t=e.id,n="channelId"in e.peerId?new de.Api.InputChannel({channelId:e.peerId.channelId,accessHash:Be.chats[fe(e.peerId.channelId,"channel")].accessHash}):void 0,i=await Ba(n?new de.Api.channels.GetMessages({channel:n,id:[new de.Api.InputMessageID({id:t})]}):new de.Api.messages.GetMessages({id:[new de.Api.InputMessageID({id:t})]}));if(!i||i instanceof de.Api.messages.MessagesNotModified)return!1;n&&"pts"in i&&Fi(fe(n.channelId,"channel"),i.pts);const a=i.messages[0];return!(a instanceof de.Api.MessageEmpty||(qe(i.users),qe(i.chats),He(a),0))}return!1}function Ga(e){Ia.setForceHttpTransport(e)}function Fa(e){Ia.setAllowHttpTransport(e)}function _a(e){Ia.setShouldDebugExportedSenders(e)}function Oa(e){ji(e)}let qa;async function ja({chatId:e,accessHash:t,messageId:n,data:s,isGame:i}){const a=await Ba(new de.Api.messages.GetBotCallbackAnswer({peer:kn(e,t),msgId:n,data:s?Ve(s):void 0,game:i||void 0}));return a?we(a):void 0}async function Va(){const e=await Ba(new de.Api.contacts.GetTopPeers({botsInline:!0}));if(!(e instanceof de.Api.contacts.TopPeers))return;const t=e.users.map(Ms).filter(Boolean);return{ids:t.map((({id:e})=>e)),users:t}}async function La({username:e}){const t=await Ba(new de.Api.contacts.ResolveUsername({username:e}));if(t&&t.users[0]instanceof de.Api.User&&t.users[0].bot&&t.users[0].botInlinePlaceholder)return Oe(t.users[0]),{user:Ms(t.users[0]),chat:rn(t.users[0])}}async function za({bot:e,chat:t,query:n,offset:s=""}){const i=await Ba(new de.Api.messages.GetInlineBotResults({bot:kn(e.id,e.accessHash),peer:kn(t.id,t.accessHash),query:n,offset:s}));var a,o,r,d,c,u;if(i)return qe(i.users),{isGallery:Boolean(i.gallery),help:e.botPlaceholder,nextOffset:(c=e.usernames[0].username,u=i.nextOffset,"gif"===c&&"0"===u?"":u),switchPm:(d=i.switchPm,d?Je(d,["text","startParam"]):void 0),switchWebview:(r=i.switchWebview,r?Je(r,["text","url"]):void 0),users:i.users.map(Ms).filter(Boolean),results:(a=String(i.queryId),o=i.results,o.map((e=>{return e instanceof de.Api.BotInlineMediaResult?(e.document instanceof de.Api.Document&&(t=e.document,Be.documents[String(t.id)]=t),e.photo instanceof de.Api.Photo&&(n=e.photo,Be.photos[String(n.id)]=n),function(e,t){const{id:n,type:s,title:i,description:a,photo:o,document:r}=e;return{id:n,queryId:t,type:s,title:i,description:a,..."sticker"===s&&r instanceof de.Api.Document&&{sticker:At(r)},...o instanceof de.Api.Photo&&{photo:ct(o)},..."gif"===s&&r instanceof de.Api.Document&&{gif:Pt(r)},..."video"===s&&r instanceof de.Api.Document&&{thumbnail:rt(r.thumbs)}}}(e,a)):(e.thumb&&(s=e.thumb,Be.webDocuments[s.url]=s),function(e,t){const{id:n,type:s,title:i,description:a,url:o,thumb:r}=e;return{id:n,queryId:t,type:s,title:i,description:a,url:o,webThumbnail:Et(r)}}(e,a));var t,n,s}))),cacheTime:i.cacheTime}}async function Wa({chat:e,replyInfo:t,resultId:n,queryId:s,sendAs:i,isSilent:a,scheduleDate:o}){const r=_n();await Ba(new de.Api.messages.SendInlineBotResult({clearDraft:!0,randomId:r,queryId:ge()(s),peer:kn(e.id,e.accessHash),id:n,scheduleDate:o,replyTo:t&&os(t),...a&&{silent:!0},...i&&{sendAs:kn(i.id,i.accessHash)}}))}async function Ja({bot:e,startParam:t}){const n=_n();await Ba(new de.Api.messages.StartBot({bot:kn(e.id,e.accessHash),peer:kn(e.id,e.accessHash),randomId:n,startParam:t}))}async function $a({isSilent:e,peer:t,bot:n,url:s,startParam:i,replyInfo:a,theme:o,sendAs:r,isFromBotMenu:d}){const c=await Ba(new de.Api.messages.RequestWebView({silent:e||void 0,peer:kn(t.id,t.accessHash),bot:kn(n.id,n.accessHash),url:s,startParam:i,themeParams:o?Zn(o):void 0,fromBotMenu:d||void 0,platform:L,replyTo:a&&os(a),...r&&{sendAs:kn(r.id,r.accessHash)}}));if(c instanceof de.Api.WebViewResultUrl)return{url:c.url,queryId:c.queryId.toString()}}async function Ka({bot:e,url:t,theme:n,startParam:s,isFromSwitchWebView:i,isFromSideMenu:a}){const o=await Ba(new de.Api.messages.RequestSimpleWebView({url:t,bot:kn(e.id,e.accessHash),themeParams:n?Zn(n):void 0,platform:L,startParam:s,fromSwitchWebview:i||void 0,fromSideMenu:a||void 0}));return o?.url}async function Ya({bot:e,appName:t}){const n=await Ba(new de.Api.messages.GetBotApp({app:new de.Api.InputBotAppShortName({botId:xn(e.id,e.accessHash),shortName:t})}));if(n&&!(n instanceof de.Api.BotAppNotModified))return function(e){const{app:t,inactive:n,requestWriteAccess:s}=e,i=_t(t);if(i)return{...i,isInactive:n,shouldRequestWriteAccess:s}}(n)}async function Za({peer:e,app:t,startParam:n,theme:s,isWriteAllowed:i}){const a=await Ba(new de.Api.messages.RequestAppWebView({peer:kn(e.id,e.accessHash),app:as(t),startParam:n,themeParams:s?Zn(s):void 0,platform:L,writeAllowed:i||void 0}));return a?.url}function Qa({isSilent:e,peer:t,bot:n,queryId:s,replyInfo:i,sendAs:a}){return Ba(new de.Api.messages.ProlongWebView({silent:e||void 0,peer:kn(t.id,t.accessHash),bot:kn(n.id,n.accessHash),queryId:ge()(s),replyTo:i&&os(i),...a&&{sendAs:kn(a.id,a.accessHash)}}))}async function Xa({bot:e,buttonText:t,data:n}){const s=_n();await Ba(new de.Api.messages.SendWebViewData({bot:kn(e.id,e.accessHash),buttonText:t,data:n,randomId:s}))}async function eo({hash:e}){const t=await Ba(new de.Api.messages.GetAttachMenuBots({hash:e?ge()(e):void 0}));if(t instanceof de.Api.AttachMenuBots)return qe(t.users),{hash:t.hash.toString(),bots:ze(t.bots.map(xt),"id"),users:t.users.map(Ms).filter(Boolean)}}async function to({bot:e}){const t=await Ba(new de.Api.messages.GetAttachMenuBot({bot:kn(e.id,e.accessHash)}));if(t instanceof de.Api.AttachMenuBotsBot)return qe(t.users),{bot:xt(t.bot),users:t.users.map(Ms).filter(Boolean)}}function no({bot:e,isWriteAllowed:t,isEnabled:n}){return Ba(new de.Api.messages.ToggleBotInAttachMenu({bot:kn(e.id,e.accessHash),writeAllowed:t||void 0,enabled:n}))}async function so({chat:e,buttonId:t,messageId:n}){const s=await Ba(new de.Api.messages.RequestUrlAuth({peer:kn(e.id,e.accessHash),buttonId:t,msgId:n}));if(!s)return;const i=Ns(s);return"request"===i?.type&&qa({"@type":"updateUser",id:i.bot.id,user:i.bot}),i}async function io({chat:e,messageId:t,buttonId:n,isWriteAllowed:s}){const i=await Ba(new de.Api.messages.AcceptUrlAuth({peer:kn(e.id,e.accessHash),msgId:t,buttonId:n,writeAllowed:s||void 0}));if(!i)return;const a=Ns(i);return"request"===a?.type&&qa({"@type":"updateUser",id:a.bot.id,user:a.bot}),a}async function ao({url:e}){const t=await Ba(new de.Api.messages.RequestUrlAuth({url:e}));if(!t)return;const n=Ns(t);return"request"===n?.type&&qa({"@type":"updateUser",id:n.bot.id,user:n.bot}),n}async function oo({url:e,isWriteAllowed:t}){const n=await Ba(new de.Api.messages.AcceptUrlAuth({url:e,writeAllowed:t||void 0}));if(!n)return;const s=Ns(n);return"request"===s?.type&&qa({"@type":"updateUser",id:s.bot.id,user:s.bot}),s}function ro({bot:e}){return Ba(new de.Api.bots.CanSendMessage({bot:xn(e.id,e.accessHash)}))}function co({bot:e}){return Ba(new de.Api.bots.AllowSendMessage({bot:xn(e.id,e.accessHash)}),{shouldReturnTrue:!0})}async function uo({bot:e,customMethod:t,parameters:n}){try{const s=await Ba(new de.Api.bots.InvokeWebViewCustomMethod({bot:kn(e.id,e.accessHash),params:new de.Api.DataJSON({data:n}),customMethod:t}),{shouldThrow:!0});return{result:JSON.parse(s.data)}}catch(e){return{error:e.message}}}function fo({bot:e,langCode:t,name:n,about:s,description:i}){return Ba(new de.Api.bots.SetBotInfo({bot:kn(e.id,e.accessHash),langCode:t,name:n||"",about:s||"",description:i||""}),{shouldReturnTrue:!0})}var po=n(48764).lW;let lo,ho;async function mo({call:e}){const t=await Ba(new de.Api.phone.GetGroupCall({call:Xn(e)}));if(!t)return;qe(t.users),qe(t.chats);const n=t.users.map(Ms).filter(Boolean),s=t.chats.map((e=>rn(e))).filter(Boolean);return{groupCall:Vt(t.call),users:n,chats:s}}function go({call:e}){return Ba(new de.Api.phone.DiscardGroupCall({call:Xn(e)}),{shouldReturnTrue:!0})}function Ao({call:e,participant:t,muted:n,presentationPaused:s,videoStopped:i,videoPaused:a,volume:o,raiseHand:r}){return Ba(new de.Api.phone.EditGroupCallParticipant({call:Xn(e),participant:kn(t.id,t.accessHash),...void 0!==i&&{videoStopped:i},...void 0!==a&&{videoPaused:a},...void 0!==n&&{muted:n},...void 0!==s&&{presentationPaused:s},...void 0!==r&&{raiseHand:r},...void 0!==o&&{volume:o}}),{shouldReturnTrue:!0})}function yo({groupCall:e,title:t}){return Ba(new de.Api.phone.EditGroupCallTitle({title:t,call:Xn(e)}),{shouldReturnTrue:!0})}async function wo({call:e,canSelfUnmute:t}){const n=await Ba(new de.Api.phone.ExportGroupCallInvite({canSelfUnmute:t||void 0,call:Xn(e)}));if(n)return n.link}async function Io({call:e,offset:t}){const n=await Ba(new de.Api.phone.GetGroupParticipants({call:Xn(e),ids:[],sources:[],offset:t||"",limit:b}));if(!n)return;qe(n.users),qe(n.chats);const s=n.users.map(Ms).filter(Boolean),i=n.chats.map((e=>rn(e))).filter(Boolean);return lo({"@type":"updateGroupCallParticipants",groupCallId:e.id,participants:n.participants.map(Ot),nextOffset:n.nextOffset}),{users:s,chats:i}}function So({call:e,isPageUnload:t}){const n=new de.Api.phone.LeaveGroupCall({call:Xn(e)});t?Ta(n):Ba(n,{shouldReturnTrue:!0})}async function bo({call:e,inviteHash:t,params:n}){const s=await Ba(new de.Api.phone.JoinGroupCall({call:Xn(e),joinAs:new de.Api.InputPeerSelf,muted:!0,videoStopped:!0,params:new de.Api.DataJSON({data:JSON.stringify(n)}),inviteHash:t}),{shouldRetryOnTimeout:!0,abortControllerGroup:"call"});if(s&&s instanceof de.Api.Updates){const e=s.updates.find((e=>e instanceof de.Api.UpdateGroupCall));if(!(e instanceof de.Api.UpdateGroupCall))return;return Vt(e.call)}}async function vo({peer:e}){const t=On(),n=await Ba(new de.Api.phone.CreateGroupCall({peer:kn(e.id,e.accessHash),randomId:t}));if(n&&n instanceof de.Api.Updates){const e=n.updates[0];if(e instanceof de.Api.UpdateGroupCall)return Vt(e.call)}}function Co({call:e,params:t}){return Ba(new de.Api.phone.JoinGroupCallPresentation({call:Xn(e),params:new de.Api.DataJSON({data:JSON.stringify(t)})}),{shouldReturnTrue:!0})}function Po({call:e,subscribed:t}){return Ba(new de.Api.phone.ToggleGroupCallStartSubscription({call:Xn(e),subscribed:t}),{shouldReturnTrue:!0,shouldIgnoreErrors:!0})}function Mo({call:e}){return Ba(new de.Api.phone.LeaveGroupCallPresentation({call:Xn(e)}),{shouldReturnTrue:!0})}async function Uo(){const e=await Ba(new de.Api.messages.GetDhConfig({}));if(e&&!(e instanceof de.Api.messages.DhConfigNotModified))return{g:e.g,p:Array.from(e.p),random:Array.from(e.random)}}function Bo({call:e,isBusy:t,isPageUnload:n}){const s=new de.Api.phone.DiscardCall({peer:es(e),reason:t?new de.Api.PhoneCallDiscardReasonBusy:new de.Api.PhoneCallDiscardReasonHangup});n?Ta(s):Ba(s,{shouldReturnTrue:!0})}async function To({user:e,gAHash:t,isVideo:n}){const s=await Ba(new de.Api.phone.RequestCall({randomId:On(),userId:kn(e.id,e.accessHash),gAHash:po.from(t),...n&&{video:!0},protocol:$t()}));if(!s)return;const i=Lt(s.phoneCall);return lo({"@type":"updatePhoneCall",call:i}),qe(s.users),{users:s.users.map(Ms).filter(Boolean)}}function Do({call:e,rating:t,comment:n}){return Ba(new de.Api.phone.SetCallRating({rating:t,peer:es(e),comment:n}),{shouldReturnTrue:!0})}function Ro({call:e}){return Ba(new de.Api.phone.ReceivedCall({peer:es(e)}))}async function ko({call:e,gB:t}){const n=await Ba(new de.Api.phone.AcceptCall({peer:es(e),gB:po.from(t),protocol:$t()}));if(n)return e=Lt(n.phoneCall),lo({"@type":"updatePhoneCall",call:e}),qe(n.users),{users:n.users.map(Ms).filter(Boolean)}}async function Eo({call:e,gA:t,keyFingerprint:n}){const s=await Ba(new de.Api.phone.ConfirmCall({peer:es(e),gA:po.from(t),keyFingerprint:ge()(n),protocol:$t()}));if(s)return e=Lt(s.phoneCall),lo({"@type":"updatePhoneCall",call:e}),qe(s.users),{users:s.users.map(Ms).filter(Boolean)}}function xo({data:e,call:t}){return Ba(new de.Api.phone.SendSignalingData({data:po.from(e),peer:es(t)}))}async function No({limit:e,offsetDate:t,archived:n,withPinned:s,lastLocalServiceMessageId:i}){const a=await Ba(new de.Api.messages.GetDialogs({offsetPeer:new de.Api.InputPeerEmpty,limit:e,offsetDate:t,...s&&{excludePinned:!0}})),o=s?await Ba(new de.Api.messages.GetPinnedDialogs({folderId:n?K:void 0})):void 0;if(!a||a instanceof de.Api.messages.DialogsNotModified)return;o&&(ni(o.messages),Br(o)),ni(a.messages),Br(a);const r=(o?o.messages:[]).concat(a.messages).map(gs).filter(Boolean),d=Ur(a);o&&Object.assign(d,Ur(o,d));const c=[],u={},f=(o?o.dialogs:[]).concat(a.dialogs),p=[],l={};f.forEach((e=>{if(!(e instanceof de.Api.Dialog)||!n&&e.folderId===K||n&&e.folderId!==K)return;const t=nn(e,d[cn(e.peer)]);if(l[t.id]=e.topMessage,e.pts&&Fi(t.id,e.pts),t.id===z&&i&&i>e.topMessage&&(l[t.id]=i),t.isListed=!0,c.push(t),Ks(t.id,t.muteUntil,ho),s&&e.pinned&&p.push(t.id),e.draft){const n=ys(e.draft);n&&(u[t.id]=n)}}));const h=c.map((e=>e.id)),{users:m,userStatusesById:g}=Bs((o?.users||[]).concat(a.users));let A;return A=a instanceof de.Api.messages.DialogsSlice?a.count:h.length,{chatIds:h,chats:c,users:m,userStatusesById:g,draftsById:u,orderedPinnedIds:s?p:void 0,totalChatCount:A,lastMessageByChatId:l,messages:r}}async function Ho({limit:e,offsetDate:t,withPinned:n}){const s=await Ba(new de.Api.messages.GetSavedDialogs({offsetPeer:new de.Api.InputPeerEmpty,limit:e,offsetDate:t,...n&&{excludePinned:!0}})),i=n?await Ba(new de.Api.messages.GetPinnedSavedDialogs):void 0;if(!s||s instanceof de.Api.messages.SavedDialogsNotModified)return;const a=i&&!(i instanceof de.Api.messages.SavedDialogsNotModified);a&&Br(i),Br(s),ni(s.messages);const o=(a?i.messages:[]).concat(s.messages).map(gs).filter(Boolean),r=Ur(s);a&&Object.assign(r,Ur(i,r));const d=(a?i.dialogs:[]).concat(s.dialogs),c=[],u=[],f={},p=[];d.forEach((e=>{const t=function(e,t){const{peer:n}=e;return{id:pe(n),type:dn(t),title:un(n,t),...tn(t)}}(e,r[cn(e.peer)]),s=pe(e.peer);c.push(s),n&&e.pinned&&u.push(s),f[s]=e.topMessage,p.push(t)}));const{users:l,userStatusesById:h}=Bs((a?i.users:[]).concat(s.users));let m;return m=s instanceof de.Api.messages.SavedDialogsSlice?s.count:c.length,{chatIds:c,chats:p,users:l,userStatusesById:h,orderedPinnedIds:n?u:void 0,totalChatCount:m,lastMessageByChatId:f,messages:o,draftsById:{}}}function Go(e){const{id:t,accessHash:n,adminRights:s}=e;return xn(t,n)instanceof de.Api.InputChannel?async function(e,t,n){const s=await Ba(new de.Api.channels.GetFullChannel({channel:xn(e,t)}));if(!(s&&s.fullChat instanceof de.Api.ChannelFull))return;const{about:i,onlineCount:a,exportedInvite:o,slowmodeSeconds:r,slowmodeNextSendDate:d,migratedFromChatId:c,migratedFromMaxId:u,canViewParticipants:f,canViewStats:p,linkedChatId:l,hiddenPrehistory:h,call:m,botInfo:g,availableReactions:A,defaultSendAs:y,requestsPending:w,recentRequesters:I,statsDc:S,participantsCount:b,stickerset:v,chatPhoto:C,participantsHidden:P,translationsDisabled:M,storiesPinnedAvailable:U,viewForumAsMessages:B}=s.fullChat;C instanceof de.Api.Photo&&(Be.photos[C.id.toString()]=C);const T=o instanceof de.Api.ChatInviteExported?o.link:void 0,{members:D,users:R,userStatusesById:k}=f&&await yr(e,t)||{},{members:E,users:x,userStatusesById:N}=f&&n&&await yr(e,t,"kicked")||{},{members:H,users:G,userStatusesById:F}=f&&await yr(e,t,"admin")||{},_=g?yn(g):void 0;if(s?.chats?.length>1){Br(s);const[,e]=s.chats,t=rn(e);t&&ho({"@type":"updateChat",id:t.id,chat:t})}s.fullChat.pts&&Fi(e,s.fullChat.pts);const O={...k,...N,...F};return{fullInfo:{...C instanceof de.Api.Photo&&{profilePhoto:ct(C)},about:i,onlineCount:a,inviteLink:T,slowMode:r?{seconds:r,nextSendDate:d}:void 0,migratedFrom:c?{chatId:fe(c,"chat"),maxMessageId:u}:void 0,canViewMembers:f,canViewStatistics:p,isPreHistoryHidden:h,members:D,kickedMembers:E,adminMembersById:H?ze(H,"userId"):void 0,groupCallId:m?String(m.id):void 0,linkedChatId:l?fe(l,"channel"):void 0,botCommands:_,enabledReactions:Sn(A),sendAsId:y?pe(y):void 0,requestsPending:w,recentRequesterIds:I?.map((e=>fe(e,"user"))),statisticsDcId:S,stickerSet:v?yt(v):void 0,areParticipantsHidden:P,isTranslationDisabled:M,hasPinnedStories:Boolean(U)},users:[...R||[],...x||[],...G||[]],userStatusesById:O,groupCall:m?{chatId:e,isLoaded:!1,id:m.id.toString(),accessHash:m?.accessHash.toString(),participants:{},version:0,participantsCount:0,connectionState:"disconnected"}:void 0,membersCount:b,...B&&{isForumAsMessages:!0}}}(t,n,s):async function(e){const t=await Ba(new de.Api.messages.GetFullChat({chatId:xn(e)}));if(!(t&&t.fullChat instanceof de.Api.ChatFull))return;Br(t);const{about:n,participants:s,exportedInvite:i,botInfo:a,call:o,availableReactions:r,recentRequesters:d,requestsPending:c,chatPhoto:u,translationsDisabled:f}=t.fullChat;u instanceof de.Api.Photo&&(Be.photos[u.id.toString()]=u);const p=hn(s),l=p?p.filter((({isAdmin:e,isOwner:t})=>e||t)):void 0,h=a?yn(a):void 0,m=i instanceof de.Api.ChatInviteExported?i.link:void 0,{users:g,userStatusesById:A}=Bs(t.users);return{fullInfo:{...u instanceof de.Api.Photo&&{profilePhoto:ct(u)},about:n,members:p,adminMembersById:l?ze(l,"userId"):void 0,canViewMembers:!0,botCommands:h,inviteLink:m,groupCallId:o?.id.toString(),enabledReactions:Sn(r),requestsPending:c,recentRequesterIds:d?.map((e=>fe(e,"user"))),isTranslationDisabled:f},users:g,userStatusesById:A,groupCall:o?{chatId:e,isLoaded:!1,id:o.id.toString(),accessHash:o.accessHash.toString(),connectionState:"disconnected",participantsCount:0,version:0,participants:{}}:void 0,membersCount:p?.length}}(t)}async function Fo(e){const{id:t,accessHash:n}=e,s=await Ba(new de.Api.messages.GetPeerSettings({peer:kn(t,n)}),{abortControllerChatId:t});if(s)return qe(s.users),{users:s.users.map(Ms).filter(Boolean),settings:In(s.settings)}}async function _o({query:e}){const t=await Ba(new de.Api.contacts.Search({q:e,limit:g}));if(!t)return;Br(t);const n=t.myResults.map(pe),s=t.chats.concat(t.users).map((e=>rn(e))).filter(Boolean),i=t.users.map(Ms).filter((e=>Boolean(e)&&!e.isSelf));return{accountChats:s.filter((e=>n.includes(e.id))),accountUsers:i.filter((e=>n.includes(e.id))),globalChats:s.filter((e=>!n.includes(e.id))),globalUsers:i.filter((e=>!n.includes(e.id)))}}async function Oo({type:e,user:t}){let n;if("self"===e||"user"===e){const s=await Ba(new de.Api.users.GetUsers({id:["user"===e&&t?xn(t.id,t.accessHash):new de.Api.InputUserSelf]}));if(!s||!s.length)return;[n]=s}else if("support"===e){const e=await Ba(new de.Api.help.GetSupport);if(!e||!e.user)return;n=e.user}const s=rn(n,"support"===e);if(s)return ho({"@type":"updateChat",id:s.id,chat:s}),{chatId:s.id}}async function qo({chat:e,lastLocalMessage:t,noLastMessage:n}){const{id:s,accessHash:i}=e,a=await Ba(new de.Api.messages.GetPeerDialogs({peers:[new de.Api.InputDialogPeer({peer:kn(s,i)})]}));if(!a)return;const o=a.dialogs[0];if(!(o&&o instanceof de.Api.Dialog))return;const r=Ur(a)[cn(o.peer)];if(!r)return;Br(a);const d=gs(a.messages[0]);ni(a.messages);const c=t&&(!d||t.date>d.date)?t:d,u=nn(o,r);ho({"@type":"updateChat",id:s,chat:u}),!n&&c&&ho({"@type":"updateChatLastMessage",id:s,lastMessage:c}),Hi(a.state),Ks(u.id,u.muteUntil,ho)}function jo({chat:e,draft:t}){return Ba(new de.Api.messages.SaveDraft({peer:kn(e.id,e.accessHash),message:t?.text?.text||"",entities:t?.text?.entities?.map(jn),replyTo:t?.replyInfo&&os(t.replyInfo)}))}async function Vo({chat:e,isMuted:t,muteUntil:n=0}){t&&!n&&(n=E),await Ba(new de.Api.account.UpdateNotifySettings({peer:new de.Api.InputNotifyPeer({peer:kn(e.id,e.accessHash)}),settings:new de.Api.InputPeerNotifySettings({muteUntil:n})})),ho({"@type":"updateNotifyExceptions",chatId:e.id,isMuted:t}),qo({chat:e,noLastMessage:!0})}async function Lo({chat:e,topicId:t,isMuted:n,muteUntil:s=0}){n&&!s&&(s=E),await Ba(new de.Api.account.UpdateNotifySettings({peer:new de.Api.InputNotifyForumTopic({peer:kn(e.id,e.accessHash),topMsgId:t}),settings:new de.Api.InputPeerNotifySettings({muteUntil:s})})),ho({"@type":"updateTopicNotifyExceptions",chatId:e.id,topicId:t,isMuted:n})}async function zo({title:e,about:t="",users:n}){const s=await Ba(new de.Api.channels.CreateChannel({broadcast:!0,title:e,about:t}),{shouldThrow:!0});if(!(s instanceof de.Api.Updates))return void(d&&console.error("Unexpected channel creation update",s));const i=s.chats[0];if(!(i&&i instanceof de.Api.Channel))return void(d&&console.error("Created channel not found",s));const a=rn(i);let o;if(n?.length)try{const e=await Ba(new de.Api.channels.InviteToChannel({channel:xn(a.id,a.accessHash),users:n.map((({id:e,accessHash:t})=>xn(e,t)))}),{shouldIgnoreUpdates:!0,shouldThrow:!0});e&&(Gi(e),o=Zr(e))}catch(e){"USER_PRIVACY_RESTRICTED"===e.message?o=n.map((({id:e})=>e)):ho({"@type":"error",error:{message:e.message}})}return{channel:a,restrictedUserIds:o}}function Wo({channelId:e,accessHash:t}){return Ba(new de.Api.channels.JoinChannel({channel:xn(e,t)}),{shouldReturnTrue:!0,shouldThrow:!0})}function Jo({chat:e,user:t}){if("chatTypeBasicGroup"===e.type)return Ba(new de.Api.messages.DeleteChatUser({chatId:xn(e.id,e.accessHash),userId:xn(t.id,t.accessHash)}),{shouldReturnTrue:!0})}function $o({chatId:e}){return Ba(new de.Api.messages.DeleteChat({chatId:xn(e)}),{shouldReturnTrue:!0})}function Ko({channelId:e,accessHash:t}){return Ba(new de.Api.channels.LeaveChannel({channel:xn(e,t)}),{shouldReturnTrue:!0})}function Yo({channelId:e,accessHash:t}){return Ba(new de.Api.channels.DeleteChannel({channel:xn(e,t)}),{shouldReturnTrue:!0})}async function Zo({title:e,users:t}){const n=await Ba(new de.Api.messages.CreateChat({title:e,users:t.map((({id:e,accessHash:t})=>xn(e,t)))}),{shouldIgnoreUpdates:!0,shouldThrow:!0});if(!(n instanceof de.Api.Updates))return void(d&&console.error("Unexpected chat creation update",n));Gi(n);const s=Zr(n),i=n.chats[0];if(i&&i instanceof de.Api.Chat)return{chat:rn(i),restrictedUserIds:s};d&&console.error("Created chat not found",n)}async function Qo({chatId:e,accessHash:t,photo:n}){const s=xn(e,t);let i;if(n instanceof File){const e=await Ra(n);i=new de.Api.InputChatUploadedPhoto({file:e})}else if(n){const e=Ln(n);if(!e)return!1;i=new de.Api.InputChatPhoto({id:e})}else i=new de.Api.InputChatPhotoEmpty;return Ba(s instanceof de.Api.InputChannel?new de.Api.channels.EditPhoto({channel:s,photo:i}):new de.Api.messages.EditChatPhoto({chatId:s,photo:i}),{shouldReturnTrue:!0})}async function Xo({chat:e,shouldBePinned:t}){const{id:n,accessHash:s}=e;await Ba(new de.Api.messages.ToggleDialogPin({peer:new de.Api.InputDialogPeer({peer:kn(n,s)}),pinned:t||void 0}))&&ho({"@type":"updateChatPinned",id:e.id,isPinned:t})}async function er({chat:e,shouldBePinned:t}){const{id:n,accessHash:s}=e;await Ba(new de.Api.messages.ToggleSavedDialogPin({peer:new de.Api.InputDialogPeer({peer:kn(n,s)}),pinned:t||void 0}))&&ho({"@type":"updateSavedDialogPinned",id:e.id,isPinned:t})}function tr({chat:e,folderId:t}){const{id:n,accessHash:s}=e;return Ba(new de.Api.folders.EditPeerFolders({folderPeers:[new de.Api.InputFolderPeer({peer:kn(n,s),folderId:t})]}),{shouldReturnTrue:!0})}async function nr(){const e=await Ba(new de.Api.messages.GetDialogFilters);if(!e)return;const t=e.findIndex((e=>e instanceof de.Api.DialogFilterDefault)),n=e.filter(Ne),s=n.map((({id:e})=>e));return-1!==t&&s.splice(t,0,$),{byId:ze(n.map(gn),"id"),orderedIds:s}}async function sr(){const e=await Ba(new de.Api.messages.GetSuggestedDialogFilters);if(e)return e.map(An).filter(Boolean)}async function ir({id:e,folderUpdate:t}){t.excludedChatIds=t.excludedChatIds.filter((e=>!t.includedChatIds.includes(e)));const n=function(e){const{emoticon:t,contacts:n,nonContacts:s,groups:i,channels:a,bots:o,excludeArchived:r,excludeMuted:d,excludeRead:c,pinnedChatIds:u,includedChatIds:f,excludedChatIds:p}=e,l=u?u.map(En).filter(Boolean):[],h=f?f.map(En).filter(Boolean):[],m=p?p.map(En).filter(Boolean):[];return e.isChatList?new de.Api.DialogFilterChatlist({id:e.id,title:e.title,emoticon:t||void 0,pinnedPeers:l,includePeers:h,hasMyInvites:e.hasMyInvites}):new de.Api.DialogFilter({id:e.id,title:e.title,emoticon:t||void 0,contacts:n||void 0,nonContacts:s||void 0,groups:i||void 0,bots:o||void 0,excludeArchived:r||void 0,excludeMuted:d||void 0,excludeRead:c||void 0,broadcasts:a||void 0,pinnedPeers:l,includePeers:h,excludePeers:m})}(t);await Ba(new de.Api.messages.UpdateDialogFilter({id:e,filter:n}))&&ho({"@type":"updateChatFolder",id:e,folder:t})}async function ar(e){const t=await Ba(new de.Api.messages.UpdateDialogFilter({id:e,filter:void 0})),n=await sr();t&&ho({"@type":"updateChatFolder",id:e,folder:void 0}),n&&ho({"@type":"updateRecommendedChatFolders",folders:n})}function or(e){return Ba(new de.Api.messages.UpdateDialogFiltersOrder({order:e}))}async function rr({chat:e,hasUnreadMark:t}){const{id:n,accessHash:s}=e;await Ba(new de.Api.messages.MarkDialogUnread({peer:new de.Api.InputDialogPeer({peer:kn(n,s)}),unread:t||void 0}))&&ho({"@type":"updateChat",id:e.id,chat:{hasUnreadMark:t}})}async function dr(e){return ur(await Ba(new de.Api.contacts.ResolvePhone({phone:e})))}async function cr(e){return ur(await Ba(new de.Api.contacts.ResolveUsername({username:e})))}function ur(e){if(!e)return;const{users:t,chats:n}=e,s=n.length?rn(n[0]):rn(t[0]);return s?(Br(e),{chat:s,user:Ms(t[0])}):void 0}function fr({chat:e,isEnabled:t}){const{id:n,accessHash:s}=e,i=xn(n,s);return Ba(new de.Api.channels.TogglePreHistoryHidden({channel:i,enabled:t}),{shouldReturnTrue:!0})}function pr({chat:e,bannedRights:t}){const{id:n,accessHash:s}=e,i=kn(n,s);return Ba(new de.Api.messages.EditChatDefaultBannedRights({peer:i,bannedRights:Wn(t)}),{shouldReturnTrue:!0})}function lr({chat:e,user:t,bannedRights:n,untilDate:s}){const i=xn(e.id,e.accessHash),a=kn(t.id,t.accessHash);return Ba(new de.Api.channels.EditBanned({channel:i,participant:a,bannedRights:Wn(n,s)}),{shouldReturnTrue:!0})}function hr({chat:e,user:t,adminRights:n,customTitle:s=""}){const i=xn(e.id,e.accessHash),a=xn(t.id,t.accessHash);return Ba(new de.Api.channels.EditAdmin({channel:i,userId:a,adminRights:Jn(n),rank:s}),{shouldReturnTrue:!0})}async function mr(e,t){const n=xn(e.id,e.accessHash);await Ba(n instanceof de.Api.InputChannel?new de.Api.channels.EditTitle({channel:n,title:t}):new de.Api.messages.EditChatTitle({chatId:n,title:t}),{shouldReturnTrue:!0})}async function gr(e,t){await Ba(new de.Api.messages.EditChatAbout({peer:kn(e.id,e.accessHash),about:t}))&&ho({"@type":"updateChatFullInfo",id:e.id,fullInfo:{about:t}})}function Ar({chat:e,isEnabled:t}){const{id:n,accessHash:s}=e,i=xn(n,s);return Ba(new de.Api.channels.ToggleSignatures({channel:i,enabled:t}),{shouldReturnTrue:!0})}async function yr(e,t,n="recent",s){let i;switch(n){case"kicked":i=new de.Api.ChannelParticipantsKicked({q:""});break;case"admin":i=new de.Api.ChannelParticipantsAdmins;break;default:i=new de.Api.ChannelParticipantsRecent}const a=await Ba(new de.Api.channels.GetParticipants({channel:xn(e,t),filter:i,offset:s,limit:A}),{abortControllerChatId:e});if(!a||a instanceof de.Api.channels.ChannelParticipantsNotModified)return;Br(a);const{users:o,userStatusesById:r}=Bs(a.users);return{members:hn(a),users:o,userStatusesById:r}}async function wr(){const e=await Ba(new de.Api.channels.GetGroupsForDiscussion);if(e)return Br(e),e.chats.map((e=>rn(e)))}function Ir({channel:e,chat:t}){return Ba(new de.Api.channels.SetDiscussionGroup({broadcast:kn(e.id,e.accessHash),group:t?kn(t.id,t.accessHash):new de.Api.InputChannelEmpty}),{shouldReturnTrue:!0})}async function Sr(e){const t=await Ba(new de.Api.messages.MigrateChat({chatId:xn(e.id)}),{shouldThrow:!0});if(!(t&&t instanceof de.Api.Updates))return void(d&&console.error("Unexpected channel creation update",t));Br(t);const n=t.updates.find((e=>e instanceof de.Api.UpdateChannel)).channelId;return rn(t.chats.find((e=>e instanceof de.Api.Channel&&e.id.toString()===n.toString())))}async function br(e){const t=await Ba(new de.Api.messages.CheckChatInvite({hash:e}));if(!t)return;let n;if(t instanceof de.Api.ChatInvite){const{photo:n,participantsCount:s,title:i,channel:a,requestNeeded:o,about:r,megagroup:d}=t;n instanceof de.Api.Photo&&_e(t.photo),ho({"@type":"showInvite",data:{title:i,about:r,hash:e,participantsCount:s,isChannel:a&&!d,isRequestNeeded:o,...n instanceof de.Api.Photo&&{photo:ct(n)}}})}else n=rn(t.chat),n&&ho({"@type":"updateChat",id:n.id,chat:n});return n?{chatId:n.id}:void 0}async function vr(e,t){try{if("chatTypeChannel"===e.type||"chatTypeSuperGroup"===e.type)try{const n=await Ba(new de.Api.channels.InviteToChannel({channel:xn(e.id,e.accessHash),users:t.map((e=>xn(e.id,e.accessHash)))}),{shouldIgnoreUpdates:!0,shouldThrow:!0});if(n)return Gi(n),Zr(n)}catch(e){if("USER_PRIVACY_RESTRICTED"===e.message)return t.map((({id:e})=>e));throw e}const n=await Promise.all(t.map((async t=>{try{const n=await Ba(new de.Api.messages.AddChatUser({chatId:xn(e.id),userId:xn(t.id,t.accessHash)}),{shouldIgnoreUpdates:!0,shouldThrow:!0});return n?(Gi(n),Zr(n)):void 0}catch(e){if("USER_PRIVACY_RESTRICTED"===e.message)return[t.id];throw e}})));if(n)return n.flat().filter(Boolean)}catch(e){ho({"@type":"error",error:{message:e.message}})}}function Cr(e,t){return"chatTypeChannel"===e.type||"chatTypeSuperGroup"===e.type?lr({chat:e,user:t,bannedRights:{viewMessages:!0,sendMessages:!0,sendMedia:!0,sendStickers:!0,sendGifs:!0,sendGames:!0,sendInline:!0,embedLinks:!0,sendPolls:!0,changeInfo:!0,inviteUsers:!0,pinMessages:!0,manageTopics:!0,sendPhotos:!0,sendVideos:!0,sendRoundvideos:!0,sendAudios:!0,sendVoices:!0,sendDocs:!0,sendPlain:!0},untilDate:E}):Ba(new de.Api.messages.DeleteChatUser({chatId:xn(e.id),userId:xn(t.id,t.accessHash)}),{shouldReturnTrue:!0})}function Pr(e,t){return Ba(new de.Api.channels.ToggleJoinToSend({channel:xn(e.id,e.accessHash),enabled:t}),{shouldReturnTrue:!0})}function Mr(e,t){return Ba(new de.Api.channels.ToggleJoinRequest({channel:xn(e.id,e.accessHash),enabled:t}),{shouldReturnTrue:!0})}function Ur(e,t){const n={};return e.chats?.forEach((e=>{const s=`chat${e.id}`;t?.[s]&&"min"in e&&e.min||(n[s]=e)})),e.users?.forEach((e=>{const s=`user${e.id}`;t?.[s]&&"min"in e&&e.min||(n[s]=e)})),n}function Br(e){"users"in e&&qe(e.users),"chats"in e&&qe(e.chats),"messages"in e&&e.messages.forEach((e=>{e instanceof de.Api.Message&&Vn(e)&&He(e)}))}async function Tr({hash:e}){const t=await Ba(new de.Api.messages.ImportChatInvite({hash:e}));if(t instanceof de.Api.Updates&&t.chats.length)return rn(t.chats[0])}function Dr({chat:e,enabledReactions:t}){return Ba(new de.Api.messages.SetChatAvailableReactions({peer:kn(e.id,e.accessHash),availableReactions:(n=t,"all"===n?.type?new de.Api.ChatReactionsAll({allowCustom:n.areCustomAllowed}):"some"===n?.type?new de.Api.ChatReactionsSome({reactions:n.allowed.map(ns)}):new de.Api.ChatReactionsNone)}),{shouldReturnTrue:!0});var n}function Rr({chat:e,isProtected:t}){const{id:n,accessHash:s}=e;return Ba(new de.Api.messages.ToggleNoForwards({peer:kn(n,s),enabled:t}),{shouldReturnTrue:!0})}function kr({chat:e,isEnabled:t}){const{id:n,accessHash:s}=e;return Ba(new de.Api.channels.ToggleParticipantsHidden({channel:kn(n,s),enabled:t}),{shouldReturnTrue:!0})}function Er({chat:e,isEnabled:t}){const{id:n,accessHash:s}=e;return Ba(new de.Api.channels.ToggleForum({channel:kn(n,s),enabled:t}),{shouldReturnTrue:!0,shouldThrow:!0})}async function xr({chat:e,title:t,iconColor:n,iconEmojiId:s,sendAs:i}){const{id:a,accessHash:o}=e,r=await Ba(new de.Api.channels.CreateForumTopic({channel:kn(a,o),title:t,iconColor:n,iconEmojiId:s?ge()(s):void 0,sendAs:i?kn(i.id,i.accessHash):void 0,randomId:_n()}));if(r instanceof de.Api.Updates&&r.updates.length)return r.updates?.find((e=>e instanceof de.Api.UpdateMessageID))?.id}async function Nr({chat:e,query:t,offsetTopicId:n,offsetId:s,offsetDate:i,limit:a=R}){const{id:o,accessHash:r}=e,d=await Ba(new de.Api.channels.GetForumTopics({channel:kn(o,r),limit:a,q:t,offsetTopic:n,offsetId:s,offsetDate:i}));if(!d)return;Br(d);const{count:c,orderByCreateDate:u}=d,f=d.topics.map(vn).filter(Boolean),p=d.messages.map(gs).filter(Boolean);return ni(d.messages),{topics:f,messages:p,users:d.users.map(Ms).filter(Boolean),chats:d.chats.map((e=>rn(e))).filter(Boolean),count:c+1,shouldOrderByCreateDate:u,draftsById:d.topics.reduce(((e,t)=>(t instanceof de.Api.ForumTopic&&t.draft&&(e[t.id]=ys(t.draft)),e)),{}),readInboxMessageIdByTopicId:d.topics.reduce(((e,t)=>(t instanceof de.Api.ForumTopic&&t.readInboxMaxId&&(e[t.id]=t.readInboxMaxId),e)),{})}}async function Hr({chat:e,topicId:t}){const{id:n,accessHash:s}=e,i=await Ba(new de.Api.channels.GetForumTopicsByID({channel:kn(n,s),topics:[t]}));if(!(i?.topics.length&&i.topics[0]instanceof de.Api.ForumTopic))return;Br(i);const a=i.messages.map(gs).filter(Boolean);ni(i.messages);const o=i.users.map(Ms).filter(Boolean),r=i.chats.map((e=>rn(e))).filter(Boolean);return{topic:vn(i.topics[0]),messages:a,users:o,chats:r}}async function Gr({chat:e,topicId:t}){const{id:n,accessHash:s}=e,i=await Ba(new de.Api.channels.DeleteTopicHistory({channel:kn(n,s),topMsgId:t}));i&&(Ki(e,i),i.offset&&await Gr({chat:e,topicId:t}))}function Fr({chat:e,topicId:t,isPinned:n}){const{id:s,accessHash:i}=e;return Ba(new de.Api.channels.UpdatePinnedForumTopic({channel:kn(s,i),topicId:t,pinned:n}),{shouldReturnTrue:!0})}function _r({chat:e,topicId:t,title:n,iconEmojiId:s,isClosed:i,isHidden:a}){const{id:o,accessHash:r}=e;return Ba(new de.Api.channels.EditForumTopic({channel:kn(o,r),topicId:t,title:n,iconEmojiId:t!==Q&&s?ge()(s):void 0,closed:i,hidden:a}),{shouldReturnTrue:!0})}async function Or({slug:e}){const t=await Ba(new de.Api.chatlists.CheckChatlistInvite({slug:e})),n=function(e,t){return e instanceof de.Api.chatlists.ChatlistInvite?{slug:t,title:e.title,emoticon:e.emoticon,peerIds:e.peers.map(pe).filter(Boolean)}:e instanceof de.Api.chatlists.ChatlistInviteAlready?{slug:t,folderId:e.filterId,missingPeerIds:e.missingPeers.map(pe).filter(Boolean),alreadyPeerIds:e.alreadyPeers.map(pe).filter(Boolean)}:void 0}(t,e);if(t&&n)return Br(t),{invite:n,users:t.users.map(Ms).filter(Boolean),chats:t.chats.map((e=>rn(e))).filter(Boolean)}}function qr({slug:e,peers:t}){return Ba(new de.Api.chatlists.JoinChatlistInvite({slug:e,peers:t.map((e=>kn(e.id,e.accessHash)))}),{shouldReturnTrue:!0,shouldThrow:!0})}async function jr({folderId:e}){const t=await Ba(new de.Api.chatlists.GetLeaveChatlistSuggestions({chatlist:new de.Api.InputChatlistDialogFilter({filterId:e})}));if(t)return t.map(pe)}function Vr({folderId:e,peers:t}){return Ba(new de.Api.chatlists.LeaveChatlist({chatlist:new de.Api.InputChatlistDialogFilter({filterId:e}),peers:t.map((e=>kn(e.id,e.accessHash)))}),{shouldReturnTrue:!0})}async function Lr({folderId:e,title:t,peers:n}){const s=await Ba(new de.Api.chatlists.ExportChatlistInvite({chatlist:new de.Api.InputChatlistDialogFilter({filterId:e}),title:t||"",peers:n.map((e=>kn(e.id,e.accessHash)))}),{shouldThrow:!0});if(s&&!(s.filter instanceof de.Api.DialogFilterDefault))return{filter:gn(s.filter),invite:Cn(s.invite)}}function zr({folderId:e,slug:t}){return Ba(new de.Api.chatlists.DeleteExportedInvite({chatlist:new de.Api.InputChatlistDialogFilter({filterId:e}),slug:t}))}async function Wr({folderId:e,slug:t,title:n,peers:s}){const i=await Ba(new de.Api.chatlists.EditExportedInvite({chatlist:new de.Api.InputChatlistDialogFilter({filterId:e}),slug:t,title:n,peers:s.map((e=>kn(e.id,e.accessHash)))}),{shouldThrow:!0});if(i)return Cn(i)}async function Jr({folderId:e}){const t=await Ba(new de.Api.chatlists.GetExportedInvites({chatlist:new de.Api.InputChatlistDialogFilter({filterId:e})}));if(t)return Br(t),{invites:t.invites.map(Cn).filter(Boolean),users:t.users.map(Ms).filter(Boolean),chats:t.chats.map((e=>rn(e))).filter(Boolean)}}function $r({chat:e,isEnabled:t}){return Ba(new de.Api.messages.TogglePeerTranslations({disabled:!t||void 0,peer:kn(e.id,e.accessHash)}))}function Kr({chat:e,isEnabled:t}){const{id:n,accessHash:s}=e,i=xn(n,s);return Ba(new de.Api.channels.ToggleViewForumAsMessages({channel:i,enabled:Boolean(t)}),{shouldReturnTrue:!0})}async function Yr({chat:e}){const{id:t,accessHash:n}=e,s=xn(t,n),i=await Ba(new de.Api.channels.GetChannelRecommendations({channel:s}));if(i)return Br(i),{similarChannels:i?.chats.map((e=>rn(e))).filter(Boolean),count:i instanceof de.Api.messages.ChatsSlice?i.count:void 0}}function Zr(e){if(!(e instanceof de.Api.Updates||e instanceof de.Api.UpdatesCombined))return;const t=e.updates.filter((e=>e instanceof de.Api.UpdateGroupInvitePrivacyForbidden));return 0!==t.length?t.map((e=>fe(e.userId,"user"))):void 0}async function Qr({peer:e,reason:t,description:n}){return await Ba(new de.Api.account.ReportPeer({peer:kn(e.id,e.accessHash),reason:Yn(t),message:n}))}async function Xr({peer:e,photo:t,reason:n,description:s}){const i=Ln(t);if(i)return await Ba(new de.Api.account.ReportProfilePhoto({peer:kn(e.id,e.accessHash),photoId:i,reason:Yn(n),message:s}))}async function ed({hash:e,areCallsEnabled:t,areSecretChatsEnabled:n,isConfirmed:s}){return await Ba(new de.Api.account.ChangeAuthorizationSettings({hash:ge()(e),...void 0!==t?{callRequestsDisabled:!t}:void 0,...void 0!==n?{encryptedRequestsDisabled:!n}:void 0,...s&&{confirmed:s}}))}async function td({days:e}){return await Ba(new de.Api.account.SetAuthorizationTTL({authorizationTtlDays:e}))}function nd(e,t,n){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?s:String(s))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}"undefined"==typeof File&&(self.File=class extends Blob{constructor(e,t,n){if(n){const{type:t,...s}=n;super(e,{type:t}),nd(this,"name",void 0),Object.assign(this,s)}else super(e),nd(this,"name",void 0);this.name=t}});var sd=n(48764).lW;const id=1e3,ad=63;let od;async function rd({chat:e,threadId:t,offsetId:n,isSavedDialog:s,...i}){const a=t===st._f?de.Api.messages.GetHistory:s?de.Api.messages.GetSavedHistory:de.Api.messages.GetReplies;let o;try{o=await Ba(new a({peer:kn(e.id,e.accessHash),...t!==st._f&&!s&&{msgId:Number(t)},...n&&{offsetId:Math.min(n,E)},...i}),{shouldThrow:!0,abortControllerChatId:e.id,abortControllerThreadId:t})}catch(t){"CHANNEL_PRIVATE"===t.message&&od({"@type":"updateChat",id:e.id,chat:{isRestricted:!0}})}if(!o||o instanceof de.Api.messages.MessagesNotModified||!o.messages)return;Fd(o);const r=o.messages.map(gs).filter(Boolean),d=o.users.map(Ms).filter(Boolean),c=o.chats.map((e=>rn(e))).filter(Boolean);return ni(o.messages),{messages:r,users:d,chats:c}}async function dd({chat:e,messageId:t}){const n="channel"===Dn(e.id);let s;try{s=await Ba(n?new de.Api.channels.GetMessages({channel:xn(e.id,e.accessHash),id:[new de.Api.InputMessageID({id:t})]}):new de.Api.messages.GetMessages({id:[new de.Api.InputMessageID({id:t})]}),{shouldThrow:!0,abortControllerChatId:e.id})}catch(e){const{message:t}=e;"CHANNEL_PRIVATE"!==t&&od({"@type":"error",error:{message:t,isSlowMode:!1,hasErrorKey:!0}})}if(!s||s instanceof de.Api.messages.MessagesNotModified)return;"pts"in s&&Fi(e.id,s.pts);const i=s.messages[0];if(!i)return;if(i instanceof de.Api.MessageEmpty)return st._Q;const a=i&&gs(i);return ni([i]),a?(i instanceof de.Api.Message&&He(i),{message:a,users:s.users.map(Ms).filter(Boolean)}):void 0}let cd=Promise.resolve();function ud({chat:e,lastMessageId:t,text:n,entities:s,replyInfo:i,attachment:a,sticker:o,story:r,gif:c,poll:u,contact:f,isSilent:p,scheduledAt:l,groupedId:h,noWebPage:m,sendAs:g,shouldUpdateStickerSetOrder:A,wasDrafted:y},w){const I=function(e,t,n,s,i,a,o,r,d,c,u,f,p,l){const h=hs(t),m=a&&function(e){const{filename:t,blobUrl:n,previewBlobUrl:s,mimeType:i,size:a,audio:o,shouldSendAsFile:r,shouldSendAsSpoiler:d}=e;if(!r){if(e.quick){if(q.has(i)){const{width:t,height:i}=e.quick;return{photo:{id:cs,sizes:[],thumbnail:{width:t,height:i,dataUri:s||n},blobUrl:n,isSpoiler:d}}}if(j.has(i)){const{width:o,height:r,duration:c}=e.quick;return{video:{id:cs,mimeType:i,duration:c||0,fileName:t,width:o,height:r,blobUrl:n,...s&&{thumbnail:{width:o,height:r,dataUri:s}},size:a,isSpoiler:d}}}}if(e.voice){const{duration:t,waveform:n}=e.voice,{data:s}=Mn(n,us);return{voice:{id:cs,duration:t,waveform:s}}}if(V.has(i)){const{duration:e,performer:n,title:s}=o||{};return{audio:{id:cs,mimeType:i,fileName:t,size:a,duration:e||0,title:s,performer:n}}}}return{document:{mimeType:i,fileName:t,size:a,...s&&{previewBlobUrl:s}}}}(a),g="chatTypeChannel"===e.type,A=i&&(I=i,S=e.isForum,"story"===I.type?{type:"story",userId:I.userId,storyId:I.storyId}:{type:"message",replyToMsgId:I.replyToMsgId,replyToTopId:I.replyToTopId,replyToPeerId:I.replyToPeerId,quoteText:I.quoteText,isForumTopic:!(!S||!I.replyToTopId)||void 0,...Boolean(I.quoteText)&&{isQuote:!0}}),y={id:h,chatId:e.id,content:{...n&&{text:{text:n,entities:s}},...m,...o&&{sticker:o},...r&&{video:r},...d&&Ss(d,h),...c&&{contact:c},...l&&{storyData:l}},date:f||Math.round(Date.now()/1e3)+et(),isOutgoing:!g,senderId:p?.id||ps,replyInfo:A,...u&&{groupedId:u,...m&&(m.photo||m.video)&&{isInAlbum:!0}},...f&&{isScheduled:!0},isForwardingAllowed:!0},w=(0,Pn.k)(y.content,y.groupedId);var I,S;return{...y,...w&&{emojiOnlyCount:w}}}(e,t,n,s,i,a,o,c,u,f,h,l,g,r);od({"@type":I.isScheduled?"newScheduledMessage":"newMessage",id:I.id,chatId:e.id,message:I,wasDrafted:y});const S=setTimeout((()=>{od({"@type":I.isScheduled?"updateScheduledMessage":"updateMessage",id:I.id,chatId:e.id,message:{sendingState:"messageSendingStatePending"}})}),id),b=_n();if(h)return function({chat:e,text:t,entities:n,replyInfo:s,attachment:i,groupedId:a,isSilent:o,scheduledAt:r,sendAs:c},u,f,p){let l=-1;fd[a]||(fd[a]={counter:0,singleMediaByIndex:{},localMessages:{}}),l=fd[a].counter++;const h=cd;return cd=(async()=>{let m;try{m=await hd(f,i,p)}catch(e){return d&&console.warn(e),fd[a].counter--,void await h}const g=await async function(e,t){const n=await Ba(new de.Api.messages.UploadMedia({peer:e,media:t})),s=t.spoiler;if(n instanceof de.Api.MessageMediaPhoto&&n.photo&&n.photo instanceof de.Api.Photo){const{photo:{id:e,accessHash:t,fileReference:i}}=n;return new de.Api.InputMediaPhoto({id:new de.Api.InputPhoto({id:e,accessHash:t,fileReference:i}),spoiler:s})}if(n instanceof de.Api.MessageMediaDocument&&n.document&&n.document instanceof de.Api.Document){const{document:{id:e,accessHash:t,fileReference:i}}=n;return new de.Api.InputMediaDocument({id:new de.Api.InputDocument({id:e,accessHash:t,fileReference:i}),spoiler:s})}}(kn(e.id,e.accessHash),m);if(await h,!g)return fd[a].counter--,void(d&&console.warn("Failed to upload grouped media"));if(fd[a].singleMediaByIndex[l]=new de.Api.InputSingleMedia({media:g,randomId:u,message:t||"",entities:n?n.map(jn):void 0}),fd[a].localMessages[u.toString()]=f,Object.keys(fd[a].singleMediaByIndex).length<fd[a].counter)return;const{singleMediaByIndex:A,localMessages:y}=fd[a];delete fd[a];const w=await Ba(new de.Api.messages.SendMultiMedia({clearDraft:!0,peer:kn(e.id,e.accessHash),multiMedia:Object.values(A),replyTo:s&&os(s),...o&&{silent:o},...r&&{scheduleDate:r},...c&&{sendAs:kn(c.id,c.accessHash)}}),{shouldIgnoreUpdates:!0});w&&Qd(y,w)})(),cd}({chat:e,text:n,entities:s,replyInfo:i,attachment:a,groupedId:h,isSilent:p,scheduledAt:l},b,I,w);const v=(async()=>{let t;if(a)try{t=await hd(I,a,w)}catch(e){return d&&console.warn(e),void await cd}else o?t=Gn(o):c?t=Gn(c):u?t=function(e,t){const{summary:n,quiz:s}=e,i=new de.Api.Poll({id:t,publicVoters:n.isPublic,question:n.question,answers:n.answers.map((({text:e,option:t})=>new de.Api.PollAnswer({text:e,option:Ve(t)}))),quiz:n.quiz,multipleChoice:n.multipleChoice});if(!s)return new de.Api.InputMediaPoll({poll:i});const a=s.correctAnswers.map(Ve),{solution:o}=s,r=s.solutionEntities?s.solutionEntities.map(jn):[];return new de.Api.InputMediaPoll({poll:i,correctAnswers:a,...o&&{solution:o,solutionEntities:r}})}(u,b):r?t=function(e){const t=En(e.peerId);return new de.Api.InputMediaStory({peer:t,id:e.id})}(r):f&&(t=new de.Api.InputMediaContact({phoneNumber:f.phoneNumber,firstName:f.firstName,lastName:f.lastName,vcard:""}));const h=t?de.Api.messages.SendMedia:de.Api.messages.SendMessage;try{const a=await Ba(new h({clearDraft:!0,message:n||"",entities:s?s.map(jn):void 0,peer:kn(e.id,e.accessHash),randomId:b,replyTo:i&&os(i),...p&&{silent:p},...l&&{scheduleDate:l},...t&&{media:t},...m&&{noWebpage:m},...g&&{sendAs:kn(g.id,g.accessHash)},...A&&{updateStickersetsOrder:A}}),{shouldThrow:!0,shouldIgnoreUpdates:!0});a&&Xd(I,a)}catch(t){od({"@type":"updateMessageSendFailed",chatId:e.id,localId:I.id,error:t.message}),clearTimeout(S)}})();return v}const fd={};async function pd({chat:e,message:t,text:n,entities:s,noWebPage:i}){const a=1e3*t.date>Date.now()+1e3*et();let o={content:{...t.content,...n&&{text:{text:n,entities:s}}}};const r=(0,Pn.k)(o.content,o.groupedId);o={...o,emojiOnlyCount:r},od({"@type":a?"updateScheduledMessage":"updateMessage",id:t.id,chatId:e.id,message:o});const d=s&&s.map(jn);await Ba(new de.Api.messages.EditMessage({message:n||"",entities:d,peer:kn(e.id,e.accessHash),id:t.id,...a&&{scheduleDate:t.date},...i&&{noWebpage:i}}))}async function ld({chat:e,message:t,scheduledAt:n}){await Ba(new de.Api.messages.EditMessage({peer:kn(e.id,e.accessHash),id:t.id,scheduleDate:n}))}async function hd(e,t,n){const{filename:s,blobUrl:i,mimeType:a,quick:o,voice:r,audio:d,previewBlobUrl:c,shouldSendAsFile:u,shouldSendAsSpoiler:f}=t,p=t=>{n.isCanceled?p.isCanceled=!0:n(t,e.id)},l=async(e,t)=>Ra(await async function(e,t){const n=await async function(e){return(await fetch(e)).blob()}(e);return function(e,t){return new File([e],t,{lastModified:Date.now(),type:e.type})}(n,t)}(e,s),t),h=j.has(a),m=d||h||u,[g,A]=await Promise.all(Ze([l(i,p),m&&c&&l(c)])),y=[new de.Api.DocumentAttributeFilename({fileName:s})];if(!u){if(o){if(q.has(a)&&a!==O)return new de.Api.InputMediaUploadedPhoto({file:g,spoiler:f});if(h){const{width:e,height:t,duration:n}=o;void 0!==n&&y.push(new de.Api.DocumentAttributeVideo({duration:n,w:e,h:t,supportsStreaming:!0}))}}if(d){const{duration:e,title:t,performer:n}=d;y.push(new de.Api.DocumentAttributeAudio({duration:e,title:t,performer:n}))}if(r){const{duration:e,waveform:t}=r,{data:n}=Mn(t,ad);y.push(new de.Api.DocumentAttributeAudio({voice:!0,duration:e,waveform:sd.from(n)}))}}return new de.Api.InputMediaUploadedDocument({file:g,mimeType:a,attributes:y,thumb:A,forceFile:u,spoiler:f})}async function md({chat:e,messageId:t,isUnpin:n,isOneSide:s,isSilent:i}){await Ba(new de.Api.messages.UpdatePinnedMessage({peer:kn(e.id,e.accessHash),id:t,...n&&{unpin:!0},...s&&{pmOneside:!0},...i&&{silent:!0}}))}async function gd({chat:e,threadId:t}){const n=await Ba(new de.Api.messages.UnpinAllMessages({peer:kn(e.id,e.accessHash),...t&&{topMsgId:Number(t)}}));n&&(Ki(e,n),n.offset&&await gd({chat:e,threadId:t}))}async function Ad({chat:e,messageIds:t,shouldDeleteForAll:n}){const s="channel"===Dn(e.id),i=await Ba(s?new de.Api.channels.DeleteMessages({channel:xn(e.id,e.accessHash),id:t}):new de.Api.messages.DeleteMessages({id:t,...n&&{revoke:!0}}));i&&(Ki(e,i),od({"@type":"deleteMessages",ids:t,...s&&{chatId:e.id}}))}function yd({chat:e,messageIds:t}){Ba(new de.Api.messages.DeleteScheduledMessages({peer:kn(e.id,e.accessHash),id:t}))}async function wd({chat:e,shouldDeleteForAll:t}){const n="channel"===Dn(e.id),s=await Ba(n?new de.Api.channels.DeleteHistory({channel:xn(e.id,e.accessHash)}):new de.Api.messages.DeleteHistory({peer:kn(e.id,e.accessHash),...t&&{revoke:!0},...!t&&{just_clear:!0}}));s&&("offset"in s&&(Ki(e,s),s.offset)?await wd({chat:e,shouldDeleteForAll:t}):od({"@type":"deleteHistory",chatId:e.id}))}async function Id({chat:e}){const t=await Ba(new de.Api.messages.DeleteSavedHistory({peer:kn(e.id,e.accessHash)}));t&&(Ki(e,t),t.offset?await Id({chat:e}):od({"@type":"deleteSavedHistory",chatId:e.id}))}async function Sd({peer:e,messageIds:t,reason:n,description:s}){return await Ba(new de.Api.messages.Report({peer:kn(e.id,e.accessHash),id:t,reason:Yn(n),message:s}))}async function bd({peer:e,threadId:t,action:n}){const s=function(e){switch(e.type){case"cancel":return new de.Api.SendMessageCancelAction;case"typing":return new de.Api.SendMessageTypingAction;case"recordAudio":return new de.Api.SendMessageRecordAudioAction;case"chooseSticker":return new de.Api.SendMessageChooseStickerAction;case"playingGame":return new de.Api.SendMessageGamePlayAction}}(n);if(s)try{return await Ba(new de.Api.messages.SetTyping({peer:kn(e.id,e.accessHash),topMsgId:Number(t),action:s}),{shouldThrow:!0,abortControllerChatId:e.id,abortControllerThreadId:t})}catch(e){}else d&&console.warn("Unsupported message action",n)}async function vd({chat:e,threadId:t,maxId:n=0}){const s="channel"===Dn(e.id),i=Math.min(n,E);if(s&&t===st._f)await Ba(new de.Api.channels.ReadHistory({channel:xn(e.id,e.accessHash),maxId:i}));else if(s)await Ba(new de.Api.messages.ReadDiscussion({peer:kn(e.id,e.accessHash),msgId:Number(t),readMaxId:i}));else{const t=await Ba(new de.Api.messages.ReadHistory({peer:kn(e.id,e.accessHash),maxId:i}));t&&Ki(e,t)}t===st._f&&qo({chat:e,noLastMessage:!0})}async function Cd({chat:e,messageIds:t}){const n="channel"===Dn(e.id),s=await Ba(n?new de.Api.channels.ReadMessageContents({channel:xn(e.id,e.accessHash),id:t}):new de.Api.messages.ReadMessageContents({id:t}));s&&(!0!==s&&Ki(e,s),od({...n?{"@type":"updateChannelMessages",channelId:e.id}:{"@type":"updateCommonBoxMessages"},ids:t,messageUpdate:{hasUnreadMention:!1,isMediaUnread:!1}}))}async function Pd({chat:e,ids:t,shouldIncrement:n}){const s=Qe(t,C),i=await Promise.all(s.map((t=>Ba(new de.Api.messages.GetMessagesViews({peer:kn(e.id,e.accessHash),id:t,increment:n})))));if(!i||i.find((e=>!e)))return;const a=i.flatMap((e=>e.views)),o=i.flatMap((e=>e.users)),r=i.flatMap((e=>e.chats));return{viewsInfo:t.map(((t,n)=>{const{views:s,forwards:i,replies:o}=a[n];return{id:t,views:s,forwards:i,threadInfo:o?vs(o,t,e.id):void 0}})),users:o.map(Ms).filter(Boolean),chats:r.map((e=>rn(e))).filter(Boolean)}}async function Md({chat:e,messageId:t}){const[n,s]=await Promise.all([Ba(new de.Api.messages.GetDiscussionMessage({peer:kn(e.id,e.accessHash),msgId:t}),{abortControllerChatId:e.id,abortControllerThreadId:t}),rd({chat:e,threadId:t,offsetId:1,addOffset:-1,limit:1})]);if(!n||!s)return;Fd(n);const i=n.chats.map((e=>rn(e))).filter(Boolean).concat(s.chats),a=n.users.map(Ms).filter(Boolean).concat(s.users),o=n.messages.map(gs).filter(Boolean),r=o.concat(s.messages),d=n.messages[n.messages.length-1]?.id;if(!d)return;ni(n.messages);const{unreadCount:c,maxId:u,readInboxMaxId:f,readOutboxMaxId:p}=n;return{chats:i,users:a,messages:r,topMessages:o,unreadCount:c,threadId:d,lastReadInboxMessageId:f,lastReadOutboxMessageId:p,lastMessageId:u,chatId:o[0]?.chatId,firstMessageId:s.messages[0]?.id}}async function Ud({chat:e,isSavedDialog:t,type:n,query:s,threadId:i,minDate:a,maxDate:o,...r}){let d;switch(n){case"media":d=new de.Api.InputMessagesFilterPhotoVideo;break;case"documents":d=new de.Api.InputMessagesFilterDocument;break;case"links":d=new de.Api.InputMessagesFilterUrl;break;case"audio":d=new de.Api.InputMessagesFilterMusic;break;case"voice":d=new de.Api.InputMessagesFilterRoundVoice;break;case"profilePhoto":d=new de.Api.InputMessagesFilterChatPhotos;break;default:d=new de.Api.InputMessagesFilterEmpty}const c=kn(e.id,e.accessHash),u=await Ba(new de.Api.messages.Search({peer:t?new de.Api.InputPeerSelf:c,savedPeerId:t?c:void 0,topMsgId:i===st._f||t?void 0:Number(i),filter:d,q:s||"",minDate:a,maxDate:o,...r}),{abortControllerChatId:e.id,abortControllerThreadId:i});if(!u||u instanceof de.Api.messages.MessagesNotModified||!u.messages)return;Fd(u);const f=u.chats.map((e=>rn(e))).filter(Boolean),p=u.users.map(Ms).filter(Boolean),l=u.messages.map(gs).filter(Boolean);ni(u.messages);let h,m=l.length;return(u instanceof de.Api.messages.MessagesSlice||u instanceof de.Api.messages.ChannelMessages)&&(m=u.count,l.length&&(h=l[l.length-1].id)),{chats:f,users:p,messages:l,totalCount:m,nextOffsetId:h}}async function Bd({query:e,offsetRate:t=0,limit:n,type:s="text",minDate:i,maxDate:a}){let o;switch(s){case"media":o=new de.Api.InputMessagesFilterPhotoVideo;break;case"documents":o=new de.Api.InputMessagesFilterDocument;break;case"links":o=new de.Api.InputMessagesFilterUrl;break;case"audio":o=new de.Api.InputMessagesFilterMusic;break;case"voice":o=new de.Api.InputMessagesFilterRoundVoice;break;default:if(!(e||a&&i))return;o=new de.Api.InputMessagesFilterEmpty}const r=await Ba(new de.Api.messages.SearchGlobal({q:e,offsetRate:t,offsetPeer:new de.Api.InputPeerEmpty,limit:n,filter:o,folderId:$,minDate:i,maxDate:a}));if(!r||r instanceof de.Api.messages.MessagesNotModified||!r.messages)return;Fd({chats:r.chats,users:r.users,messages:r.messages});const d=r.chats.map((e=>rn(e))).filter(Boolean),c=r.users.map(Ms).filter(Boolean),u=r.messages.map(gs).filter(Boolean);ni(r.messages);let f,p=u.length;return(r instanceof de.Api.messages.MessagesSlice||r instanceof de.Api.messages.ChannelMessages)&&(p=r.count,u.length&&(f=u[u.length-1].id)),{messages:u,users:c,chats:d,totalCount:p,nextRate:"nextRate"in r&&r.nextRate?r.nextRate:f}}async function Td({text:e}){const t=is(e),n=await Ba(new de.Api.messages.GetWebPagePreview({message:t.text,entities:t.entities}));return n&&Dt(n)}async function Dd({chat:e,messageId:t,options:n}){const{id:s,accessHash:i}=e;await Ba(new de.Api.messages.SendVote({peer:kn(s,i),msgId:t,options:n.map(Ve)}))}async function Rd({chat:e,messageId:t,poll:n}){const{id:s,accessHash:i}=e;await Ba(new de.Api.messages.EditMessage({peer:kn(s,i),id:t,media:Fn(n,!0)}))}async function kd({chat:e,messageId:t,option:n,offset:s,limit:i,shouldResetVoters:a}){const{id:o,accessHash:r}=e,d=await Ba(new de.Api.messages.GetPollVotes({peer:kn(o,r),id:t,...n&&{option:Ve(n)},...s&&{offset:s},...i&&{limit:i}}));if(!d)return;Fd({chats:d.chats,users:d.users,messages:[]});const c=d.users.map(Ms).filter(Boolean),u=d.chats.map((e=>rn(e))).filter(Boolean),f=d.votes.map((e=>({peerId:pe(e.peer),date:e.date})));return{count:d.count,votes:f,chats:u,users:c,nextOffset:d.nextOffset,shouldResetVoters:a}}async function Ed({chat:e,ids:t}){await Ba(new de.Api.messages.GetExtendedMedia({peer:kn(e.id,e.accessHash),id:t}))}async function xd({fromChat:e,toChat:t,toThreadId:n,messages:s,isSilent:i,scheduledAt:a,sendAs:o,withMyScore:r,noAuthors:d,noCaptions:c,isCurrentUserPremium:u,wasDrafted:f,lastMessageId:p}){const l=s.map((({id:e})=>e)),h=s.map(_n),m={};s.forEach(((e,s)=>{const i=function({toChat:e,toThreadId:t,message:n,scheduledAt:s,noAuthors:i,noCaptions:a,isCurrentUserPremium:o,lastMessageId:r}){const d=hs(r),{content:c,chatId:u,id:f,senderId:p,groupedId:l,isInAlbum:h}=n,m=c.audio,g=e.id===ps&&(u!==e.id||n.forwardInfo)&&!m,A=Object.keys(c).length>1&&c.text&&a,y=!o,w=c.text?.entities&&y?{text:c.text.text,entities:c.text.entities.filter((e=>e.type!==st.Vv.CustomEmoji))}:c.text,I=(0,Pn.k)(c,l),S={...c,text:A?void 0:w},b=t===st._f,v=t&&!b?{type:"message",replyToMsgId:t,replyToTopId:t,isForumTopic:e.isForum||void 0}:void 0;return{id:d,chatId:e.id,content:S,date:s||Math.round(Date.now()/1e3)+et(),isOutgoing:!g&&"chatTypeChannel"!==e.type,senderId:ps,sendingState:"messageSendingStatePending",groupedId:l,isInAlbum:h,isForwardingAllowed:!0,replyInfo:v,...t&&e?.isForum&&{isTopicReply:!0},...I&&{emojiOnlyCount:I},...n.chatId!==ps&&!m&&!i&&{forwardInfo:{date:n.forwardInfo?.date||n.date,savedDate:n.date,isChannelPost:!1,fromChatId:u,fromMessageId:f,fromId:p,savedFromPeerId:n.chatId}},...n.chatId===ps&&!i&&{forwardInfo:n.forwardInfo},...s&&{isScheduled:!0}}}({toChat:t,toThreadId:Number(n),message:e,scheduledAt:a,noAuthors:d,noCaptions:c,isCurrentUserPremium:u,lastMessageId:p});m[h[s].toString()]=i,od({"@type":i.isScheduled?"newScheduledMessage":"newMessage",id:i.id,chatId:t.id,message:i,wasDrafted:f})}));try{const s=await Ba(new de.Api.messages.ForwardMessages({fromPeer:kn(e.id,e.accessHash),toPeer:kn(t.id,t.accessHash),randomId:h,id:l,withMyScore:r||void 0,silent:i||void 0,dropAuthor:d||void 0,dropMediaCaptions:c||void 0,...n&&{topMsgId:Number(n)},...a&&{scheduleDate:a},...o&&{sendAs:kn(o.id,o.accessHash)}}),{shouldThrow:!0,shouldIgnoreUpdates:!0});s&&Qd(m,s)}catch(e){Object.values(m).forEach((n=>{od({"@type":"updateMessageSendFailed",chatId:t.id,localId:n.id,error:e.message})}))}}async function Nd({chat:e,timestamp:t}){const n=await Ba(new de.Api.messages.GetHistory({peer:kn(e.id,e.accessHash),offsetDate:t,addOffset:-1,limit:1}));if(n&&!(n instanceof de.Api.messages.MessagesNotModified)&&n.messages&&n.messages.length)return n.messages[0].id}async function Hd({chat:e}){const{id:t,accessHash:n}=e,s=await Ba(new de.Api.messages.GetScheduledHistory({peer:kn(t,n)}),{abortControllerChatId:t});if(!s||s instanceof de.Api.messages.MessagesNotModified||!s.messages)return;Fd(s);const i=s.messages.map(gs).filter(Boolean);return ni(s.messages),{messages:i}}async function Gd({chat:e,ids:t}){const{id:n,accessHash:s}=e;await Ba(new de.Api.messages.SendScheduledMessages({peer:kn(n,s),id:t}))}function Fd(e){qe(e.users),qe(e.chats),e.messages.forEach((e=>{(e instanceof de.Api.Message&&Vn(e)||e instanceof de.Api.MessageService&&function(e){return"photo"in e.action&&e.action.photo instanceof de.Api.Photo}(e))&&He(e)}))}async function _d({chat:e,threadId:t}){const n=await Ba(new de.Api.messages.Search({peer:kn(e.id,e.accessHash),filter:new de.Api.InputMessagesFilterPinned,q:"",limit:y,topMsgId:Number(t)}),{abortControllerChatId:e.id,abortControllerThreadId:t});if(!n||n instanceof de.Api.messages.MessagesNotModified||!n.messages)return;Fd(n);const s=n.chats.map((e=>rn(e))).filter(Boolean),i=n.users.map(Ms).filter(Boolean),a=n.messages.map(gs).filter(Boolean);return ni(n.messages),{messages:a,users:i,chats:s}}async function Od({chat:e,messageId:t}){const n=await Ba(new de.Api.messages.GetMessageReadParticipants({peer:kn(e.id,e.accessHash),msgId:t}));return n?n.reduce(((e,t)=>(e[t.userId.toString()]=t.date,e)),{}):void 0}async function qd({chat:e}){const t=await Ba(new de.Api.channels.GetSendAs({peer:kn(e.id,e.accessHash)}),{shouldIgnoreErrors:!0,abortControllerChatId:e.id});if(t)return qe(t.users),qe(t.chats),{users:t.users.map(Ms).filter(Boolean),chats:t.chats.map((e=>rn(e))).filter(Boolean),sendAs:t.peers.map(bn)}}function jd({sendAs:e,chat:t}){return Ba(new de.Api.messages.SaveDefaultSendAs({peer:kn(t.id,t.accessHash),sendAs:kn(e.id,e.accessHash)}))}async function Vd({chat:e}){const t=await Ba(new de.Api.channels.GetSponsoredMessages({channel:kn(e.id,e.accessHash)}));if(t&&!(t instanceof de.Api.messages.SponsoredMessagesEmpty)&&t.messages.length)return Fd(t),{messages:t.messages.map(ms).filter(Boolean),users:t.users.map(Ms).filter(Boolean),chats:t.chats.map((e=>rn(e))).filter(Boolean)}}async function Ld({chat:e,random:t}){await Ba(new de.Api.channels.ViewSponsoredMessage({channel:kn(e.id,e.accessHash),randomId:Ve(t)}))}function zd({chat:e,random:t}){return Ba(new de.Api.channels.ClickSponsoredMessage({channel:kn(e.id,e.accessHash),randomId:Ve(t)}))}async function Wd({chat:e}){const t=await Ba(new de.Api.messages.ReadMentions({peer:kn(e.id,e.accessHash)}));t&&(Ki(e,t),t.offset&&await Wd({chat:e}))}async function Jd({chat:e}){const t=await Ba(new de.Api.messages.ReadReactions({peer:kn(e.id,e.accessHash)}));t&&(Ki(e,t),t.offset&&await Jd({chat:e}))}async function $d({chat:e,...t}){const n=await Ba(new de.Api.messages.GetUnreadMentions({peer:kn(e.id,e.accessHash),limit:D,...t}));if(!n||n instanceof de.Api.messages.MessagesNotModified||!n.messages)return;Fd(n);const s=n.messages.map(gs).filter(Boolean);return ni(n.messages),{messages:s,users:n.users.map(Ms).filter(Boolean),chats:n.chats.map((e=>rn(e))).filter(Boolean)}}async function Kd({chat:e,...t}){const n=await Ba(new de.Api.messages.GetUnreadReactions({peer:kn(e.id,e.accessHash),limit:T,...t}));if(!n||n instanceof de.Api.messages.MessagesNotModified||!n.messages)return;Fd(n);const s=n.messages.map(gs).filter(Boolean);return ni(n.messages),{messages:s,users:n.users.map(Ms).filter(Boolean),chats:n.chats.map((e=>rn(e))).filter(Boolean)}}async function Yd({chat:e,messageId:t}){const n=await Ba(new de.Api.messages.TranscribeAudio({msgId:t,peer:kn(e.id,e.accessHash)}));if(n)return od({"@type":"updateTranscribedAudio",isPending:n.pending,transcriptionId:n.transcriptionId.toString(),text:n.text}),n.transcriptionId.toString()}async function Zd(e){let t;const n="chat"in e;if(n){const{chat:n,messageIds:s,toLanguageCode:i}=e;t=await Ba(new de.Api.messages.TranslateText({peer:kn(n.id,n.accessHash),id:s,toLang:i}))}else{const{text:n,toLanguageCode:s}=e;t=await Ba(new de.Api.messages.TranslateText({text:n.map((e=>is(e))),toLang:s}))}if(!t)return;const s=t.result.map((e=>function(e){const{text:t,entities:n}=e;return{text:t,entities:n.map(ht)}}(e)));return n&&od({"@type":"updateMessageTranslations",chatId:e.chat.id,messageIds:e.messageIds,translations:s,toLanguageCode:e.toLanguageCode}),s}function Qd(e,t){"updates"in t?t.updates.forEach((t=>{t instanceof de.Api.UpdateMessageID?Xd(e[t.randomId.toString()],t):Ua(t)})):Ua(t)}function Xd(e,t){let n,s;if(t instanceof de.Api.UpdateShortSentMessage||t instanceof de.Api.UpdateMessageID?n=t:"updates"in t&&(n=t.updates.find((e=>e instanceof de.Api.UpdateMessageID))),!n)return void Ua(t);if(n instanceof de.Api.UpdateShortSentMessage){e.content.text&&n.entities&&(s={text:vt(e.content.text.text,n.entities)}),n.media&&(s={...s,...Ct(n.media)});const t=qn(n.id,e.chatId,n);Vn(t)&&He(t)}const i="date"in n&&1e3*n.date<Date.now()+1e3*et();od({"@type":e.isScheduled&&!i?"updateScheduledMessageSendSucceeded":"updateMessageSendSucceeded",chatId:e.chatId,localId:e.id,message:{...e,...s&&{content:{...e.content,...s}},id:n.id,sendingState:void 0,..."date"in n&&{date:n.date}}}),Ua(t)}let ec,tc,nc,sc;async function ic({id:e,accessHash:t}){const n=xn(e,t);if(!(n instanceof de.Api.InputUser))return;const s=await Ba(new de.Api.users.GetFullUser({id:n}));if(!s)return;Ac(s),qe(s.users),s.fullUser.profilePhoto instanceof de.Api.Photo&&(Be.photos[s.fullUser.profilePhoto.id.toString()]=s.fullUser.profilePhoto),s.fullUser.personalPhoto instanceof de.Api.Photo&&(Be.photos[s.fullUser.personalPhoto.id.toString()]=s.fullUser.personalPhoto),s.fullUser.fallbackPhoto instanceof de.Api.Photo&&(Be.photos[s.fullUser.fallbackPhoto.id.toString()]=s.fullUser.fallbackPhoto);const i=s.fullUser.botInfo;i?.descriptionPhoto instanceof de.Api.Photo&&(Be.photos[i.descriptionPhoto.id.toString()]=i.descriptionPhoto),i?.descriptionDocument instanceof de.Api.Document&&(Be.documents[i.descriptionDocument.id.toString()]=i.descriptionDocument);const a=Ps(s),o=Ms(s.users[0]);return ec({"@type":"updateUser",id:e,user:{...o,avatarHash:o?.avatarHash||void 0},fullInfo:a}),{user:o,fullInfo:a}}async function ac(e,t,n){const s=await Ba(new de.Api.messages.GetCommonChats({userId:xn(e,t),maxId:n?Qn(n,Dn(n)):void 0,limit:S}));if(!s)return;Ac(s);const i=[],a=[];return s.chats.forEach((e=>{const t=rn(e);t&&(a.push(t),i.push(t.id))})),{chats:a,chatIds:i,isFullyLoaded:i.length<S}}async function oc(){const e=await Ba(new de.Api.help.GetNearestDc);return e?.country}async function rc(){const e=await Ba(new de.Api.contacts.GetTopPeers({correspondents:!0}));if(!(e instanceof de.Api.contacts.TopPeers))return;const t=e.users.map(Ms).filter((e=>Boolean(e)&&!e.isSelf));return{ids:t.map((({id:e})=>e)),users:t}}async function dc(){const e=await Ba(new de.Api.contacts.GetContacts({hash:ge()("0")}));if(!e||e instanceof de.Api.contacts.ContactsNotModified)return;qe(e.users);const{users:t,userStatusesById:n}=Bs(e.users);return{users:t,userStatusesById:n,chats:e.users.map((e=>rn(e))).filter(Boolean)}}async function cc({users:e}){const t=await Ba(new de.Api.users.GetUsers({id:e.map((({id:e,accessHash:t})=>kn(e,t)))}));if(t&&t.length)return qe(t),Bs(t)}async function uc({phone:e,firstName:t,lastName:n}){const s=await Ba(new de.Api.contacts.ImportContacts({contacts:[zn({phone:e||"",firstName:t||"",lastName:n||""})]}));return s instanceof de.Api.contacts.ImportedContacts&&s.users.length&&Oe(s.users[0]),s?.imported.length?fe(s.imported[0].userId,"user"):void 0}function fc({id:e,accessHash:t,phoneNumber:n="",firstName:s="",lastName:i="",shouldSharePhoneNumber:a=!1}){return Ba(new de.Api.contacts.AddContact({id:xn(e,t),firstName:s,lastName:i,phone:n,...a&&{addPhonePrivacyException:a}}),{shouldReturnTrue:!0})}async function pc({id:e,accessHash:t}){const n=xn(e,t);n instanceof de.Api.InputUser&&await Ba(new de.Api.contacts.DeleteContacts({id:[n]}))&&ec({"@type":"deleteContact",id:e})}async function lc(e,t){if(e){const{id:t,accessHash:n}=e,s=await Ba(new de.Api.photos.GetUserPhotos({userId:xn(t,n),limit:I,offset:0,maxId:ge()("0")}));if(!s)return;return Ac(s),{photos:s.photos.filter((e=>e instanceof de.Api.Photo)).map((e=>ct(e))),users:s.users.map(Ms).filter(Boolean)}}if(t?.isRestricted)return;const n=await Ud({chat:t,type:"profilePhoto",limit:I});if(!n)return;const{messages:s,users:i}=n;return{photos:s.map((e=>e.content.action.photo)).filter(Boolean),users:i}}function hc(e){const{id:t,accessHash:n}=e;return Ba(new de.Api.messages.ReportSpam({peer:kn(t,n)}),{shouldReturnTrue:!0})}function mc(e,t){return Ba(new de.Api.account.UpdateEmojiStatus({emojiStatus:ss(e,t)}),{shouldReturnTrue:!0})}function gc(e){const t=e.map((e=>Qn(e,"user")));return Ba(new de.Api.contacts.EditCloseFriends({id:t}),{shouldReturnTrue:!0})}function Ac(e){"chats"in e&&qe(e.chats),"photos"in e&&e.photos.forEach(_e),"users"in e&&qe(e.users)}async function yc({hash:e="0"}){const t=await Ba(new de.Api.messages.GetEmojiStickers({hash:ge()(e)}));if(t&&!(t instanceof de.Api.messages.AllStickersNotModified))return t.sets.forEach((e=>{(e.thumbs?.length||e.thumbDocumentId)&&(Be.stickerSets[String(e.id)]=e)})),{hash:String(t.hash),sets:t.sets.map(yt)}}async function wc({hash:e="0"}){const t=await Ba(new de.Api.messages.GetAllStickers({hash:ge()(e)}));if(t&&!(t instanceof de.Api.messages.AllStickersNotModified))return t.sets.forEach((e=>{e.thumbs?.length&&(Be.stickerSets[String(e.id)]=e)})),{hash:String(t.hash),sets:t.sets.map(yt)}}async function Ic({hash:e="0"}){const t=await Ba(new de.Api.messages.GetRecentStickers({hash:ge()(e)}));if(t&&!(t instanceof de.Api.messages.RecentStickersNotModified))return{hash:String(t.hash),stickers:St(t.stickers.slice(0,H))}}async function Sc({hash:e="0"}){const t=await Ba(new de.Api.messages.GetFavedStickers({hash:ge()(e)}));if(t&&!(t instanceof de.Api.messages.FavedStickersNotModified))return{hash:String(t.hash),stickers:St(t.stickers)}}async function bc({hash:e="0"}){const t=await Ba(new de.Api.messages.GetFeaturedStickers({hash:ge()(e)}));if(t&&!(t instanceof de.Api.messages.FeaturedStickersNotModified))return{hash:String(t.hash),isPremium:Boolean(t.premium),sets:t.sets.map(wt)}}async function vc(){const e=await Ba(new de.Api.messages.GetFeaturedEmojiStickers({hash:ge()(0)}));if(e&&!(e instanceof de.Api.messages.FeaturedStickersNotModified))return e.sets.forEach((({set:e})=>{e.thumbDocumentId&&(Be.stickerSets[String(e.id)]=e)})),{isPremium:Boolean(e.premium),sets:e.sets.map(wt)}}async function Cc({sticker:e,unfave:t}){const n=new de.Api.messages.FaveSticker({id:Hn(e),unfave:t});await Ba(n)&&tc({"@type":"updateFavoriteStickers"})}function Pc({sticker:e}){return Ba(new de.Api.messages.SaveRecentSticker({id:Hn(e),unsave:!0}))}function Mc(){return Ba(new de.Api.messages.ClearRecentStickers)}async function Uc({stickerSetInfo:e}){if("isMissing"in e)return;const t=await Ba(new de.Api.messages.GetStickerSet({stickerset:"id"in e?Nn(e.id,e.accessHash):(n=e.shortName,new de.Api.InputStickerSetShortName({shortName:n}))}),{shouldThrow:!0});var n;return t instanceof de.Api.messages.StickerSet?(Be.stickerSets[String(t.set.id)]=t.set,{set:yt(t.set),stickers:St(t.documents),packs:It(t.packs)}):void 0}async function Bc({documentId:e}){if(!e.length)return;const t=await Ba(new de.Api.messages.GetCustomEmojiDocuments({documentId:e.map((e=>ge()(e)))}));return t?St(t):void 0}async function Tc(){const e=await Ba(new de.Api.messages.GetStickerSet({stickerset:new de.Api.InputStickerSetAnimatedEmoji}));if(e instanceof de.Api.messages.StickerSet)return{set:yt(e.set),stickers:St(e.documents)}}async function Dc(){const e=await Ba(new de.Api.messages.GetStickerSet({stickerset:new de.Api.InputStickerSetAnimatedEmojiAnimations}));if(e instanceof de.Api.messages.StickerSet)return{set:yt(e.set),stickers:St(e.documents)}}async function Rc(){const e=await Ba(new de.Api.messages.GetStickerSet({stickerset:new de.Api.InputStickerSetEmojiGenericAnimations}));if(e instanceof de.Api.messages.StickerSet)return{set:yt(e.set),stickers:St(e.documents)}}async function kc(){const e=await Ba(new de.Api.messages.GetStickerSet({stickerset:new de.Api.InputStickerSetPremiumGifts}));if(e instanceof de.Api.messages.StickerSet)return{set:yt(e.set),stickers:St(e.documents)}}async function Ec(){const e=await Ba(new de.Api.messages.GetStickerSet({stickerset:new de.Api.InputStickerSetEmojiDefaultTopicIcons}));if(e instanceof de.Api.messages.StickerSet)return{set:yt(e.set),stickers:St(e.documents)}}async function xc(){const e=await Ba(new de.Api.messages.GetStickerSet({stickerset:new de.Api.InputStickerSetEmojiDefaultStatuses}));if(e instanceof de.Api.messages.StickerSet)return{set:yt(e.set),stickers:St(e.documents)}}async function Nc({query:e,hash:t="0"}){const n=await Ba(new de.Api.messages.SearchStickerSets({q:e,hash:ge()(t)}));if(n&&!(n instanceof de.Api.messages.FoundStickerSetsNotModified))return{hash:String(n.hash),sets:n.sets.map(wt)}}async function Hc({hash:e="0"}){const t=await Ba(new de.Api.messages.GetSavedGifs({hash:ge()(e)}));if(t&&!(t instanceof de.Api.messages.SavedGifsNotModified))return{hash:String(t.hash),gifs:Lc(t.gifs)}}function Gc({gif:e,shouldUnsave:t}){return Ba(new de.Api.messages.SaveGif({id:Hn(e),unsave:t}),{shouldReturnTrue:!0})}async function Fc({stickerSetId:e,accessHash:t}){await Ba(new de.Api.messages.InstallStickerSet({stickerset:Nn(e,t)}))&&tc({"@type":"updateStickerSet",id:e,stickerSet:{installedDate:Date.now()}})}async function _c({stickerSetId:e,accessHash:t}){await Ba(new de.Api.messages.UninstallStickerSet({stickerset:Nn(e,t)}))&&tc({"@type":"updateStickerSet",id:e,stickerSet:{installedDate:void 0}})}async function Oc({query:e,offset:t="",username:n=J}){if(!nc){const e=await Ba(new de.Api.contacts.ResolveUsername({username:n}));if(!(e&&e.users[0]instanceof de.Api.User))return;nc=new de.Api.InputUser({userId:e.peer.userId,accessHash:e.users[0].accessHash})}const s=await Ba(new de.Api.messages.GetInlineBotResults({bot:nc,peer:new de.Api.InputPeerEmpty,query:e,offset:t}));if(!s)return;const i=s.results.map((e=>{if(e instanceof de.Api.BotInlineMediaResult)return e.document})).filter(Boolean);return{nextOffset:s.nextOffset,gifs:Lc(i)}}async function qc({emoji:e,hash:t="0"}){const n=await Ba(new de.Api.messages.GetStickers({emoticon:e,hash:ge()(t)}));if(n&&!(n instanceof de.Api.messages.StickersNotModified))return{stickers:St(n.stickers),hash:String(n.hash)}}async function jc({language:e,fromVersion:t}){const n=await Ba(new de.Api.messages.GetEmojiKeywordsDifference({langCode:e,fromVersion:t}));if(n)return{language:n.langCode,version:n.version,keywords:n.keywords.reduce(((e,t)=>(e[t.keyword]=t.emoticons,e)),{})}}async function Vc(e="0"){const t=await Ba(new de.Api.account.GetRecentEmojiStatuses({hash:ge()(e)}));if(!t||t instanceof de.Api.account.EmojiStatusesNotModified)return;const n=t.statuses.slice(0,G).map(he).filter(Boolean).map((({documentId:e})=>e)),s=await Bc({documentId:n});return{hash:String(t.hash),emojiStatuses:s}}function Lc(e){return e.map((e=>{if(e instanceof de.Api.Document){const t=Pt(e);if(t)return Be.documents[String(e.id)]=e,t}})).filter(Boolean)}const zc=new Set(["USERNAME_PURCHASE_AVAILABLE","USERNAME_INVALID"]);async function Wc({username:e}){try{return{result:await Ba(new de.Api.channels.CheckUsername({channel:new de.Api.InputChannelEmpty,username:e}),{shouldThrow:!0}),error:void 0}}catch(e){const t=e.message;if(zc.has(t))return{result:!1,error:t};throw e}}async function Jc({chat:e,username:t}){const n=await Ba(new de.Api.channels.UpdateUsername({channel:xn(e.id,e.accessHash),username:t}));let s=t?[{username:t,isEditable:!0,isActive:!0}]:[];return e.usernames&&(s=s.concat(e.usernames.filter((e=>e.username&&!e.isEditable)))),n&&sc({"@type":"updateChat",id:e.id,chat:{usernames:s.length?s:void 0}}),n}async function $c({chat:e}){const t=await Ba(new de.Api.channels.DeactivateAllUsernames({channel:xn(e.id,e.accessHash)}));if(t){const t=e.usernames?e.usernames.map((e=>({...e,isActive:!1}))).filter((e=>e.username)):void 0;sc({"@type":"updateChat",id:e.id,chat:{usernames:t}})}return t}async function Kc({chat:e,usageLimit:t,expireDate:n}){const s=await Ba(new de.Api.messages.ExportChatInvite({peer:kn(e.id,e.accessHash),usageLimit:t,expireDate:n}));if(s instanceof de.Api.ChatInviteExported)return sc({"@type":"updateChatFullInfo",id:e.id,fullInfo:{inviteLink:s.link}}),s.link}async function Yc({peer:e,admin:t,limit:n=0,isRevoked:s}){const i=await Ba(new de.Api.messages.GetExportedChatInvites({peer:kn(e.id,e.accessHash),adminId:xn(t.id,t.accessHash),limit:n,revoked:s||void 0}),{abortControllerChatId:e.id});if(i)return qe(i.users),{invites:i.invites.filter((e=>e instanceof de.Api.ChatInviteExported)).map(wn),users:i.users.map(Ms).filter(Boolean)}}async function Zc({peer:e,isRevoked:t,link:n,expireDate:s,usageLimit:i,isRequestNeeded:a,title:o}){const r=await Ba(new de.Api.messages.EditExportedChatInvite({link:n,peer:kn(e.id,e.accessHash),expireDate:s,usageLimit:a?void 0:i,requestNeeded:a,title:o,revoked:t||void 0}));if(r){if(qe(r.users),r instanceof de.Api.messages.ExportedChatInvite&&r.invite instanceof de.Api.ChatInviteExported){const e=wn(r.invite);return{oldInvite:e,newInvite:e,users:r.users.map(Ms).filter(Boolean)}}if(r instanceof de.Api.messages.ExportedChatInviteReplaced&&r.invite instanceof de.Api.ChatInviteExported&&r.newInvite instanceof de.Api.ChatInviteExported)return{oldInvite:wn(r.invite),newInvite:wn(r.newInvite),users:r.users.map(Ms).filter(Boolean)}}}async function Qc({peer:e,expireDate:t,usageLimit:n,isRequestNeeded:s,title:i}){const a=await Ba(new de.Api.messages.ExportChatInvite({peer:kn(e.id,e.accessHash),expireDate:t,usageLimit:s?void 0:n,requestNeeded:s||void 0,title:i}));if(a instanceof de.Api.ChatInviteExported)return wn(a)}async function Xc({peer:e,link:t}){return await Ba(new de.Api.messages.DeleteExportedChatInvite({peer:kn(e.id,e.accessHash),link:t}))}async function eu({peer:e,admin:t}){return await Ba(new de.Api.messages.DeleteRevokedExportedChatInvites({peer:kn(e.id,e.accessHash),adminId:xn(t.id,t.accessHash)}))}async function tu({peer:e,link:t,offsetDate:n=0,offsetUser:s,limit:i=0,isRequested:a}){const o=await Ba(new de.Api.messages.GetChatInviteImporters({peer:kn(e.id,e.accessHash),link:t,offsetDate:n,offsetUser:s?xn(s.id,s.accessHash):new de.Api.InputUserEmpty,limit:i,requested:a||void 0}),{abortControllerChatId:e.id});if(!o)return;const r=o.users.map((e=>Ms(e))).filter(Boolean);return qe(o.users),{importers:o.importers.map((e=>function(e){const{userId:t,date:n,about:s,requested:i,viaChatlist:a}=e;return{userId:fe(t,"user"),date:n,about:s,isRequested:i,isFromChatList:a}}(e))),users:ze(r,"id")}}function nu({peer:e,user:t,isApproved:n}){return Ba(new de.Api.messages.HideChatJoinRequest({peer:kn(e.id,e.accessHash),userId:xn(t.id,t.accessHash),approved:n||void 0}),{shouldReturnTrue:!0})}function su({peer:e,isApproved:t,link:n}){return Ba(new de.Api.messages.HideAllChatJoinRequests({peer:kn(e.id,e.accessHash),approved:t||void 0,link:n}),{shouldReturnTrue:!0})}function iu(e){const{id:t,accessHash:n}=e;return Ba(new de.Api.messages.HidePeerSettingsBar({peer:kn(t,n)}))}var au=n(48764).lW;function ou(e){const{emojies_sounds:t}=e;return t?Object.keys(t).reduce(((e,n)=>{const s=t[n];return Be.documents[s.id]=new de.Api.Document({id:ge()(s.id),accessHash:ge()(s.access_hash),dcId:1,mimeType:"audio/ogg",fileReference:au.alloc(0),size:ge()(0)}),e[n]=s.id,e}),{}):{}}function ru(e,t,n){return[e[`${t}_default`]||te[n][0],e[`${t}_premium`]||te[n][1]]}const du=["ar","fa","id","ko","uz","en"];function cu({firstName:e,lastName:t,about:n}){return Ba(new de.Api.account.UpdateProfile({firstName:e||"",lastName:t||"",about:n||""}),{shouldReturnTrue:!0})}async function uu(e){try{return{result:await Ba(new de.Api.account.CheckUsername({username:e}),{shouldThrow:!0}),error:void 0}}catch(e){const t=e.message;if(zc.has(t))return{result:!1,error:t};throw e}}function fu(e){return Ba(new de.Api.account.UpdateUsername({username:e}),{shouldReturnTrue:!0})}async function pu(e,t){const n=e?Ln(e):new de.Api.InputPhotoEmpty,s=await Ba(new de.Api.photos.UpdateProfilePhoto({id:n,...t?{fallback:!0}:void 0}));if(s)return qe(s.users),s.photo instanceof de.Api.Photo?(_e(s.photo),{users:s.users.map(Ms).filter(Boolean),photo:ct(s.photo)}):void 0}async function lu(e,t,n=!1,s=0,i){const a=await Ra(e),o=await Ba(new de.Api.photos.UploadProfilePhoto({...i?{bot:kn(i.id,i.accessHash)}:void 0,...n?{video:a,videoStartTs:s}:{file:a},...t?{fallback:!0}:void 0}));if(o)return qe(o.users),o.photo instanceof de.Api.Photo?(_e(o.photo),{users:o.users.map(Ms).filter(Boolean),photo:ct(o.photo)}):void 0}async function hu({file:e,isSuggest:t,user:n}){const s=e?await Ra(e):void 0,i=await Ba(new de.Api.photos.UploadContactProfilePhoto({userId:xn(n.id,n.accessHash),file:s,...t?{suggest:!0}:{save:!0}}));if(!i)return;qe(i.users);const a=i.users.map(Ms).filter(Boolean);return i.photo instanceof de.Api.Photo?(_e(i.photo),{users:a,photo:ct(i.photo)}):{users:a,photo:void 0}}async function mu(e){const t=e.map(Ln).filter(Boolean),n=await Ba(new de.Api.photos.DeletePhotos({id:t}),{shouldReturnTrue:!0});return n&&e.forEach((e=>{delete Be.photos[e.id]})),n}async function gu(){const e=await Ba(new de.Api.account.GetWallPapers({hash:ge()("0")}));if(!e||e instanceof de.Api.account.WallPapersNotModified)return;const t=e.wallpapers.filter((e=>e instanceof de.Api.WallPaper&&e.document instanceof de.Api.Document&&!e.pattern&&"application/x-tgwallpattern"!==e.document.mimeType));return t.forEach((e=>{Be.documents[String(e.document.id)]=e.document})),{wallpapers:t.map(Ts).filter(Boolean)}}async function Au(e){const t=await Ra(e),n=await Ba(new de.Api.account.UploadWallPaper({file:t,mimeType:e.type,settings:new de.Api.WallPaperSettings}));if(!(n&&n instanceof de.Api.WallPaper))return;const s=Ts(n);return s?(Be.documents[String(n.document.id)]=n.document,{wallpaper:s}):void 0}async function yu({isOnlyStories:e}){const t=await Ba(new de.Api.contacts.GetBlocked({myStoriesFrom:e,limit:w}));if(t)return Lu(t),{users:t.users.map(Ms).filter(Boolean),chats:t.chats.map((e=>rn(e))).filter(Boolean),blockedIds:t.blocked.map((e=>pe(e.peerId))),totalCount:t instanceof de.Api.contacts.BlockedSlice?t.count:t.blocked.length}}function wu({user:e,isOnlyStories:t}){return Ba(new de.Api.contacts.Block({id:kn(e.id,e.accessHash),myStoriesFrom:t}))}function Iu({user:e,isOnlyStories:t}){return Ba(new de.Api.contacts.Unblock({id:kn(e.id,e.accessHash),myStoriesFrom:t}))}async function Su(){const e=await Ba(new de.Api.account.GetAuthorizations);if(e)return{authorizations:ze(e.authorizations.map(Ds),"hash"),ttlDays:e.authorizationTtlDays}}function bu(e){return Ba(new de.Api.account.ResetAuthorization({hash:ge()(e)}))}function vu(){return Ba(new de.Api.auth.ResetAuthorizations)}async function Cu(){const e=await Ba(new de.Api.account.GetWebAuthorizations);if(e)return qe(e.users),{users:e.users.map(Ms).filter(Boolean),webAuthorizations:ze(e.authorizations.map(Rs),"hash")}}function Pu(e){return Ba(new de.Api.account.ResetWebAuthorization({hash:ge()(e)}))}function Mu(){return Ba(new de.Api.account.ResetWebAuthorizations)}async function Uu(){const e=await Ba(new de.Api.account.GetNotifyExceptions({compareSound:!0}),{shouldIgnoreUpdates:!0});if(e instanceof de.Api.Updates||e instanceof de.Api.UpdatesCombined)return Lu(e),e.updates.reduce(((e,t)=>t instanceof de.Api.UpdateNotifySettings&&t.peer instanceof de.Api.NotifyPeer?(e.push(ks(t.notifySettings,t.peer.peer)),e):e),[])}async function Bu(){const[e,t,n,s]=await Promise.all([Ba(new de.Api.account.GetContactSignUpNotification),Ba(new de.Api.account.GetNotifySettings({peer:new de.Api.InputNotifyUsers})),Ba(new de.Api.account.GetNotifySettings({peer:new de.Api.InputNotifyChats})),Ba(new de.Api.account.GetNotifySettings({peer:new de.Api.InputNotifyBroadcasts}))]);if(!t||!n||!s)return!1;const{silent:i,muteUntil:a,showPreviews:o}=t,{silent:r,muteUntil:d,showPreviews:c}=n,{silent:u,muteUntil:f,showPreviews:p}=s;return{hasContactJoinedNotifications:!e,hasPrivateChatsNotifications:!(i||"number"==typeof a&&tt()<a),hasPrivateChatsMessagePreview:o,hasGroupNotifications:!(r||"number"==typeof d&&tt()<d),hasGroupMessagePreview:c,hasBroadcastNotifications:!(u||"number"==typeof f&&tt()<f),hasBroadcastMessagePreview:p}}function Tu(e){return Ba(new de.Api.account.SetContactSignUpNotification({silent:e}))}function Du(e,{isSilent:t,shouldShowPreviews:n}){let s;s="contact"===e?new de.Api.InputNotifyUsers:"group"===e?new de.Api.InputNotifyChats:new de.Api.InputNotifyBroadcasts;const i={showPreviews:n,silent:t,muteUntil:t?E:0};return Ba(new de.Api.account.UpdateNotifySettings({peer:s,settings:new de.Api.InputPeerNotifySettings(i)}))}async function Ru(){const e=await Ba(new de.Api.langpack.GetLanguages({langPack:Z}));if(e)return e.map(we)}async function ku({sourceLangPacks:e,langCode:t}){const n=(await Promise.all(e.map((e=>Ba(new de.Api.langpack.GetLangPack({langPack:e,langCode:du.includes(t)?`${t}-raw`:t})))))).filter(Boolean).map(Hs);if(n.length)return{langPack:Object.assign({},...n.reverse())}}async function Eu({langPack:e,langCode:t,keys:n}){const s=await Ba(new de.Api.langpack.GetStrings({langPack:e,langCode:du.includes(t)?`${t}-raw`:t,keys:n}));if(s)return s.map(Gs)}async function xu(e){const t=Kn(e),n=await Ba(new de.Api.account.GetPrivacy({key:t}));if(n)return Lu(n),{users:n.users.map(Ms).filter(Boolean),rules:lt(n.rules)}}function Nu(e){const t=Ia.session.getAuthKey().getKey();return Ba(new de.Api.account.RegisterDevice({tokenType:10,secret:t,appSandbox:!1,otherUids:[],token:e}))}function Hu(e){return Ba(new de.Api.account.UnregisterDevice({tokenType:10,otherUids:[],token:e}))}async function Gu(e,t){const n=Kn(e),s=rs(t),i=await Ba(new de.Api.account.SetPrivacy({key:n,rules:s}));if(i)return Lu(i),{users:i.users.map(Ms).filter(Boolean),rules:lt(i.rules)}}async function Fu(e){await Ba(new de.Api.account.UpdateStatus({offline:!e}))}async function _u(){const e=await Ba(new de.Api.account.GetContentSettings);if(e)return{isSensitiveEnabled:Boolean(e.sensitiveEnabled),canChangeSensitive:Boolean(e.sensitiveCanChange)}}function Ou(e){return Ba(new de.Api.account.SetContentSettings({sensitiveEnabled:e||void 0}))}async function qu(e){const t=await Ba(new de.Api.help.GetAppConfig({hash:e}));if(!t||t instanceof de.Api.help.AppConfigNotModified)return;const{config:n,hash:s}=t;return function(e,t){const n=xs(e);return{emojiSounds:ou(n),seenByMaxChatMembers:n.chat_read_mark_size_threshold,seenByExpiresAt:n.chat_read_mark_expire_period,autologinDomains:n.autologin_domains||[],urlAuthDomains:n.url_auth_domains||[],maxUniqueReactions:n.reactions_uniq_max,premiumBotUsername:n.premium_bot_username,premiumInvoiceSlug:n.premium_invoice_slug,premiumPromoOrder:n.premium_promo_order,isPremiumPurchaseBlocked:n.premium_purchase_blocked,defaultEmojiStatusesStickerSetId:n.default_emoji_statuses_stickerset_id,topicsPinnedLimit:n.topics_pinned_limit,maxUserReactionsDefault:n.reactions_user_max_default,maxUserReactionsPremium:n.reactions_user_max_premium,hiddenMembersMinCount:n.hidden_members_group_size_min,canDisplayAutoarchiveSetting:n.autoarchive_setting_available,limits:{uploadMaxFileparts:ru(n,"upload_max_fileparts","uploadMaxFileparts"),stickersFaved:ru(n,"stickers_faved_limit","stickersFaved"),savedGifs:ru(n,"saved_gifs_limit","savedGifs"),dialogFiltersChats:ru(n,"dialog_filters_chats_limit","dialogFiltersChats"),dialogFilters:ru(n,"dialog_filters_limit","dialogFilters"),dialogFolderPinned:ru(n,"dialogs_pinned_limit","dialogFolderPinned"),captionLength:ru(n,"caption_length_limit","captionLength"),channels:ru(n,"channels_limit","channels"),channelsPublic:ru(n,"channels_public_limit","channelsPublic"),aboutLength:ru(n,"about_length_limit","aboutLength"),chatlistInvites:ru(n,"chatlist_invites_limit","chatlistInvites"),chatlistJoined:ru(n,"chatlist_joined_limit","chatlistJoined"),recommendedChannels:ru(n,"recommended_channels_limit","recommendedChannels"),savedDialogsPinned:ru(n,"saved_dialogs_pinned_limit","savedDialogsPinned")},hash:t,areStoriesHidden:n.stories_all_hidden,storyExpirePeriod:n.story_expire_period??X,storyViewersExpirePeriod:n.story_viewers_expire_period??ee,storyChangelogUserId:n.stories_changelog_user_id?.toString()??z}}(n,s)}async function ju(){const e=await Ba(new de.Api.help.GetConfig);if(e)return function(e){const t=e.reactionsDefault&&Xt(e.reactionsDefault);return{expiresAt:e.expires,gifSearchUsername:e.gifSearchUsername,defaultReaction:t,maxGroupSize:e.chatSizeMax,autologinToken:e.autologinToken}}(e)}async function Vu(e){const t=await Ba(new de.Api.help.GetPeerColors({hash:e}));if(!t)return;const n=function(e){if(e instanceof de.Api.help.PeerColors)return We(e.colors,(e=>[e.colorId,{isHidden:e.hidden,colors:e.colors&&Fs(e.colors),darkColors:e.darkColors&&Fs(e.darkColors)}]))}(t);return n?{colors:n,hash:t instanceof de.Api.help.PeerColors?t.hash:void 0}:void 0}function Lu(e){qe(e.users),qe(e.chats)}async function zu({langCode:e="en"}){const t=await Ba(new de.Api.help.GetCountriesList({langCode:e}));if(t instanceof de.Api.help.CountriesList)return function(e){const t=e.filter((({hidden:e})=>!e));return{phoneCodes:t.map((e=>e.countryCodes.map((t=>Es(e,t))))).flat().sort(((e,t)=>e.name?e.name.localeCompare(t.name):e.defaultName.localeCompare(t.defaultName))),general:t.map((e=>Es(e,e.countryCodes[0]))).sort(((e,t)=>e.name?e.name.localeCompare(t.name):e.defaultName.localeCompare(t.defaultName)))}}(t.countries)}async function Wu(){const e=await Ba(new de.Api.account.GetGlobalPrivacySettings);if(e)return{shouldArchiveAndMuteNewNonContact:Boolean(e.archiveAndMuteNewNoncontactPeers)}}async function Ju({shouldArchiveAndMuteNewNonContact:e}){const t=await Ba(new de.Api.account.SetGlobalPrivacySettings({settings:new de.Api.GlobalPrivacySettings({...e&&{archiveAndMuteNewNoncontactPeers:!0}})}));if(t)return{shouldArchiveAndMuteNewNonContact:Boolean(t.archiveAndMuteNewNoncontactPeers)}}function $u({chatId:e,accessHash:t,username:n,isActive:s}){return Ba(e?new de.Api.channels.ToggleUsername({channel:xn(e,t),username:n,active:s}):new de.Api.account.ToggleUsername({username:n,active:s}))}function Ku({chatId:e,accessHash:t,usernames:n}){return Ba(e?new de.Api.channels.ReorderUsernames({channel:xn(e,t),order:n}):new de.Api.account.ReorderUsernames({order:n}))}const Yu={EMAIL_UNCONFIRMED:"Email unconfirmed",EMAIL_HASH_EXPIRED:"Email hash expired",NEW_SALT_INVALID:"The new salt is invalid",NEW_SETTINGS_INVALID:"The new password settings are invalid",CODE_INVALID:"Invalid Code",PASSWORD_HASH_INVALID:"Invalid Password"},Zu={};let Qu;async function Xu(){const e=await Ba(new de.Api.account.GetPassword);if(!e)return;const{hint:t,hasPassword:n}=e;return{hint:t,hasPassword:n}}function ef(e){return Qu({"@type":"updateTwoFaStateWaitCode",length:e}),new Promise(((e,t)=>{Zu.resolve=e,Zu.reject=t}))}async function tf(e){try{return await ka({isCheckPassword:!0,currentPassword:e}),!0}catch(e){return rf(e),!1}}async function nf(e){try{return await ka({currentPassword:e}),!0}catch(e){return rf(e),!1}}async function sf(e,t,n,s){try{return await ka({currentPassword:e,newPassword:t,hint:n,email:s,emailCodeCallback:ef,onEmailCodeError:rf}),!0}catch(e){return rf(e),!1}}async function af(e,t){try{return await ka({currentPassword:e,newPassword:e,email:t,emailCodeCallback:ef,onEmailCodeError:rf}),!0}catch(e){return rf(e),!1}}function of(e){Zu.resolve(e)}function rf(e){let t;if(e instanceof de.errors.FloodWaitError){const n=Math.ceil(Number(e.seconds)/60/60);t="Too many attempts. Try again in "+(n>1?`${n} hours`:"an hour")}else t=Yu[e.message];t||(t="Unexpected Error",d&&console.error(e)),Qu({"@type":"updateTwoFaError",message:t})}function df({chat:e,emoticon:t}){return Ba(new de.Api.messages.SetTyping({peer:kn(e.id,e.accessHash),action:new de.Api.SendMessageEmojiInteractionSeen({emoticon:t})}),{abortControllerChatId:e.id})}function cf({chat:e,emoticon:t,messageId:n,timestamps:s}){return Ba(new de.Api.messages.SetTyping({peer:kn(e.id,e.accessHash),action:new de.Api.SendMessageEmojiInteraction({emoticon:t,msgId:n,interaction:new de.Api.DataJSON({data:JSON.stringify({v:1,a:s.map((e=>({t:e,i:1})))})})})}),{abortControllerChatId:e.id})}async function uf(){const e=await Ba(new de.Api.messages.GetAvailableReactions({}));if(e&&!(e instanceof de.Api.messages.AvailableReactionsNotModified))return e.reactions.forEach((e=>{e.staticIcon instanceof de.Api.Document&&(Be.documents[String(e.staticIcon.id)]=e.staticIcon),e.selectAnimation instanceof de.Api.Document&&(Be.documents[String(e.selectAnimation.id)]=e.selectAnimation),e.aroundAnimation instanceof de.Api.Document&&(Be.documents[String(e.aroundAnimation.id)]=e.aroundAnimation),e.appearAnimation instanceof de.Api.Document&&(Be.documents[String(e.appearAnimation.id)]=e.appearAnimation),e.centerIcon instanceof de.Api.Document&&(Be.documents[String(e.centerIcon.id)]=e.centerIcon)})),e.reactions.map(en)}function ff({chat:e,messageId:t,reactions:n,shouldAddToRecent:s}){return Ba(new de.Api.messages.SendReaction({reaction:n?.map((e=>ns(e))),peer:kn(e.id,e.accessHash),msgId:t,...s&&{addToRecent:!0}}),{shouldReturnTrue:!0,shouldThrow:!0})}function pf({ids:e,chat:t}){Qe(e,C).forEach((e=>{Ba(new de.Api.messages.GetMessagesReactions({id:e,peer:kn(t.id,t.accessHash)}),{shouldReturnTrue:!0,abortControllerChatId:t.id})}))}async function lf({chat:e,messageId:t,reaction:n,offset:s}){const i=await Ba(new de.Api.messages.GetMessageReactionsList({peer:kn(e.id,e.accessHash),id:t,...n&&{reaction:ns(n)},limit:B,...s&&{offset:s}}));if(!i)return;qe(i.users),qe(i.chats);const{nextOffset:a,reactions:o,count:r}=i;return{users:i.users.map(Ms).filter(Boolean),chats:i.chats.map((e=>rn(e))).filter(Boolean),nextOffset:a,reactions:o.map(Qt).filter(Boolean),count:r}}function hf({reaction:e}){return Ba(new de.Api.messages.SetDefaultReaction({reaction:ns(e)}))}async function mf({hash:e="0"}){const t=await Ba(new de.Api.messages.GetTopReactions({limit:M,hash:ge()(e)}));if(t&&!(t instanceof de.Api.messages.ReactionsNotModified))return{hash:String(t.hash),reactions:t.reactions.map(Xt).filter(Boolean)}}async function gf({hash:e="0"}){const t=await Ba(new de.Api.messages.GetRecentReactions({limit:U,hash:ge()(e)}));if(t&&!(t instanceof de.Api.messages.ReactionsNotModified))return{hash:String(t.hash),reactions:t.reactions.map(Xt).filter(Boolean)}}function Af(){return Ba(new de.Api.messages.ClearRecentReactions)}function yf(e){return e instanceof de.Api.PostInteractionCountersMessage?{msgId:e.msgId,forwardsCount:e.forwards,viewsCount:e.views,reactionsCount:e.reactions}:e instanceof de.Api.PostInteractionCountersStory?{storyId:e.storyId,reactionsCount:e.reactions,viewsCount:e.views,forwardsCount:e.forwards}:void 0}function wf(e){return{viewsGraph:bf(e.viewsGraph),reactionsGraph:bf(e.reactionsByEmotionGraph)}}function If(e){if(e&&"messages"in e)return e.messages.map((t=>Mf(t,e.chats)))}function Sf(e){if(e&&"forwards"in e)return e.forwards.map((t=>{if(t instanceof de.Api.PublicForwardMessage)return Mf(t.message,e.chats);const{peer:n,story:s}=t;return{peerId:pe(n),storyId:s.id,viewsCount:s.views?.viewsCount||0,reactionsCount:s.views?.reactionsCount||0}}))}function bf(e,t){if(e.error)return;const n=JSON.parse(e.json.data),[s,...i]=n.columns,a=n.y_scaled;return{type:t?"area":n.types.y0,zoomToken:e.zoomToken,labelFormatter:n.xTickFormatter,tooltipFormatter:n.xTooltipFormatter,labels:s.slice(1),hideCaption:!n.subchart.show,hasSecondYAxis:a,isStacked:n.stacked&&!a,isPercentage:t,datasets:i.map((e=>{const t=e[0];return{name:n.names[t],color:(s=n.colors[t],s.substring(s.indexOf("#"))),values:e.slice(1)};var s})),...vf(n.subchart.defaultZoom,s.slice(1))}}function vf(e,t){const[n,s]=e;let i=0,a=t.length-1;return t.forEach(((e,t)=>{!i&&e>=n&&(i=t),!a&&e>=s&&(a=t)})),{minimapRange:{begin:Math.max(0,i/(t.length-1)),end:Math.min(1,a/(t.length-1))},labelFromIndex:i,labelToIndex:a}}function Cf({current:e,previous:t}){const n=e-t;return{current:e,change:n,...t&&{percentage:(n?Math.abs(n)/t*100:0).toFixed(2)}}}function Pf(e){return{part:e.part,total:e.total,percentage:(e.part/e.total*100).toFixed(2)}}function Mf(e,t){const n=pe(e.peerId),s=t.find((e=>fe(e.id,"channel")===n));return{messageId:e.id,views:e.views,title:s.title,chat:{id:n,type:"chatTypeChannel",title:s.title,usernames:pt(s),avatarHash:s&&"photo"in s?pn(s.photo):void 0}}}async function Uf({chat:e,dcId:t}){const n=await Ba(new de.Api.stats.GetBroadcastStats({channel:xn(e.id,e.accessHash)}),{dcId:t});var s;if(n)return{stats:(s=n,{growthGraph:bf(s.growthGraph),followersGraph:bf(s.followersGraph),muteGraph:bf(s.muteGraph),topHoursGraph:bf(s.topHoursGraph),languagesGraph:s.languagesGraph.token,viewsBySourceGraph:s.viewsBySourceGraph.token,newFollowersBySourceGraph:s.newFollowersBySourceGraph.token,interactionsGraph:s.interactionsGraph.token,reactionsByEmotionGraph:s.reactionsByEmotionGraph.token,storyInteractionsGraph:s.storyInteractionsGraph.token,storyReactionsByEmotionGraph:s.storyReactionsByEmotionGraph.token,followers:Cf(s.followers),viewsPerPost:Cf(s.viewsPerPost),sharesPerPost:Cf(s.sharesPerPost),enabledNotifications:Pf(s.enabledNotifications),reactionsPerPost:Cf(s.reactionsPerPost),viewsPerStory:Cf(s.viewsPerStory),sharesPerStory:Cf(s.sharesPerStory),reactionsPerStory:Cf(s.reactionsPerStory),recentPosts:s.recentPostsInteractions.map(yf).filter(Boolean)}),users:[]}}async function Bf({chat:e,dcId:t}){const n=await Ba(new de.Api.stats.GetMegagroupStats({channel:xn(e.id,e.accessHash)}),{dcId:t});var s,i;if(n)return qe(n.users),{users:n.users.map(Ms).filter(Boolean),stats:(s=n,{growthGraph:bf(s.growthGraph),membersGraph:bf(s.membersGraph),topHoursGraph:bf(s.topHoursGraph),languagesGraph:s.languagesGraph.token,messagesGraph:s.messagesGraph.token,actionsGraph:s.actionsGraph.token,period:(i=s.period,{maxDate:i.maxDate,minDate:i.minDate}),members:Cf(s.members),viewers:Cf(s.viewers),messages:Cf(s.messages),posters:Cf(s.posters)})}}async function Tf({chat:e,messageId:t,dcId:n}){const s=await Ba(new de.Api.stats.GetMessageStats({channel:xn(e.id,e.accessHash),msgId:t}),{dcId:n});if(s)return wf(s)}async function Df({chat:e,messageId:t,dcId:n,offset:s}){const i=await Ba(new de.Api.stats.GetMessagePublicForwards({channel:xn(e.id,e.accessHash),msgId:t,offset:s,limit:P}),{dcId:n});if(i)return qe(i.chats),qe(i.users),{forwards:If(i),count:i.count,nextOffset:i.nextOffset,chats:i.chats.map((e=>rn(e))).filter(Boolean),users:i.users.map(Ms).filter(Boolean)}}async function Rf({token:e,x:t,isPercentage:n,dcId:s}){const i=await Ba(new de.Api.stats.LoadAsyncGraph({token:e,...t&&{x:ge()(t)}}),{dcId:s});if(i)return bf(i,n)}async function kf({chat:e,storyId:t,dcId:n}){const s=await Ba(new de.Api.stats.GetStoryStats({peer:kn(e.id,e.accessHash),id:t}),{dcId:n});if(s)return wf(s)}async function Ef({chat:e,storyId:t,dcId:n,offset:s}){const i=await Ba(new de.Api.stats.GetStoryPublicForwards({peer:kn(e.id,e.accessHash),id:t,offset:s,limit:P}),{dcId:n});if(i)return qe(i.chats),qe(i.users),{publicForwards:Sf(i),users:i.users.map(Ms).filter(Boolean),chats:i.chats.map((e=>rn(e))).filter(Boolean),count:i.count,nextOffset:i.nextOffset}}var xf=n(13302),Nf=n.n(xf),Hf=n(96748),Gf=n.n(Hf),Ff=n(59109),_f=n.n(Ff),Of=n(48764).lW;function qf(e,t,n){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?s:String(s))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let jf,Vf,Lf;class zf{constructor(e){this.isOutgoing=e,qf(this,"state",void 0),qf(this,"seq",0),qf(this,"gA",void 0),qf(this,"gB",void 0),qf(this,"p",void 0),qf(this,"random",void 0),qf(this,"waitForState",void 0),qf(this,"resolveState",void 0),this.waitForState=new Promise((e=>{this.resolveState=e}))}async requestCall({p:e,g:t,random:n}){const s=Bn().readBigIntFromBuffer(Of.from(e),!1),i=Bn().readBigIntFromBuffer(Of.from(n),!1),a=Bn().modExp(ge()(t),i,s);this.gA=a,this.p=s,this.random=i;const o=await Bn().sha256(Bn().getByteArray(a));return Array.from(o)}acceptCall({p:e,g:t,random:n}){const s=Bn().readBigIntFromBuffer(e,!1),i=Bn().readBigIntFromBuffer(n,!1),a=Bn().modExp(ge()(t),i,s);return this.gB=a,this.p=s,this.random=i,Array.from(Bn().getByteArray(a))}async confirmCall(e,t,n){this.isOutgoing?this.gB=Bn().readBigIntFromBuffer(Of.from(e),!1):this.gA=Bn().readBigIntFromBuffer(Of.from(e),!1);const s=Bn().modExp(this.isOutgoing?this.gB:this.gA,this.random,this.p),i=await Bn().sha1(Bn().getByteArray(s)),a=Bn().readBigIntFromBuffer(i.slice(-8).reverse(),!1),o=await async function(e,t,n,s){const i=await Bn().sha256(Of.concat([new Uint8Array(e),new Uint8Array(t)])),a=[],o=s.length-1;for(let e=0;e!==i.byteLength;e+=8){const t=(r=i.subarray(e,e+8),ge()(r[0]).and(127).shiftLeft(56).or(ge()(r[1]).shiftLeft(48)).or(ge()(r[2]).shiftLeft(40)).or(ge()(r[3]).shiftLeft(32)).or(ge()(r[4]).shiftLeft(24)).or(ge()(r[5]).shiftLeft(16)).or(ge()(r[6]).shiftLeft(8)).or(ge()(r[7]))).modPow(1,o).toJSNumber(),d=s[t],c=s[t+1]-d;a.push(String.fromCharCode(...n.subarray(d,d+c)))}var r;return a.join("")}(Bn().getByteArray(s),Bn().getByteArray(this.gA),t,n),r=new(Nf());return await r.setKey(Bn().getByteArray(s)),this.state=new(_f())(r,new(Gf()),!0,this.isOutgoing),this.resolveState(),{gA:Array.from(Bn().getByteArray(this.gA)),keyFingerprint:a.toString(),emojis:o}}async encode(e){if(!this.state)return;const t=new Uint32Array(1);t[0]=this.seq++;const n=await this.state.encryptMessageData(Of.concat([Bn().convertToLittle(t),Of.from(e)]));return Array.from(n)}async decode(e){if(!this.state)return this.waitForState.then((()=>this.decode(e)));const t=await this.state.decryptMessageData(Of.from(e));return JSON.parse(t.toString())}}function Wf(e){jf=new zf(...e)}function Jf(){jf=void 0}function $f(e){return jf.encode(...e)}async function Kf(e){if(jf)return await jf.decode(...e)}function Yf(e){return jf.confirmCall(...e)}function Zf(e){return jf.acceptCall(...e)}function Qf(e){return jf.requestCall(...e)}async function Xf({stateHash:e,isFirstRequest:t=!1,isHidden:n=!1}){const s=t?n?{hidden:!0}:{}:{state:e,next:!0,...n&&{hidden:!0}},i=await Ba(new de.Api.stories.GetAllStories(s));if(!i)return;if(i instanceof de.Api.stories.AllStoriesNotModified)return{state:i.state,stealthMode:js(i.stealthMode)};qe(i.users),qe(i.chats),i.peerStories.forEach((e=>e.stories.forEach((t=>Fe(t,pe(e.peer))))));const a=i.peerStories.reduce(((e,t)=>{const n=pe(t.peer),s=function(e){const t=pe(e.peer);return We(e.stories,(e=>[e.id,_s(t,e)]))}(t),{pinnedIds:i,orderedIds:a,lastUpdatedAt:o}=Object.values(s).reduce(((e,t)=>("isPinned"in t&&t.isPinned&&e.pinnedIds.push(t.id),"isDeleted"in t||(e.orderedIds.push(t.id),e.lastUpdatedAt=Math.max(t.date,e.lastUpdatedAt||0)),e)),{pinnedIds:[],orderedIds:[],lastUpdatedAt:void 0});return 0===a.length||(e[n]={byId:s,orderedIds:a,pinnedIds:i,lastUpdatedAt:o,lastReadId:t.maxReadId}),e}),{});return{users:i.users.map(Ms).filter(Boolean),chats:i.chats.map((e=>rn(e))).filter(Boolean),peerStories:a,hasMore:i.hasMore,state:i.state,stealthMode:js(i.stealthMode)}}async function ep({peer:e}){const t=await Ba(new de.Api.stories.GetPeerStories({peer:kn(e.id,e.accessHash)}));if(!t)return;qe(t.users),t.stories.stories.forEach((t=>Fe(t,e.id)));const n=t.users.map(Ms).filter(Boolean);return{chats:t.chats.map((e=>rn(e))).filter(Boolean),users:n,stories:We(t.stories.stories,(t=>[t.id,_s(e.id,t)])),lastReadStoryId:t.stories.maxReadId}}function tp({peer:e,offsetId:t}){return hp({method:new de.Api.stories.GetPinnedStories({peer:kn(e.id,e.accessHash),offsetId:t,limit:v}),peerId:e.id})}function np({peer:e,offsetId:t}){return hp({method:new de.Api.stories.GetStoriesArchive({peer:e&&kn(e.id,e.accessHash),offsetId:t,limit:v}),peerId:e.id})}async function sp({peer:e,ids:t}){const n=await Ba(new de.Api.stories.GetStoriesByID({peer:kn(e.id,e.accessHash),id:t}));if(!n)return;qe(n.users),qe(n.chats),n.stories.forEach((t=>Fe(t,e.id)));const s=n.users.map(Ms).filter(Boolean);return{chats:n.chats.map((e=>rn(e))).filter(Boolean),users:s,stories:t.reduce(((t,s)=>{const i=n.stories.find((({id:e})=>e===s));return t[s]=i?_s(e.id,i):{id:s,peerId:e.id,isDeleted:!0},t}),{})}}function ip({peer:e,storyId:t}){return Ba(new de.Api.stories.IncrementStoryViews({peer:kn(e.id,e.accessHash),id:[t]}))}function ap({peer:e,storyId:t}){return Ba(new de.Api.stories.ReadStories({peer:kn(e.id,e.accessHash),maxId:t}))}function op({peer:e,storyId:t}){return Ba(new de.Api.stories.DeleteStories({peer:kn(e.id,e.accessHash),id:[t]}))}function rp({peer:e,storyId:t,isPinned:n}){return Ba(new de.Api.stories.TogglePinned({peer:kn(e.id,e.accessHash),id:[t],pinned:n}))}async function dp({peer:e,storyId:t,areJustContacts:n,query:s,areReactionsFirst:i,limit:a=v,offset:o=""}){const r=await Ba(new de.Api.stories.GetStoryViewsList({peer:kn(e.id,e.accessHash),id:t,justContacts:n,q:s,reactionsFirst:i,limit:a,offset:o}));if(r)return qe(r.users),qe(r.chats),{users:r.users.map(Ms).filter(Boolean),chats:r.chats.map((e=>rn(e))).filter(Boolean),views:r.views.map(qs).filter(Boolean),nextOffset:r.nextOffset,reactionsCount:r.reactionsCount,viewsCount:r.count}}async function cp({peer:e,storyId:t}){const n=await Ba(new de.Api.stories.ExportStoryLink({peer:kn(e.id,e.accessHash),id:t}));if(n)return n.link}function up({peer:e,storyId:t,reason:n,description:s}){return Ba(new de.Api.stories.Report({peer:kn(e.id,e.accessHash),id:[t],reason:Yn(n),message:s}))}function fp({peer:e,id:t,privacy:n}){return Ba(new de.Api.stories.EditStory({peer:kn(e.id,e.accessHash),id:t,privacyRules:rs(n)}),{shouldReturnTrue:!0})}function pp({peer:e,isHidden:t}){return Ba(new de.Api.stories.TogglePeerStoriesHidden({peer:kn(e.id,e.accessHash),hidden:t}))}function lp({peers:e}){return Ba(new de.Api.stories.GetPeerMaxIDs({id:e.map((e=>kn(e.id,e.accessHash)))}))}async function hp({method:e,peerId:t}){const n=await Ba(e);if(n)return qe(n.users),qe(n.chats),n.stories.forEach((e=>Fe(e,t))),{users:n.users.map(Ms).filter(Boolean),chats:n.chats.map((e=>rn(e))).filter(Boolean),stories:We(n.stories,(e=>[e.id,_s(t,e)]))}}function mp({peer:e,storyId:t,reaction:n,shouldAddToRecent:s}){return Ba(new de.Api.stories.SendReaction({reaction:n?ns(n):new de.Api.ReactionEmpty,peer:kn(e.id,e.accessHash),storyId:t,...s&&{addToRecent:!0}}),{shouldReturnTrue:!0})}function gp({isForPast:e,isForFuture:t}){return Ba(new de.Api.stories.ActivateStealthMode({past:e,future:t}),{shouldReturnTrue:!0})}function Ap(e){if(e)return Object.values(e).map((e=>({id:e.id,title:e.title,amount:e.prices.reduce(((e,t)=>e+t.amount.toJSNumber()),0),prices:e.prices.map((({label:e,amount:t})=>({label:e,amount:t.toJSNumber()})))})))}function yp(e){const{invoice:t,info:n,shipping:s,currency:i,totalAmount:a,credentialsTitle:o,tipAmount:r}=e,{shippingAddress:d,phone:c,name:u}=n||{},{prices:f}=t,p=f.map((({label:e,amount:t})=>({label:e,amount:t.toJSNumber()})));let l,h;return s&&(l=s.prices.map((({label:e,amount:t})=>({label:e,amount:t.toJSNumber()}))),h=s.title),{currency:i,prices:p,info:{shippingAddress:d,phone:c,name:u},totalAmount:a.toJSNumber(),credentialsTitle:o,shippingPrices:l,shippingMethod:h,tipAmount:r?r.toJSNumber():0}}function wp(e){const{formId:t,canSaveCredentials:n,passwordMissing:s,providerId:i,nativeProvider:a,nativeParams:o,savedInfo:r,invoice:d,savedCredentials:c,url:u}=e,{test:f,nameRequested:p,phoneRequested:l,emailRequested:h,shippingAddressRequested:m,flexible:g,phoneToProvider:A,emailToProvider:y,currency:w,prices:I}=d,S=I.map((({label:e,amount:t})=>({label:e,amount:t.toJSNumber()}))),{shippingAddress:b}=r||{},v=r?we(r):void 0;v&&b&&(v.shippingAddress=we(b));const C=o?JSON.parse(o.data):{};return{url:u,canSaveCredentials:n,isPasswordMissing:s,formId:String(t),providerId:String(i),nativeProvider:a,savedInfo:v,invoiceContainer:{isTest:f,isNameRequested:p,isPhoneRequested:l,isEmailRequested:h,isShippingAddressRequested:m,isFlexible:g,shouldSendPhoneToProvider:A,shouldSendEmailToProvider:y,currency:w,prices:S},nativeParams:{needCardholderName:Boolean(C?.need_cardholder_name),needCountry:Boolean(C?.need_country),needZip:Boolean(C?.need_zip),publishableKey:C?.publishable_key,publicToken:C?.public_token},...c&&{savedCredentials:(P=c,P.map((({id:e,title:t})=>({id:e,title:t}))))}};var P}function Ip(e){const{invoice:t,description:n,title:s,photo:i}=e,{test:a,currency:o,prices:r,recurring:d,termsUrl:c,maxTipAmount:u,suggestedTipAmounts:f}=t,p=r.reduce(((e,t)=>e+t.amount.toJSNumber()),0);return{text:n,title:s,photo:Et(i),amount:p,currency:o,isTest:a,isRecurring:d,termsUrl:c,maxTipAmount:u?.toJSNumber(),...f&&{suggestedTipAmounts:f.map((e=>e.toJSNumber()))}}}function Sp(e){const{statusText:t,statusEntities:n,videos:s,videoSections:i,periodOptions:a}=e;return{statusText:t,statusEntities:n.map(ht),videoSections:i,videos:s.map(Mt).filter(Boolean),options:a.map(bp)}}function bp(e){const{current:t,canPurchaseUpgrade:n,currency:s,amount:i,botUrl:a,months:o}=e;return{isCurrent:t,canPurchaseUpgrade:n,currency:s,amount:i.toJSNumber(),botUrl:a,months:o}}function vp(e){const{date:t,expires:n,slot:s,cooldownUntilDate:i,peer:a}=e;return{date:t,expires:n,slot:s,cooldownUntil:i,chatId:a&&pe(a)}}function Cp(e){const{date:t,fromId:n,months:s,giveawayMsgId:i,toId:a,usedDate:o,viaGiveaway:r}=e;return{date:t,months:s,toId:a&&fe(a,"user"),fromId:n&&pe(n),usedAt:o,isFromGiveaway:r,giveawayMessageId:i}}async function Pp({inputInvoice:e,requestInfo:t,shouldSave:n}){const s=await Ba(new de.Api.payments.ValidateRequestedInfo({invoice:ts(e),save:n||void 0,info:$n(t)}));if(!s)return;const{id:i,shippingOptions:a}=s;return i?{id:i,shippingOptions:Ap(a)}:void 0}async function Mp({inputInvoice:e,formId:t,requestedInfoId:n,shippingOptionId:s,credentials:i,savedCredentialId:a,temporaryPassword:o,tipAmount:r}){const d=o&&a?new de.Api.InputPaymentCredentialsSaved({id:a,tmpPassword:Ve(o)}):new de.Api.InputPaymentCredentials({save:i.save,data:new de.Api.DataJSON({data:JSON.stringify(i.data)})}),c=await Ba(new de.Api.payments.SendPaymentForm({formId:ge()(t),invoice:ts(e),requestedInfoId:n,shippingOptionId:s,credentials:d,...r&&{tipAmount:ge()(r)}}));if(!(c instanceof de.Api.payments.PaymentVerificationNeeded))return Boolean(c);Vf({"@type":"updatePaymentVerificationNeeded",url:c.url})}async function Up(e){const t=await Ba(new de.Api.payments.GetPaymentForm({invoice:ts(e)}));if(t)return t.photo&&(Be.webDocuments[t.photo.url]=t.photo),qe(t.users),{form:wp(t),invoice:Ip(t),users:t.users.map(Ms).filter(Boolean)}}async function Bp(e,t){const n=await Ba(new de.Api.payments.GetPaymentReceipt({peer:kn(e.id,e.accessHash),msgId:t}));if(n)return qe(n.users),{receipt:yp(n),users:n.users.map(Ms).filter(Boolean)}}async function Tp(){const e=await Ba(new de.Api.help.GetPremiumPromo);if(!e)return;qe(e.users);const t=e.users.map(Ms).filter(Boolean);return e.videos.forEach((e=>{e instanceof de.Api.Document&&(Be.documents[e.id.toString()]=e)})),{promo:Sp(e),users:t}}async function Dp(e){const t=await function(e,t){return function(e,t){return Ia.getTmpPassword(e,t)}(e,t)}(e);if(t)return"error"in t?t:{value:je(t.tmpPassword),validUntil:t.validUntil}}async function Rp(){const e=await Ba(new de.Api.premium.GetMyBoosts);if(e)return qe(e.users),qe(e.chats),{users:e.users.map(Ms).filter(Boolean),chats:e.chats.map((e=>rn(e))).filter(Boolean),boosts:e.myBoosts.map(vp)}}async function kp({chat:e,slots:t}){const n=await Ba(new de.Api.premium.ApplyBoost({peer:kn(e.id,e.accessHash),slots:t}));if(n)return qe(n.users),qe(n.chats),{users:n.users.map(Ms).filter(Boolean),chats:n.chats.map((e=>rn(e))).filter(Boolean),boosts:n.myBoosts.map(vp)}}async function Ep({chat:e}){const t=await Ba(new de.Api.premium.GetBoostsStatus({peer:kn(e.id,e.accessHash)}));if(t)return function(e){const{level:t,boostUrl:n,boosts:s,myBoost:i,currentLevelBoosts:a,nextLevelBoosts:o,premiumAudience:r}=e;return{level:t,currentLevelBoosts:a,boosts:s,hasMyBoost:Boolean(i),boostUrl:n,nextLevelBoosts:o,...r&&{premiumSubscribers:Pf(r)}}}(t)}async function xp({chat:e,offset:t="",limit:n}){const s=await Ba(new de.Api.premium.GetBoostsList({peer:kn(e.id,e.accessHash),offset:t,limit:n}));if(!s)return;qe(s.users);const i=s.users.map(Ms).filter(Boolean),a=s.boosts.filter((e=>e.userId)),o=a.map((e=>e.userId.toString())),r=We(a,(e=>[e.userId.toString(),e.expires]));return{count:s.count,users:i,boosters:r,boosterIds:o,nextOffset:s.nextOffset}}async function Np({peer:e,messageId:t}){const n=await Ba(new de.Api.payments.GetGiveawayInfo({peer:kn(e.id,e.accessHash),msgId:t}));if(n)return function(e){if(e instanceof de.Api.payments.GiveawayInfo){const{startDate:t,adminDisallowedChatId:n,disallowedCountry:s,joinedTooEarlyDate:i,participating:a,preparingResults:o}=e;return{type:"active",startDate:t,isParticipating:a,adminDisallowedChatId:n&&fe(n,"channel"),disallowedCountry:s,joinedTooEarlyDate:i,isPreparingResults:o}}{const{activatedCount:t,finishDate:n,giftCodeSlug:s,winner:i,refunded:a,startDate:o,winnersCount:r}=e;return{type:"results",startDate:o,activatedCount:t,finishDate:n,winnersCount:r,giftCodeSlug:s,isRefunded:a,isWinner:i}}}(n)}async function Hp({slug:e}){const t=await Ba(new de.Api.payments.CheckGiftCode({slug:e}));if(t)return qe(t.users),qe(t.chats),{code:Cp(t),users:t.users.map(Ms).filter(Boolean),chats:t.chats.map((e=>rn(e))).filter(Boolean)}}function Gp({slug:e}){return Ba(new de.Api.payments.ApplyGiftCode({slug:e}),{shouldReturnTrue:!0})}function Fp(e,t,n){var s;Lf=e,function(e){Xs=e}(Vp),function(e){ri=e}(Vp),function(e){ho=e}(Vp),function(e){od=e}(Vp),function(e){ec=e}(Vp),function(e){tc=e}(Vp),function(e){sc=e}(Vp),function(e){Qu=e}(Vp),function(e){qa=e}(Vp),function(e){lo=e}(Vp),function(e){Vf=e}(Vp),n&&(s=n,Object.assign(Ue,Me(s))),async function(e,t){d&&console.log(">>> START INIT API"),wa=e;const{userAgent:n,platform:s,sessionData:i,isTest:r,isWebmSupported:c,maxBufferSize:u,webAuthToken:f,dcId:p,mockScenario:l,shouldForceHttpTransport:h,shouldAllowHttpTransport:m,shouldDebugExportedSenders:g}=t,A=new de.sessions.CallbackSession(i,Ma);self.isWebmSupported=c,self.maxBufferSize=u,Ia=new(vi())(A,"23967147","05843e5c1bfdb91b50d9580980e0158b",{deviceModel:navigator.userAgent||n||ha,systemVersion:s||ma,appVersion:`10.4.6 ${a}`,useWSS:!0,additionalDcsDisabled:o,shouldDebugExportedSenders:g,shouldForceHttpTransport:h,shouldAllowHttpTransport:m,testServers:r,dcId:p}),Ia.addEventHandler(Ua,ga);try{d&&(Le("CONNECTING"),self.invoke=Ba,self.GramJs=de.Api);try{Ia.setPingCallback(zi),await Ia.start({phoneNumber:ci,phoneCode:ui,password:fi,firstAndLastNames:pi,qrCode:li,onError:hi,initialMethod:"iOS"===s||"Android"===s?"phoneNumber":"qrCode",shouldThrowIfUnauthorized:Boolean(i),webAuthToken:f,webAuthTokenFailed:di,mockScenario:l})}catch(e){if(console.error(e),"Disconnect"!==e.message&&"Cannot send requests while disconnected"!==e.message)return void wa({"@type":"updateConnectionState",connectionState:"connectionStateBroken"})}d&&(console.log(">>> FINISH INIT API"),Le("CONNECTED")),ri(mi("authorizationStateReady")),Ma(A.getSessionData()),wa({"@type":"updateApiReady"}),async function(e){Di=e,await Yi(),ki=!0,Vi()}(Ba),Na()}catch(e){throw d&&Le("CONNECTING ERROR",e),e}}(Vp,t)}const _p=ie((function(e){if(!jp||e!==qp)return;const t=jp;jp=void 0,t.forEach(Lf)}));let Op,qp,jp;function Vp(e){jp?jp.push(e):jp=[e],Op&&!N.has(e["@type"])||(Op=se(_p,x,!0),qp=Math.random()),Op(qp)}const Lp=ne.reduce(((e,t)=>(e[t]=console[t],e)),{});self.onerror=e=>{console.error(e),Kp({type:"unhandledError",error:{message:e.error.message||"Uncaught exception in worker"}})},self.addEventListener("unhandledrejection",(e=>{console.error(e),Kp({type:"unhandledError",error:{message:e.reason.message||"Uncaught rejection in worker"}})}));const zp=new Map;d&&console.log(">>> FINISH LOAD WORKER"),onmessage=async e=>{const{data:t}=e;switch(t.type){case"initApi":{const{messageId:e,args:n}=t;await Fp($p,n[0],n[1]),e&&Kp({type:"methodResponse",messageId:e,response:!0});break}case"callMethod":{const{messageId:e,name:n,args:s,withCallback:a}=t;try{if(e&&a){const t=(...t)=>{const n=t[t.length-1];Kp({type:"methodCallback",messageId:e,callbackArgs:t},n instanceof ArrayBuffer?n:void 0)};zp.set(e,t),s.push(t)}const t=await function(e,...t){return i[e](...t)}(n,...s);d&&"object"==typeof t&&"CONSTRUCTOR_ID"in t&&Le("UNEXPECTED RESPONSE",`${n}: ${t.className}`);const{arrayBuffer:o}="object"==typeof t&&"arrayBuffer"in t&&t||{};e&&Kp({type:"methodResponse",messageId:e,response:t},o)}catch(t){d&&console.error(t),e&&Kp({type:"methodResponse",messageId:e,error:{message:t.message}})}e&&zp.delete(e);break}case"cancelProgress":{const e=zp.get(t.messageId);e&&(e.isCanceled=!0);break}case"ping":Kp({type:"methodResponse",messageId:t.messageId});break;case"toggleDebugMode":t.isEnabled?ne.forEach((e=>{console[e]=(...t)=>{postMessage({type:"debugLog",level:e,args:JSON.parse(JSON.stringify(t,((e,t)=>"bigint"==typeof t?t.toString():t)))})}})):ne.forEach((e=>{console[e]=Lp[e]}))}};let Wp=[];const Jp=ie((()=>{const e=Wp;Wp=[],Kp({type:"updates",updates:e})}));function $p(e){d&&"updateUserStatus"!==e["@type"]&&"updateServerTimeOffset"!==e["@type"]&&Le("UPDATE",e["@type"],e),Wp.push(e),Jp()}function Kp(e,t){t?postMessage(e,[t]):postMessage(e)}},59187:(e,t,n)=>{"use strict";n.d(t,{IU:()=>o,Vv:()=>s,_f:()=>i,_Q:()=>a});let s=function(e){return e.Bold="MessageEntityBold",e.Blockquote="MessageEntityBlockquote",e.BotCommand="MessageEntityBotCommand",e.Cashtag="MessageEntityCashtag",e.Code="MessageEntityCode",e.Email="MessageEntityEmail",e.Hashtag="MessageEntityHashtag",e.Italic="MessageEntityItalic",e.MentionName="MessageEntityMentionName",e.Mention="MessageEntityMention",e.Phone="MessageEntityPhone",e.Pre="MessageEntityPre",e.Strike="MessageEntityStrike",e.TextUrl="MessageEntityTextUrl",e.Url="MessageEntityUrl",e.Underline="MessageEntityUnderline",e.Spoiler="MessageEntitySpoiler",e.CustomEmoji="MessageEntityCustomEmoji",e.Unknown="MessageEntityUnknown",e}({});const i=-1,a="MESSAGE_DELETED";let o=function(e){return e[e.BlobUrl=0]="BlobUrl",e[e.Progressive=1]="Progressive",e[e.DownloadUrl=2]="DownloadUrl",e[e.Text=3]="Text",e}({})},48960:(e,t,n)=>{var s=n(48764).lW;const{constructors:i}=n(57404),a=s.from("ffd8ffe000104a46494600010100000100010000ffdb004300281c1e231e19282321232d2b28303c64413c37373c7b585d4964918099968f808c8aa0b4e6c3a0aadaad8a8cc8ffcbdaeef5ffffff9bc1fffffffaffe6fdfff8ffdb0043012b2d2d3c353c76414176f8a58ca5f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8ffc00011080000000003012200021101031101ffc4001f0000010501010101010100000000000000000102030405060708090a0bffc400b5100002010303020403050504040000017d01020300041105122131410613516107227114328191a1082342b1c11552d1f02433627282090a161718191a25262728292a3435363738393a434445464748494a535455565758595a636465666768696a737475767778797a838485868788898a92939495969798999aa2a3a4a5a6a7a8a9aab2b3b4b5b6b7b8b9bac2c3c4c5c6c7c8c9cad2d3d4d5d6d7d8d9dae1e2e3e4e5e6e7e8e9eaf1f2f3f4f5f6f7f8f9faffc4001f0100030101010101010101010000000000000102030405060708090a0bffc400b51100020102040403040705040400010277000102031104052131061241510761711322328108144291a1b1c109233352f0156272d10a162434e125f11718191a262728292a35363738393a434445464748494a535455565758595a636465666768696a737475767778797a82838485868788898a92939495969798999aa2a3a4a5a6a7a8a9aab2b3b4b5b6b7b8b9bac2c3c4c5c6c7c8c9cad2d3d4d5d6d7d8d9dae2e3e4e5e6e7e8e9eaf2f3f4f5f6f7f8f9faffda000c03010002110311003f00","hex"),o=s.from("ffd9","hex");function r(e,t){throw new Error(`Cannot cast ${e.className} to any kind of ${t}`)}e.exports={getMessageId:function(e){if(void 0!==e){if("number"==typeof e)return e;if(2030045667===e.SUBCLASS_OF_ID)return e.id;throw new Error(`Invalid message type: ${e.constructor.name}`)}},getInputPeer:function e(t,n=!0,s=!0){if(void 0===t.SUBCLASS_OF_ID){if(n&&"inputEntity"in t)return t.inputEntity;if("entity"in t)return e(t.entity);r(t,"InputPeer")}if(3374092470===t.SUBCLASS_OF_ID)return t;if(t instanceof i.User){if(t.isSelf&&n)return new i.InputPeerSelf;if(void 0===t.accessHash&&s)throw new Error("User without accessHash or min info cannot be input");return new i.InputPeerUser({userId:t.id,accessHash:t.accessHash})}if(t instanceof i.Chat||t instanceof i.ChatEmpty||t instanceof i.ChatForbidden)return new i.InputPeerChat({chatId:t.id});if(t instanceof i.Channel){if(void 0===t.accessHash&&s)throw new TypeError("Channel without accessHash or min info cannot be input");return new i.InputPeerChannel({channelId:t.id,accessHash:t.accessHash})}return t instanceof i.ChannelForbidden?new i.InputPeerChannel({channelId:t.id,accessHash:t.accessHash}):t instanceof i.InputUser?new i.InputPeerUser({userId:t.userId,accessHash:t.accessHash}):t instanceof i.InputChannel?new i.InputPeerChannel({channelId:t.channelId,accessHash:t.accessHash}):t instanceof i.UserEmpty?new i.InputPeerEmpty:t instanceof i.UserFull?e(t.user):t instanceof i.ChatFull?new i.InputPeerChat({chatId:t.id}):t instanceof i.PeerChat?new i.InputPeerChat(t.chatId):void r(t,"InputPeer")},getDisplayName:function(e){return e instanceof i.User?e.lastName&&e.firstName?`${e.firstName} ${e.lastName}`:e.firstName?e.firstName:e.lastName?e.lastName:"":e instanceof i.Chat||e instanceof i.Channel?e.title:""},getDownloadPartSize:function(e){if(e<=65536)return 64;if(e<=104857600)return 128;if(e<=786432e3)return 256;if(e<=2097152e3)return 512;if(e<=4194304e3)return 1024;throw new Error("File size too large")},getUploadPartSize:function(e){if(e<=104857600)return 128;if(e<=786432e3)return 256;if(e<=2097152e3)return 512;if(e<=4194304e3)return 512;throw new Error("File size too large")},strippedPhotoToJpg:function(e){if(e.length<3||1!==e[0])return e;const t=s.from(a);return t[164]=e[1],t[166]=e[2],s.concat([t,e.slice(3),o])},getDC:function(e,t=!1){switch(e){case 1:return{id:1,ipAddress:`zws1${t?"-1":""}.web.telegram.org`,port:443};case 2:return{id:2,ipAddress:`zws2${t?"-1":""}.web.telegram.org`,port:443};case 3:return{id:3,ipAddress:`zws3${t?"-1":""}.web.telegram.org`,port:443};case 4:return{id:4,ipAddress:`zws4${t?"-1":""}.web.telegram.org`,port:443};case 5:return{id:5,ipAddress:`zws5${t?"-1":""}.web.telegram.org`,port:443};default:throw new Error(`Cannot find the DC with the ID of ${e}`)}}}},33681:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s}),String.fromCharCode(8205);const s=/(?:\ud83c[\udd70\udd71\udd7e\udd7f]\ufe0f)|(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b|\ud83d\udc26\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef0-\udef8]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedc-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude7c\ude80-\ude88\ude90-\udebd\udebf-\udec2\udece-\udedb\udee0-\udee8]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g},46586:(e,t,n)=>{"use strict";function s(e,t,n){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?s:String(s))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>i});class i{constructor(){s(this,"promise",void 0),s(this,"reject",void 0),s(this,"resolve",void 0),this.promise=new Promise(((e,t)=>{this.reject=t,this.resolve=e}))}static resolved(e){const t=new i;return t.resolve(e),t}}},94462:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(33681);const i=new RegExp(`^(?:${s.Z.source})+$`,""),a=e=>{const t=e.split("\n"),n=t.join("");if(n.length>800)return!1;if(!Boolean(n.match(i)))return!1;const a=t.map((e=>{let t=0;for(;s.Z.exec(e);)if(t++,t>100)return s.Z.lastIndex=0,-1;return t}));let o=t.length;for(let e=0;e<a.length;e++){if(-1===a[e])return!1;a[e]>o&&(o=a[e])}return o}},24678:(e,t,n)=>{"use strict";function s(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function i(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const i=s(n);return(e,n)=>i.then((s=>n(s.transaction(t,e).objectStore(t))))}let a;function o(){return a||(a=i("keyval-store","keyval")),a}function r(e,t=o()){return t("readonly",(t=>s(t.get(e))))}function d(e,t,n=o()){return n("readwrite",(n=>(n.put(t,e),s(n.transaction))))}function c(e,t=o()){return t("readwrite",(t=>(e.forEach((e=>t.put(e[1],e[0]))),s(t.transaction))))}function u(e,t=o()){return t("readonly",(t=>Promise.all(e.map((e=>s(t.get(e)))))))}function f(e,t,n=o()){return n("readwrite",(n=>new Promise(((i,a)=>{n.get(e).onsuccess=function(){try{n.put(t(this.result),e),i(s(n.transaction))}catch(e){a(e)}}}))))}function p(e,t=o()){return t("readwrite",(t=>(t.delete(e),s(t.transaction))))}function l(e,t=o()){return t("readwrite",(t=>(e.forEach((e=>t.delete(e))),s(t.transaction))))}function h(e=o()){return e("readwrite",(e=>(e.clear(),s(e.transaction))))}function m(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},s(e.transaction)}function g(e=o()){return e("readonly",(e=>{if(e.getAllKeys)return s(e.getAllKeys());const t=[];return m(e,(e=>t.push(e.key))).then((()=>t))}))}function A(e=o()){return e("readonly",(e=>{if(e.getAll)return s(e.getAll());const t=[];return m(e,(e=>t.push(e.value))).then((()=>t))}))}function y(e=o()){return e("readonly",(t=>{if(t.getAll&&t.getAllKeys)return Promise.all([s(t.getAllKeys()),s(t.getAll())]).then((([e,t])=>e.map(((e,n)=>[e,t[n]]))));const n=[];return e("readonly",(e=>m(e,(e=>n.push([e.key,e.value]))).then((()=>n))))}))}n.r(t),n.d(t,{clear:()=>h,createStore:()=>i,del:()=>p,delMany:()=>l,entries:()=>y,get:()=>r,getMany:()=>u,keys:()=>g,promisifyRequest:()=>s,set:()=>d,setMany:()=>c,update:()=>f,values:()=>A})}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var a=s[e]={id:e,loaded:!1,exports:{}};return n[e].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=n,i.x=()=>{var e=i.O(void 0,[5802,8764,24,1637],(()=>i(23116)));return i.O(e)},e=[],i.O=(t,n,s,a)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){for(var[n,s,a]=e[u],r=!0,d=0;d<n.length;d++)(!1&a||o>=a)&&Object.keys(i.O).every((e=>i.O[e](n[d])))?n.splice(d--,1):(r=!1,a<o&&(o=a));if(r){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,s,a]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>e+"."+{24:"b6bac260faf590d2646f",1637:"8548e8a79a68f2e0879b",5802:"732aa31393373676a8b5",8764:"d029533a5d818e78e330"}[e]+".js",i.miniCssF=e=>{},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&!e;)e=n[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={3356:1};i.f.i=(t,n)=>{e[t]||importScripts(i.p+i.u(t))};var t=self.webpackChunktelegram_t=self.webpackChunktelegram_t||[],n=t.push.bind(t);t.push=t=>{var[s,a,o]=t;for(var r in a)i.o(a,r)&&(i.m[r]=a[r]);for(o&&o(i);s.length;)e[s.pop()]=1;n(t)}})(),t=i.x,i.x=()=>Promise.all([5802,8764,24,1637].map(i.e,i)).then(t),i.x()})();